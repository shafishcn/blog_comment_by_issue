{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u8fd9\u91cc\u5199\u4e2a\u5206\u7c7b\u5bfc\u822a \u6280\u672f \u65c5\u6e38 ci test3 test in my host https://shafishcn.github.io/shafish_blog/ \u3002\u3002\u3002","title":"Home"},{"location":"about/","text":"\u8fd9\u914d\u8272\uff0c\u7cbe\u5fc3\u6311\u9009\uff0c\u5320\u5fc3\u5236\u4f5c\uff0c\u6ca1\u6bdb\u75c5\u94c1\u5b50 \u7ec8\u4e8e\u6b63\u5f0f\u4f7f\u7528\u9759\u6001\u535a\u5ba2\u5566 \u6765\u4e00\u8d77\u55e8\u8d77\u6765 \u4e4b\u524d\u4e00\u76f4\u5728\u7528typecho\uff0c\u5b83\u7684\u540e\u53f0\u7ba1\u7406\u3001\u6587\u7ae0\u53d1\u5e03\u4ec0\u4e48\u7684\u4e5f\u7528\u4e60\u60ef\u4e86\uff0c\u5728\u52a8\u6001\u535a\u5ba2\u4e2d\u786e\u5b9e\u662f\u8f7b\u91cf\u7ea7\u522b\u7684\u597d\u7cfb\u7edf\u3002 \u4f46\u7cfb\u634f\uff0c\u8fd9\u4e9b\u7cfb\u7edf\u59cb\u7ec8\u6709\u4e2a\u7f3a\u70b9\uff1a\u7248\u672c\u5347\u7ea7\u9700\u8981\u7559\u610f\u4e00\u7cfb\u5217\u95ee\u9898\u3002\u4e5f\u8bf4\u4e0d\u4e0a\u7f3a\u70b9\uff0c\u4e3b\u8981\u662f\u5f88\u591a\u52a8\u6001\u535a\u5ba2\u7cfb\u7edf\u90fd\u53ef\u4ee5\u7528\u7b2c\u4e09\u65b9\u4e3b\u9898\uff0c\u7cfb\u7edf\u66f4\u65b0\u4e86\u65b0\u7248\u672c\u6846\u67b6\uff0c\u597d\u5bb6\u4f19\uff0c\u7528\u7684\u4e3b\u9898\u5c31\u5f97\u91cd\u65b0\u641e\u9002\u914d\u3002 \u6709\u4eba\u5c31\u8bf4\u4e86\uff08\u5e76\u6ca1\u6709\uff09\uff1a\u4f60\u4e0d\u66f4\u65b0\u6846\u67b6\u4e0d\u5c31\u597d\u4e86\u561b\uff0c\u90a3\u662f\u4f60\u8fd8\u6ca1\u9047\u5230\u670d\u52a1\u5668\u8fc7\u671f\uff0c\u7eed\u8d39\u8fd8\u8001\u8d35\u7684\u60c5\u51b5\uff0c\u4e0d\u5dee\u94b1\u7684\u76f4\u63a5\u7eed\u4e0b\u8d39\uff0c\u5565\u4e8b\u90fd\u4e0d\u7528\u6298\u817e\uff08\u4e3b\u8981\u8fd8\u662f\u591a\u5c11\u6709\u70b9\u5f3a\u8feb\u75c7\uff09\u3002 \u53bb\u9694\u58c1\u5382\u5f04\u4e2a\u65b0\u53f7\u505a\u70b9\u5fae\u8584\u8d21\u732e\uff0c\u8fd9\u4e00\u5f04\uff0c\u597d\u5bb6\u4f19\uff0c\u60f3\u7740\u90fd\u6362\u670d\u52a1\u5668\u52d2\uff0c\u4e0dneng latest lts\u7248\u672c\u6709\u70b9\u8bf4\u4e0d\u8fc7\u53bb\uff0c\u4e0a\u4e86\u6700\u65b0\u7cfb\u7edf\u6846\u67b6\uff0c\u7ed3\u679c\u7528\u7684\u4e3b\u9898\u6ca1\u9002\u914d\uff08\u679c\u7136\u4e3b\u9898\u4e0d\u80fd\u5149\u597d\u770b\u554a\uff09\uff0c\u5f53\u65f6\u5149\u7559\u610f\u5907\u4efd\u6587\u7ae0\u6570\u636e\uff0c\u4e3b\u9898\u8bbe\u7f6e\u8fd8\u5fd8\u8bb0\u4e86\u5907\u4efd\u3002\u60f3\u7740\u95ee\u9898\u4e5f\u4e0d\u7b97\u5927\uff0c\u81ea\u5df1\u52a8\u624b\u9002\u914d\u4e3b\u9898\u5e94\u8be5\u4e5f\u8fd8\u884c\uff0c\u4e0b\u73ed\u540e\u5b66\u4e86\u51e0\u5929php\uff0cnginx+fpm\u73af\u5883\u642d\u8d77\u6765\u3001\u8bed\u4e49\u8bed\u6cd5\u8fc7\u4e00\u904d\uff0c\u7ffb\u4e86\u7ffb\u4e3b\u9898\u4ee3\u7801\uff0c\u597d\u4e86\u76f4\u63a5\u840e\u4e86\uff0c\u770b\u4e0d\u61c2\uff0c\u6ca1\u6cd5\u4e0b\u624b\u3002\u6ca1\u5fc5\u8981\uff0c\u786e\u5b9e\u6ca1\u5fc5\u8981\u3002 \u6700\u540e\u672c\u7740\u591a\u5b66\u4e60\u5b66\u4e60\u524d\u7aefzhishi\u7684\u6001\u5ea6\uff08bing bu shi\uff09\uff0c\u5728docsify\u548cmkdocs\u4e2d\u9009\u4e86\u540e\u8005\uff0c\u6587\u6863\u4e5f\u6bd4\u8f83\u5168\u9762\uff0c\u4e00\u5929\u65f6\u95f4\u642d\u597d\u8fd8\u5199\u4e86\u4f7f\u7528\u6587\u6863\u5f04\u4e86github action\u3002\u603b\u4e4b\u6574\u633a\u597d\uff0c\u4e0d\u51fa\u610f\u5916\u4f1a\u4e00\u76f4\u7528\u4e0b\u53bb\u3002 \u4e4b\u524d\u7684typecho\u8fd8\u4fdd\u7559\u7740\uff0c\u4e0d\u8fc7\u7528\u4e86\u9ed8\u8ba4\u7684\u4e3b\u9898\uff0c\u65e7\u4e3b\u9898\u4e2d\u8bbe\u7f6e\u7684\u5f88\u591a\u6837\u5f0f\u6ca1\u89e3\u6790\u51fa\u6765\uff0c\u540e\u7eed\u5904\u7406\u4e0b\u5931\u6548\u7684\u56fe\u7247\u94fe\u63a5\u5c31\u8fd9\u6837\u4e86\uff0c\u95f2\u7684\u65e0\u804a\u53ef\u4ee5\u53bb\u5eb7\u5eb7\uff1a https://blog.shafish.cn/","title":"\u5173\u4e8e"},{"location":"blog/","text":"\u6280\u672f\u533a\u7b80\u8ff0 \ud83d\udc1f","title":"\u6280\u672f\u533a\u7b80\u8ff0"},{"location":"blog/#\u6280\u672f\u533a\u7b80\u8ff0","text":"","title":"\u6280\u672f\u533a\u7b80\u8ff0"},{"location":"blog/i3wm/","text":"i3wm\u4f7f\u7528\u8bb0\u5f55 \ud83d\udc1f https://wiki.archlinux.org/title/I3_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87) https://i3wm.org/docs/userguide.html \u4e00\u3001\u4f7f\u7528i3status-rust \ud83d\udc1f ref: https://github.com/greshake/i3status-rust 1.\u5b89\u88c5 sudo pacman -Syu i3status-rust 2.\u914d\u7f6e # \u66f4\u65b0\u4e0b\u641c\u7d22\u5e93\u6570\u636e updatedb # \u5b9a\u4f4di3status-rust\u5b89\u88c5\u76ee\u5f55\u548c\u914d\u7f6e\u6587\u4ef6 locate i3status # \u521b\u5efa\u914d\u7f6e\u6587\u4ef6 sudo mkdir /etc/i3status-rust sudo cp /usr/share/doc/i3status-rust/examples/config.toml /etc/i3status-rust locate \u7ed3\u679c /etc/i3status.conf /usr/bin/adjust_i3statusconf /usr/bin/i3status /usr/bin/i3status-rs /usr/share/i3status-rust /usr/share/doc/i3status-rust /usr/share/doc/i3status-rust/examples /usr/share/doc/i3status-rust/examples/config.toml /usr/share/doc/i3status-rust/examples/config_icon_override.toml /usr/share/doc/i3status-rust/examples/config_theme_override.toml ... 3.\u63a5\u5165i3bar # \u4fee\u6539bar vim ~/i3/config # \u4e3b\u8981\u6dfb\u52a0 status_command path/i3status-rs path/config.toml # path\u6839\u636e\u4e0a\u9762locate\u5b9a\u4f4d\u5f97\u5230 ~/i3/config # Start i3bar to display a workspace bar (plus the system information i3status if available) bar { font pango:DejaVu Sans Mono, FontAwesome 12 status_command /usr/bin/i3status-rs /etc/i3status-rust/config.toml #status_command i3status #status_command exec /home/shafish/.i3/net-speed.sh position bottom ## please set your primary output first. Example: 'xrandr --output eDP1 --primary' # tray_output primary # tray_output eDP1 bindsym button4 nop bindsym button5 nop # font xft:URWGothic-Book 11 strip_workspace_numbers yes colors { separator #666666 background #222222 statusline #dddddd focused_workspace #0088CC #0088CC #ffffff active_workspace #333333 #333333 #ffffff inactive_workspace #333333 #333333 #888888 urgent_workspace #2f343a #900000 #ffffff } #colors { #background #222D31 #statusline #F9FAF9 #separator #454947 #border backgr. text #focused_workspace #F9FAF9 #16a085 #292F34 #active_workspace #595B5B #353836 #FDF6E3 #inactive_workspace #595B5B #222D31 #EEE8D5 #binding_mode #16a085 #2C2C2C #F9FAF9 #urgent_workspace #16a085 #FDF6E3 #E5201D #} } 4.i3 reload win+shift+r 5.block\u914d\u7f6e blocks\u4f7f\u7528\u6587\u6863\uff1ahttps://github.com/greshake/i3status-rust/blob/master/doc/blocks.md#formatting \u56fe\u6807\uff1a https://wiki.archlinux.org/title/i3_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E7%8A%B6%E6%80%81%E6%A0%8F%E4%B8%AD%E7%9A%84%E5%9B%BE%E6%A0%87%E5%AD%97%E4%BD%93 theme = \"solarized-dark\" icons = \"awesome\" #[[block]] #block = \"speedtest\" #interval = 1800 #format = \"{ping}{speed_down:4*B}{speed_up:4*B}\" [[block]] block = \"net\" device = \"wlp1s0\" format = \"{ssid} {speed_down;K*b} {speed_up:K*b}\" interval = 1 [[block]] block = \"disk_space\" path = \"/\" info_type = \"available\" alert = 10.0 format = \"{icon}/{available}\" [[block]] block = \"disk_space\" path = \"/home\" info_type = \"available\" warning = 50.0 alert = 20.0 format = \"{icon}/home {available}\" [[block]] block = \"memory\" format_mem = \"{mem_used}\" #format_swap = \"{swap_used}/{swap_total}({swap_used_percents})\" display_type = \"memory\" icons = true clickable = false interval = 5 warning_mem = 60 #warning_swap = 80 critical_mem = 90 #critical_swap = 95 [[block]] block = \"cpu\" interval = 1 warning = 60 critical = 90 [[block]] block = \"load\" interval = 1 format = \"{1m}\" [[block]] block = \"battery\" interval = 10 format = \"{percentage}\" [[block]] block = \"time\" interval = 1 format = \"%a %m-%d %H:%M:%S\"","title":"i3wm\u4f7f\u7528\u8bb0\u5f55"},{"location":"blog/i3wm/#i3wm\u4f7f\u7528\u8bb0\u5f55","text":"https://wiki.archlinux.org/title/I3_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87) https://i3wm.org/docs/userguide.html","title":"i3wm\u4f7f\u7528\u8bb0\u5f55"},{"location":"blog/i3wm/#\u4e00\u4f7f\u7528i3status-rust","text":"ref: https://github.com/greshake/i3status-rust 1.\u5b89\u88c5 sudo pacman -Syu i3status-rust 2.\u914d\u7f6e # \u66f4\u65b0\u4e0b\u641c\u7d22\u5e93\u6570\u636e updatedb # \u5b9a\u4f4di3status-rust\u5b89\u88c5\u76ee\u5f55\u548c\u914d\u7f6e\u6587\u4ef6 locate i3status # \u521b\u5efa\u914d\u7f6e\u6587\u4ef6 sudo mkdir /etc/i3status-rust sudo cp /usr/share/doc/i3status-rust/examples/config.toml /etc/i3status-rust locate \u7ed3\u679c /etc/i3status.conf /usr/bin/adjust_i3statusconf /usr/bin/i3status /usr/bin/i3status-rs /usr/share/i3status-rust /usr/share/doc/i3status-rust /usr/share/doc/i3status-rust/examples /usr/share/doc/i3status-rust/examples/config.toml /usr/share/doc/i3status-rust/examples/config_icon_override.toml /usr/share/doc/i3status-rust/examples/config_theme_override.toml ... 3.\u63a5\u5165i3bar # \u4fee\u6539bar vim ~/i3/config # \u4e3b\u8981\u6dfb\u52a0 status_command path/i3status-rs path/config.toml # path\u6839\u636e\u4e0a\u9762locate\u5b9a\u4f4d\u5f97\u5230 ~/i3/config # Start i3bar to display a workspace bar (plus the system information i3status if available) bar { font pango:DejaVu Sans Mono, FontAwesome 12 status_command /usr/bin/i3status-rs /etc/i3status-rust/config.toml #status_command i3status #status_command exec /home/shafish/.i3/net-speed.sh position bottom ## please set your primary output first. Example: 'xrandr --output eDP1 --primary' # tray_output primary # tray_output eDP1 bindsym button4 nop bindsym button5 nop # font xft:URWGothic-Book 11 strip_workspace_numbers yes colors { separator #666666 background #222222 statusline #dddddd focused_workspace #0088CC #0088CC #ffffff active_workspace #333333 #333333 #ffffff inactive_workspace #333333 #333333 #888888 urgent_workspace #2f343a #900000 #ffffff } #colors { #background #222D31 #statusline #F9FAF9 #separator #454947 #border backgr. text #focused_workspace #F9FAF9 #16a085 #292F34 #active_workspace #595B5B #353836 #FDF6E3 #inactive_workspace #595B5B #222D31 #EEE8D5 #binding_mode #16a085 #2C2C2C #F9FAF9 #urgent_workspace #16a085 #FDF6E3 #E5201D #} } 4.i3 reload win+shift+r 5.block\u914d\u7f6e blocks\u4f7f\u7528\u6587\u6863\uff1ahttps://github.com/greshake/i3status-rust/blob/master/doc/blocks.md#formatting \u56fe\u6807\uff1a https://wiki.archlinux.org/title/i3_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)#%E7%8A%B6%E6%80%81%E6%A0%8F%E4%B8%AD%E7%9A%84%E5%9B%BE%E6%A0%87%E5%AD%97%E4%BD%93 theme = \"solarized-dark\" icons = \"awesome\" #[[block]] #block = \"speedtest\" #interval = 1800 #format = \"{ping}{speed_down:4*B}{speed_up:4*B}\" [[block]] block = \"net\" device = \"wlp1s0\" format = \"{ssid} {speed_down;K*b} {speed_up:K*b}\" interval = 1 [[block]] block = \"disk_space\" path = \"/\" info_type = \"available\" alert = 10.0 format = \"{icon}/{available}\" [[block]] block = \"disk_space\" path = \"/home\" info_type = \"available\" warning = 50.0 alert = 20.0 format = \"{icon}/home {available}\" [[block]] block = \"memory\" format_mem = \"{mem_used}\" #format_swap = \"{swap_used}/{swap_total}({swap_used_percents})\" display_type = \"memory\" icons = true clickable = false interval = 5 warning_mem = 60 #warning_swap = 80 critical_mem = 90 #critical_swap = 95 [[block]] block = \"cpu\" interval = 1 warning = 60 critical = 90 [[block]] block = \"load\" interval = 1 format = \"{1m}\" [[block]] block = \"battery\" interval = 10 format = \"{percentage}\" [[block]] block = \"time\" interval = 1 format = \"%a %m-%d %H:%M:%S\"","title":"\u4e00\u3001\u4f7f\u7528i3status-rust"},{"location":"blog/mkdocs/","text":"Mkdocs Material\u4f7f\u7528\u8bb0\u5f55 \ud83d\udc1f \u4e00\u3001markdown\u4f7f\u7528 \ud83d\udc1f 0. \u7248\u672c\u4e0e\u5347\u7ea7 \ud83d\udc1f Tip \u7248\u672c\u5347\u7ea7\u987b\u77e5\uff1a https://squidfunk.github.io/mkdocs-material/upgrade/#upgrading-from-7x-to-8x # \u67e5\u770b\u5f53\u524d\u5b89\u88c5\u7684\u7248\u672c\u53f7 pip show mkdocs-material # \u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c pip install --upgrade mkdocs-material 1. \u663e\u793a\u672f\u8bed\u63d0\u793a \ud83d\udc1f # mkdocs.yml \u76f8\u5173\u914d\u7f6e markdown_extensions : - abbr - pymdownx.snippets Show Code The HTML specification is maintained by the W3C . The HTML specification is maintained by the W3C. *[HTML]: Hyper Text Markup Language *[W3C]: World Wide Web Consortium 2. \u5f15\u5165\u72ec\u7acb\u7684\u672f\u8bed\u8868\uff08\u5ffd\u7565\uff09 \ud83d\udc1f Note \u663e\u793a\u6548\u679c\u8ddf\u4e0a\u9762\u793a\u4f8b1\u662f\u4e00\u6837\u7684\uff0c\u533a\u522b\u662f\u4f7f\u7528 --8<-- \u53ef\u4ee5\u628a\u672f\u8bed\u7684\u8bf4\u660e \u72ec\u7acb\u5728\u53e6\u5916\u7684\u6587\u4ef6\uff0c\u4e0d\u5fc5\u8ddf\u672f\u8bed\u5728\u540c\u4e00\u6587\u4ef6\u4e2d\u3002 # mkdocs.yml \u76f8\u5173\u914d\u7f6e markdown_extensions : - abbr - pymdownx.snippets Code Code \u672f\u8bed\u6587\u4ef6\u4e2d\u5f15\u5165\u672f\u8bed\u8868\uff1a --8<-- \"includes/abbreviations.md\" The HTML specification is maintained by the W3C. \u672f\u8bed\u8868: includes/abbreviations.md *[HTML]: Hyper Text Markup Language *[W3C]: World Wide Web Consortium 3. \u63d0\u793a\u3001\u8b66\u544a\u680f \ud83d\udc1f # mkdocs.yml \u76f8\u5173\u914d\u7f6e markdown_extensions : - admonition - pymdownx.details - pymdownx.superfences note abstract info tip success question warning failure danger bug example quote Note \u9ed8\u8ba4note\u6807\u7b7e\u3002Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Phasellus posuere in sem ut cursus \u81ea\u5b9a\u4e49\u6807\u9898\u7684note\u6807\u7b7e\u3002Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. \u6728\u6709\u6807\u9898\u7684note\u6807\u7b7e\u3002Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. !!! note \u9ed8\u8ba4note\u6807\u7b7e\u3002Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. !!! note \"Phasellus posuere in sem ut cursus\" \u81ea\u5b9a\u4e49\u6807\u9898\u7684note\u6807\u7b7e\u3002Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. !!! note \"\" \u6728\u6709\u6807\u9898\u7684note\u6807\u7b7e\u3002Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Abstract abstract, summary, tldr.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. !!! abstract Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Info Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. !!! info info, todo.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Tip Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. !!! tip tip, hint, important.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Success Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. !!! success success, check, done.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Question Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. !!! question question, help, faq.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Warning Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. !!! warning warning, caution, attention.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Failure Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. !!! failure failure, fail, missing.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Danger Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. !!! danger danger, error.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Bug Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. !!! bug Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Example Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. !!! example Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Quote Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. !!! quote quote, cite.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. 4. \u6309\u94ae \ud83d\udc1f # mkdocs.yml \u76f8\u5173\u914d\u7f6e markdown_extensions : - attr_list \u666e\u901a\u6309\u94ae primary \u6309\u94ae Subscribe to our newsletter [ Subscribe to our newsletter ]( # ){ .md-button } Subscribe to our newsletter [ Subscribe to our newsletter ]( # ){ .md-button .md-button--primary } 5. \u4ee3\u7801\u5757 \ud83d\udc1f # mkdocs.yml \u76f8\u5173\u914d\u7f6e markdown_extensions : - pymdownx.highlight : anchor_linenums : true - pymdownx.inlinehilite - pymdownx.snippets - pymdownx.superfences \u6307\u5b9a\u6587\u4ef6\u540d \u663e\u793a\u884c\u6570 \u6307\u5b9a\u67d0\u4e24\u884c\u9ad8\u4eae \u6307\u5b9a\u8fde\u7eed\u884c\u9ad8\u4eae bubble_sort.py def bubble_sort ( items ): for i in range ( len ( items )): for j in range ( len ( items ) - 1 - i ): if items [ j ] > items [ j + 1 ]: items [ j ], items [ j + 1 ] = items [ j + 1 ], items [ j ] ``` py title=\"bubble_sort.py\" def bubble_sort(items): for i in range(len(items)): for j in range(len(items) - 1 - i): if items[j] > items[j + 1]: items[j], items[j + 1] = items[j + 1], items[j] ``` 1 2 3 4 5 def bubble_sort ( items ): for i in range ( len ( items )): for j in range ( len ( items ) - 1 - i ): if items [ j ] > items [ j + 1 ]: items [ j ], items [ j + 1 ] = items [ j + 1 ], items [ j ] ``` py linenums=\"1\" def bubble_sort(items): for i in range(len(items)): for j in range(len(items) - 1 - i): if items[j] > items[j + 1]: items[j], items[j + 1] = items[j + 1], items[j] ``` 1 2 3 4 5 def bubble_sort ( items ): for i in range ( len ( items )): for j in range ( len ( items ) - 1 - i ): if items [ j ] > items [ j + 1 ]: items [ j ], items [ j + 1 ] = items [ j + 1 ], items [ j ] ``` py linenums=\"1\" hl_lines=\"2 4\" def bubble_sort(items): for i in range(len(items)): for j in range(len(items) - 1 - i): if items[j] > items[j + 1]: items[j], items[j + 1] = items[j + 1], items[j] ``` 1 2 3 4 5 def bubble_sort ( items ): for i in range ( len ( items )): for j in range ( len ( items ) - 1 - i ): if items [ j ] > items [ j + 1 ]: items [ j ], items [ j + 1 ] = items [ j + 1 ], items [ j ] ``` py linenums=\"1\" hl_lines=\"2-5\" def bubble_sort(items): for i in range(len(items)): for j in range(len(items) - 1 - i): if items[j] > items[j + 1]: items[j], items[j + 1] = items[j + 1], items[j] ``` 6. \u5185\u5bb9\u6807\u7b7e\u680f \ud83d\udc1f # mkdocs.yml \u76f8\u5173\u914d\u7f6e markdown_extensions : - pymdownx.superfences - pymdownx.tabbed : alternate_style : true Show Code C C++ #include <stdio.h> int main ( void ) { printf ( \"Hello world! \\n \" ); return 0 ; } #include <iostream> int main ( void ) { std :: cout << \"Hello world!\" << std :: endl ; return 0 ; } === \"C\" ``` c #include <stdio.h> int main(void) { printf(\"Hello world!\\n\"); return 0; } ``` === \"C++\" ``` c++ #include <iostream> int main(void) { std::cout << \"Hello world!\" << std::endl; return 0; } ``` 7. \u8868\u683c \ud83d\udc1f # mkdocs.yml \u76f8\u5173\u914d\u7f6e markdown_extensions : - tables Show Code Method Description GET Fetch resource PUT Update resource DELETE Delete resource | Method | Description | | :-----------: | :------------------------------------: | | `GET` | Fetch resource | | `PUT` | Update resource | | `DELETE` | Delete resource | 8. \u6ce8\u811a \ud83d\udc1f \u5728\u672c\u9875\u7684\u5e95\u90e8\u663e\u793a\u6ce8\u811a\u5185\u5bb9 # mkdocs.yml \u76f8\u5173\u914d\u7f6e markdown_extensions : - footnotes Show Code Lorem ipsum 1 dolor sit amet, consectetur adipiscing elit. 2 Lorem ipsum[^1] dolor sit amet, consectetur adipiscing elit.[^2] [ ^1 ]: Lorem ipsum dolor sit amet, consectetur adipiscing elit. [ ^2 ]: Lorem ipsum dolor sit amet, consectetur adipiscing elit. 9. \u683c\u5f0f\u5316\u5904\u7406 \ud83d\udc1f # mkdocs.yml \u76f8\u5173\u914d\u7f6e markdown_extensions : - pymdownx.critic - pymdownx.caret - pymdownx.keys - pymdownx.mark - pymdownx.tilde \u5220\u9664\u7ebf\u3001\u4e0b\u5212\u7ebf\u3001\u6ce8\u91ca\u3001\u9ad8\u4eae Code Text can be deleted and replacement text added . This can also be combined into one a single operation. Highlighting is also possible and comments can be added inline . Formatting can also be applied to blocks by putting the opening and closing tags on separate lines and adding new lines between the tags and the content. H 2 0 A T A - H~2~0 - A^T^A 10. \u56fe\u6807 \ud83d\udc1f # mkdocs.yml \u76f8\u5173\u914d\u7f6e markdown_extensions : - pymdownx.emoji : emoji_index : !!python/name:materialx.emoji.twemoji emoji_generator : !!python/name:materialx.emoji.to_svg Show Code :smile: :dart: \u652f\u6301\u4ee5\u4e0b\u56fe\u6807\uff1a \u2013 Material Design \u2013 FontAwesome \u2013 Octicons github markdown\uff1a https://github.com/zhangjw-THU/Emoji github commit\uff1a https://github.com/shafishcn/git-commit-emoji-cn 11. \u56fe\u7247 \ud83d\udc1f # mkdocs.yml \u76f8\u5173\u914d\u7f6e markdown_extensions : - attr_list - md_in_html markdown\u683c\u5f0f\u5c55\u793a\u56fe\u7247 \u6dfb\u52a0\u56fe\u7247\u8bf4\u660e \u61d2\u52a0\u8f7d\u56fe\u7247 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. ![ Image title ]( https://dummyimage.com/300x200/eee/aaa ){ align=left } Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Image \u8bf4\u660e < figure markdown > ![Image title](https://dummyimage.com/600x400/){ width=\"300\" } < figcaption > Image \u8bf4\u660e </ figcaption > </ figure > ![ Image title ]( https://dummyimage.com/600x400/ ){ loading=lazy } 12. \u5217\u8868 \ud83d\udc1f # mkdocs.yml \u76f8\u5173\u914d\u7f6e markdown_extensions : - def_list - pymdownx.tasklist : custom_checkbox : true \u65e0\u5e8f\u5217\u8868 \u6709\u5e8f\u5217\u8868 \u4f7f\u7528\u5b9a\u4e49\u5217\u8868 \u4efb\u52a1\u5217\u8868 Nulla et rhoncus turpis. Mauris ultricies elementum leo. Duis efficitur accumsan nibh eu mattis. Vivamus tempus velit eros, porttitor placerat nibh lacinia sed. Aenean in finibus diam. Duis mollis est eget nibh volutpat, fermentum aliquet dui mollis. Nam vulputate tincidunt fringilla. Nullam dignissim ultrices urna non auctor. - Nulla et rhoncus turpis. Mauris ultricies elementum leo. Duis efficitur accumsan nibh eu mattis. Vivamus tempus velit eros, porttitor placerat nibh lacinia sed. Aenean in finibus diam. * Duis mollis est eget nibh volutpat, fermentum aliquet dui mollis. * Nam vulputate tincidunt fringilla. * Nullam dignissim ultrices urna non auctor. Vivamus id mi enim. Integer id turpis sapien. Ut condimentum lobortis sagittis. Aliquam purus tellus, faucibus eget urna at, iaculis venenatis nulla. Vivamus a pharetra leo. Vivamus venenatis porttitor tortor sit amet rutrum. Pellentesque aliquet quam enim, eu volutpat urna rutrum a. Nam vehicula nunc mauris, a ultricies libero efficitur sed. Morbi eget dapibus felis. Vivamus venenatis porttitor tortor sit amet rutrum. Pellentesque aliquet quam enim, eu volutpat urna rutrum a. Mauris dictum mi lacus Ut sit amet placerat ante Suspendisse ac eros arcu 1. Vivamus id mi enim. Integer id turpis sapien. Ut condimentum lobortis sagittis. Aliquam purus tellus, faucibus eget urna at, iaculis venenatis nulla. Vivamus a pharetra leo. 1. Vivamus venenatis porttitor tortor sit amet rutrum. Pellentesque aliquet quam enim, eu volutpat urna rutrum a. Nam vehicula nunc mauris, a ultricies libero efficitur sed. 2. Morbi eget dapibus felis. Vivamus venenatis porttitor tortor sit amet rutrum. Pellentesque aliquet quam enim, eu volutpat urna rutrum a. 1. Mauris dictum mi lacus 2. Ut sit amet placerat ante 3. Suspendisse ac eros arcu Lorem ipsum dolor sit amet Sed sagittis eleifend rutrum. Donec vitae suscipit est. Nullam tempus tellus non sem sollicitudin, quis rutrum leo facilisis. Cras arcu libero Aliquam metus eros, pretium sed nulla venenatis, faucibus auctor ex. Proin ut eros sed sapien ullamcorper consequat. Nunc ligula ante. Duis mollis est eget nibh volutpat, fermentum aliquet dui mollis. Nam vulputate tincidunt fringilla. Nullam dignissim ultrices urna non auctor. `Lorem ipsum dolor sit amet` : Sed sagittis eleifend rutrum. Donec vitae suscipit est. Nullam tempus tellus non sem sollicitudin, quis rutrum leo facilisis. `Cras arcu libero` : Aliquam metus eros, pretium sed nulla venenatis, faucibus auctor ex. Proin ut eros sed sapien ullamcorper consequat. Nunc ligula ante. Duis mollis est eget nibh volutpat, fermentum aliquet dui mollis. Nam vulputate tincidunt fringilla. Nullam dignissim ultrices urna non auctor. Lorem ipsum dolor sit amet, consectetur adipiscing elit Vestibulum convallis sit amet nisi a tincidunt In hac habitasse platea dictumst In scelerisque nibh non dolor mollis congue sed et metus Praesent sed risus massa Aenean pretium efficitur erat, donec pharetra, ligula non scelerisque - [x] Lorem ipsum dolor sit amet, consectetur adipiscing elit - [ ] Vestibulum convallis sit amet nisi a tincidunt * [x] In hac habitasse platea dictumst * [x] In scelerisque nibh non dolor mollis congue sed et metus * [ ] Praesent sed risus massa - [ ] Aenean pretium efficitur erat, donec pharetra, ligula non scelerisque 13. MathJax \ud83d\udc1f \u7565 \u4e8c\u3001mkdocs.yml\u8bb0\u5f55 \ud83d\udc1f 1. \u8c03\u6574\u989c\u8272 \ud83d\udc1f .md-typeset button[data-md-color-accent] > code { background-color: var(--md-code-bg-color); color: var(--md-accent-fg-color); } .md-typeset button[data-md-color-primary] > code { background-color: var(--md-code-bg-color); color: var(--md-primary-fg-color); } \u8c03\u6574\u4e3b\u9898\u989c\u8272 \u8c03\u6574\u4e3b\u8272\u8c03 \u8c03\u6574hovered\u3001buttons\u3001scrollbars\u989c\u8272 \u81ea\u5b9a\u4e49\u4e3b\u9898\u989c\u8272 # mkdocs.yml \u76f8\u5173\u914d\u7f6e theme : palette : scheme : default \u9ed8\u8ba4\u53ea\u6709\u4e24\u4e2a\u9009\u9879\u53ef\u9009\uff1adefault\uff08\u4eae\u4e3b\u9898\uff09\u3001slate\uff08\u6697\u4e3b\u9898\uff09 default slate var buttons = document.querySelectorAll(\"button[data-md-color-scheme]\") buttons.forEach(function(button) { button.addEventListener(\"click\", function() { var attr = this.getAttribute(\"data-md-color-scheme\") document.body.setAttribute(\"data-md-color-scheme\", attr) var name = document.querySelector(\"#__code_1 code span:nth-child(7)\") name.textContent = attr }) }) # mkdocs.yml \u76f8\u5173\u914d\u7f6e theme : palette : primary : indigo red pink purple deep purple indigo blue light blue cyan teal green light green lime yellow amber orange deep orange brown grey blue grey black white var buttons = document.querySelectorAll(\"button[data-md-color-primary]\") buttons.forEach(function(button) { button.addEventListener(\"click\", function() { var attr = this.getAttribute(\"data-md-color-primary\") document.body.setAttribute(\"data-md-color-primary\", attr) var name = document.querySelector(\"#__code_2 code span:nth-child(7)\") name.textContent = attr.replace(\"-\", \" \") }) }) # mkdocs.yml \u76f8\u5173\u914d\u7f6e theme : palette : accent : indigo red pink purple deep purple indigo blue light blue cyan teal green light green lime yellow amber orange deep orange var buttons = document.querySelectorAll(\"button[data-md-color-accent]\") buttons.forEach(function(button) { button.addEventListener(\"click\", function() { var attr = this.getAttribute(\"data-md-color-accent\") document.body.setAttribute(\"data-md-color-accent\", attr) var name = document.querySelector(\"#__code_3 code span:nth-child(7)\") name.textContent = attr.replace(\"-\", \" \") }) }) \u5b9a\u4e49\u4e00\u4e2a\u53ebshafish\u7684\u4e3b\u9898\u8272\u8c03 # mkdocs.yml \u76f8\u5173\u914d\u7f6e theme : palette : scheme : shafish extra_css : - stylesheets/extra.css # docs/stylesheets/extra.css [ data-md-color-scheme = \"shafish\" ] { --md-primary-fg-color : #252632 ; --md-primary-fg-color--light : #ECB7B7 ; --md-primary-fg-color--dark : #90030C ; } 2. \u8c03\u6574\u5b57\u4f53 \ud83d\udc1f \u652f\u6301\uff1a Google Font # mkdocs.yml \u76f8\u5173\u914d\u7f6e theme : font : text : Roboto # \u5e38\u89c4\u5b57\u4f53 code : Roboto Mono #\u4ee3\u7801\u5757\u5b57\u4f53 3. logo\u3001favicon \ud83d\udc1f # mkdocs.yml \u76f8\u5173\u914d\u7f6e theme : logo : assets/logo.png # logo favicon : images/favicon.png # favicon 4. \u5bfc\u822a\u680f \ud83d\udc1f # mkdocs.yml \u76f8\u5173\u914d\u7f6e theme : features : #- navigation.instant # \u70b9\u51fb\u5185\u90e8\u94fe\u63a5\u65f6\uff0c\u4e0d\u7528\u5168\u90e8\u5237\u65b0\u9875\u9762 - navigation.tracking # \u5728url\u4e2d\u4f7f\u7528\u6807\u9898\u5b9a\u4f4d\u951a\u70b9 - navigation.tabs # \u9876\u90e8\u663e\u793a\u5bfc\u822a\u9876\u5c42nav\uff08\u4e5f\u5c31\u662f\u7b2c\u4e00\u4e2a\u8282\u70b9\uff09 - navigation.tabs.sticky # \u6eda\u52a8\u662f\u9690\u85cf\u9876\u90e8nav\uff0c\u9700\u8981\u914d\u5408navigation.tabs\u4f7f\u7528 - navigation.sections # nav\u8282\u70b9\u7f29\u8fdb - navigation.expand # \u4e0d\u6298\u53e0\u5de6\u4fa7nav\u8282\u70b9 - navigation.indexes # \u6307\u5b9a\u8282\u70b9index pages \uff0c\u8ddfinstant\u4e0d\u517c\u5bb9 - toc.integrate # \u53f3\u4fa7\u751f\u4ea7\u76ee\u5f55 - navigation.top # \u4e00\u952e\u56de\u9876\u90e8 5. \u641c\u7d22 \ud83d\udc1f ref\uff1a https://squidfunk.github.io/mkdocs-material/setup/setting-up-site-search/ 6. \u7f51\u7ad9\u8bbf\u95ee\u7edf\u8ba1 \ud83d\udc1f \u8c37\u6b4c\u793a\u4f8b Google Analytics # mkdocs.yml \u76f8\u5173\u914d\u7f6e extra : analytics : provider : google property : G-XXXXXXXXXX 7. metadata\u8bbe\u7f6e \ud83d\udc1f \u53ef\u4ee5\u8bbe\u7f6e\u7279\u5b9a\u7684key-value\u5230markdown\u6587\u6863\u4e2d\uff0cmkdocs\u518d\u8fdb\u884c\u5bf9\u5e94\u89e3\u6790 markdown_extensions : - meta \u9875\u9762\u6807\u9898 \u9875\u9762\u63cf\u8ff0 \u9690\u85cfnav\u3001toc \u9690\u85cf\u8bc4\u8bba --- title: Lorem ipsum dolor sit amet --- # Document title ... --- description: Nullam urna elit, malesuada eget finibus ut, ac tortor. --- # Document title ... --- hide: - navigation - toc --- # Document title \u8bf7\u5148\u770b\u7b2c10\u70b9\u8be6\u7ec6\u8bf4\u660e\u3002 --- vssue: \"\" --- # Document title ... 8. \u9876\u90e8\u9690\u85cf\u3001\u53d1\u5e03\u901a\u77e5 \ud83d\udc1f # mkdocs.yml \u76f8\u5173\u914d\u7f6e theme : features : - header.autohide custom_dir : overrides # \u81ea\u5b9a\u4e49\u4e3b\u9898\u8bbe\u7f6e\u3002overrides\u76ee\u5f55\u4e0edocs\u76ee\u5f55\u540c\u7ea7 <!-- overrides/main.html\u6587\u4ef6\u5185\u5bb9 --> {% extends \"base.html\" %} {% block announce %} <!-- Add announcement here, including arbitrary HTML --> \u901a\u77e5\uff1a\u5566\u5566\u5566\uff0cshafish\u7528\u65b0\u535a\u5ba2\u5566\uff01\uff01 {% endblock %} 9. \u7f51\u7ad9\u5e95\u90e8\u8bbe\u7f6e \ud83d\udc1f \u58f0\u660e\u4fdd\u7559\u7248\u6743 \u53f3\u4e0b\u89d2\u52a0\u4e2a\u8054\u7cfb\u65b9\u5f0f # mkdocs.yml \u76f8\u5173\u914d\u7f6e copyright : Copyright &copy; 2017 - 2020 shafish.cn \u6216\u8005 \u5728main.html\u4e2d\u81ea\u5b9a\u4e49\uff1a {% extends \"base.html\" %} {% block copyright %} <!-- Add copyright here, including arbitrary HTML --> {% endblock %} # mkdocs.yml \u76f8\u5173\u914d\u7f6e extra : social : - icon : fontawesome/solid/paper-plane link : mailto:<shafish_cn@163.com> name : \u90ae\u7bb1\u5730\u5740 10. \u8bc4\u8bba\u7cfb\u7edf-Vssue \ud83d\udc1f ref: Vssue mkdocs-material 8.x\u5c06\u8bc4\u8bba\u6539\u4e3a\u4e86\u81ea\u5b9a\u4e49\uff0c\u9700\u8981\u5728 mkdocs.yml \u4e2d\u8bbe\u7f6ecustom_dir\u76ee\u5f55\uff0c\u91cd\u5199partials/content.html\u4e2d\u7684\u5185\u5bb9\u3002 overrides/partials/content.html mkdocs.yml <!-- Copyright (c) 2016-2021 Martin Donath <martin.donath@squidfunk.com> Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. --> <!-- Edit button --> {% if page.edit_url %} < a href = \"{{ page.edit_url }}\" title = \"{{ lang.t('edit.link.title') }}\" class = \"md-content__button md-icon\" > {% include \".icons/material/pencil.svg\" %} </ a > {% endif %} <!-- Hack: check whether the content contains a h1 headline. If it doesn't, the page title (or respectively site name) is used as the main headline. --> {% if not \"\\x3ch1\" in page.content %} < h1 > {{ page.title | d(config.site_name, true)}} </ h1 > {% endif %} <!-- Markdown content --> {{ page.content }} <!-- Source file information --> {% if page and page.meta and ( page.meta.git_revision_date_localized or page.meta.revision_date ) %} {% include \"partials/source-file.html\" %} {% endif %} <!-- Get setting from mkdocs.yml, but allow page-level overrides --> <!-- \u5728\u4e0d\u9700\u8981\u8bc4\u8bba\u7684\u9875\u9762\u8bbe\u7f6e `vssue: \"\" ` \u8fd9\u4e2ameta\u4fe1\u606f\uff08\u9700\u5728mkdocs.yml\u4e2d\u6dfb\u52a0meta \u8fd9\u4e2apythonmarkdown \u63d2\u4ef6\uff09\u5373\u53ef\u5173\u95ed\u8be5\u9875\u9762\u7684\u8bc4\u8bba\u529f\u80fd\uff0c\u6bd4\u5982\u5728about\u9875\u9762\u5173\u95ed\u8bc4\u8bba: --- vssue: \"\" --- # about --> {% set vssue = config.extra.vssue %} {% if page and page.meta and page.meta.vssue is string %} {% set vssue = page.meta.vssue %} {% endif %} <!-- Inject Disqus into current page --> {% if not page.is_homepage and vssue %} < div id = \"vssue\" ></ div > <!--<link rel=\"stylesheet\" href=\"https://unpkg.com/vssue/dist/vssue.min.css\"> OR: vue full build (runtime + compiler) --> < script src = \"https://unpkg.com/vue/dist/vue.min.js\" ></ script > <!-- Vssue Github build --> < script src = \"https://unpkg.com/vssue/dist/vssue.github.min.js\" ></ script > < script > new Vue ({ el : '#vssue' , data : { title : options => ` ${ options . prefix }${ document . title } ` , options : { owner : 'shafishcn' , repo : 'shafish_blog' , clientId : 'xxx' , clientSecret : 'xxx' , // only required for some of the platforms prefix : '[BlogComment]' , labels : [ ':sunny:' ], issueContent : ({ url }) => `\u8fd9\u4e2a Issue \u7531 Vssue \u81ea\u52a8\u521b\u5efa\uff0c\u7528\u6765\u5b58\u50a8\u8be5\u9875\u9762\u7684\u8bc4\u8bba\uff1a ${ url } ` }, }, template : `<vssue :title=\"title\" :options=\"options\"></vssue>` , }) </ script > {% endif %} theme : custom_dir : overrides extra : vssue : shafish # \u968f\u4fbf\u586b\u503c\uff0c\u4e3b\u8981\u662f\u8bbe\u7f6e{% set vssue = config.extra.vssue %}\u65f6\uff0cvssue\u521d\u59cb\u503c\u53ef\u7528 11. blocks \ud83d\udc1f ref: https://squidfunk.github.io/mkdocs-material/customization/ \u4f7f\u7528\u65b9\u6cd5 mkdocs.yml \u8bbe\u7f6e\u6807\u9898-htmltitle \u901a\u77e5\u680f-announce <!-- overrides/main.html \uff0c \u5f04\u4e4b\u524d\u5148\u914d\u7f6e\u597dmkdocs.yml\u7684custom_dir--> {% extends \"base.html\" %} {% block blockName %} xxx {% endblock %} theme : custom_dir : overrides {% extends \"base.html\" %} {% block htmltitle %} xxx {% endblock %} {% extends \"base.html\" %} {% block announce %} xxx {% endblock %} \u4e09\u3001\u63d2\u4ef6 \ud83d\udc1f https://facelessuser.github.io/pymdown-extensions/extensions 1. \u663e\u793a\u6587\u4ef6\u6700\u540e\u4fee\u6539\u65f6\u95f4 \ud83d\udc1f $ pip install mkdocs-git-revision-date-localized-plugin # mkdocs.yml \u76f8\u5173\u914d\u7f6e plugins : - git-revision-date-localized : type : datetime fallback_to_build_date : true enable_creation_date : true \u56db\u3001\u90e8\u7f72 \ud83d\udc1f Github action\u90e8\u7f72\u5230github page Jenkins\u90e8\u7f72\u5230\u670d\u52a1\u5668 Lorem ipsum dolor sit amet, consectetur adipiscing elit. \u21a9 Lorem ipsum dolor sit amet, consectetur adipiscing elit. \u21a9","title":"mkdocs\u4f7f\u7528\u8bb0\u5f55"},{"location":"blog/mkdocs/#mkdocs-material\u4f7f\u7528\u8bb0\u5f55","text":"","title":"Mkdocs Material\u4f7f\u7528\u8bb0\u5f55"},{"location":"blog/mkdocs/#\u4e00markdown\u4f7f\u7528","text":"","title":"\u4e00\u3001markdown\u4f7f\u7528"},{"location":"blog/mkdocs/#0-\u7248\u672c\u4e0e\u5347\u7ea7","text":"Tip \u7248\u672c\u5347\u7ea7\u987b\u77e5\uff1a https://squidfunk.github.io/mkdocs-material/upgrade/#upgrading-from-7x-to-8x # \u67e5\u770b\u5f53\u524d\u5b89\u88c5\u7684\u7248\u672c\u53f7 pip show mkdocs-material # \u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c pip install --upgrade mkdocs-material","title":"0. \u7248\u672c\u4e0e\u5347\u7ea7"},{"location":"blog/mkdocs/#1-\u663e\u793a\u672f\u8bed\u63d0\u793a","text":"# mkdocs.yml \u76f8\u5173\u914d\u7f6e markdown_extensions : - abbr - pymdownx.snippets Show Code The HTML specification is maintained by the W3C . The HTML specification is maintained by the W3C. *[HTML]: Hyper Text Markup Language *[W3C]: World Wide Web Consortium","title":"1. \u663e\u793a\u672f\u8bed\u63d0\u793a"},{"location":"blog/mkdocs/#2-\u5f15\u5165\u72ec\u7acb\u7684\u672f\u8bed\u8868\u5ffd\u7565","text":"Note \u663e\u793a\u6548\u679c\u8ddf\u4e0a\u9762\u793a\u4f8b1\u662f\u4e00\u6837\u7684\uff0c\u533a\u522b\u662f\u4f7f\u7528 --8<-- \u53ef\u4ee5\u628a\u672f\u8bed\u7684\u8bf4\u660e \u72ec\u7acb\u5728\u53e6\u5916\u7684\u6587\u4ef6\uff0c\u4e0d\u5fc5\u8ddf\u672f\u8bed\u5728\u540c\u4e00\u6587\u4ef6\u4e2d\u3002 # mkdocs.yml \u76f8\u5173\u914d\u7f6e markdown_extensions : - abbr - pymdownx.snippets Code Code \u672f\u8bed\u6587\u4ef6\u4e2d\u5f15\u5165\u672f\u8bed\u8868\uff1a --8<-- \"includes/abbreviations.md\" The HTML specification is maintained by the W3C. \u672f\u8bed\u8868: includes/abbreviations.md *[HTML]: Hyper Text Markup Language *[W3C]: World Wide Web Consortium","title":"2. \u5f15\u5165\u72ec\u7acb\u7684\u672f\u8bed\u8868\uff08\u5ffd\u7565\uff09"},{"location":"blog/mkdocs/#3-\u63d0\u793a\u8b66\u544a\u680f","text":"# mkdocs.yml \u76f8\u5173\u914d\u7f6e markdown_extensions : - admonition - pymdownx.details - pymdownx.superfences note abstract info tip success question warning failure danger bug example quote Note \u9ed8\u8ba4note\u6807\u7b7e\u3002Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Phasellus posuere in sem ut cursus \u81ea\u5b9a\u4e49\u6807\u9898\u7684note\u6807\u7b7e\u3002Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. \u6728\u6709\u6807\u9898\u7684note\u6807\u7b7e\u3002Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. !!! note \u9ed8\u8ba4note\u6807\u7b7e\u3002Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. !!! note \"Phasellus posuere in sem ut cursus\" \u81ea\u5b9a\u4e49\u6807\u9898\u7684note\u6807\u7b7e\u3002Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. !!! note \"\" \u6728\u6709\u6807\u9898\u7684note\u6807\u7b7e\u3002Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Abstract abstract, summary, tldr.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. !!! abstract Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Info Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. !!! info info, todo.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Tip Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. !!! tip tip, hint, important.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Success Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. !!! success success, check, done.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Question Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. !!! question question, help, faq.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Warning Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. !!! warning warning, caution, attention.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Failure Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. !!! failure failure, fail, missing.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Danger Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. !!! danger danger, error.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Bug Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. !!! bug Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Example Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. !!! example Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Quote Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. !!! quote quote, cite.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa.","title":"3. \u63d0\u793a\u3001\u8b66\u544a\u680f"},{"location":"blog/mkdocs/#4-\u6309\u94ae","text":"# mkdocs.yml \u76f8\u5173\u914d\u7f6e markdown_extensions : - attr_list \u666e\u901a\u6309\u94ae primary \u6309\u94ae Subscribe to our newsletter [ Subscribe to our newsletter ]( # ){ .md-button } Subscribe to our newsletter [ Subscribe to our newsletter ]( # ){ .md-button .md-button--primary }","title":"4. \u6309\u94ae"},{"location":"blog/mkdocs/#5-\u4ee3\u7801\u5757","text":"# mkdocs.yml \u76f8\u5173\u914d\u7f6e markdown_extensions : - pymdownx.highlight : anchor_linenums : true - pymdownx.inlinehilite - pymdownx.snippets - pymdownx.superfences \u6307\u5b9a\u6587\u4ef6\u540d \u663e\u793a\u884c\u6570 \u6307\u5b9a\u67d0\u4e24\u884c\u9ad8\u4eae \u6307\u5b9a\u8fde\u7eed\u884c\u9ad8\u4eae bubble_sort.py def bubble_sort ( items ): for i in range ( len ( items )): for j in range ( len ( items ) - 1 - i ): if items [ j ] > items [ j + 1 ]: items [ j ], items [ j + 1 ] = items [ j + 1 ], items [ j ] ``` py title=\"bubble_sort.py\" def bubble_sort(items): for i in range(len(items)): for j in range(len(items) - 1 - i): if items[j] > items[j + 1]: items[j], items[j + 1] = items[j + 1], items[j] ``` 1 2 3 4 5 def bubble_sort ( items ): for i in range ( len ( items )): for j in range ( len ( items ) - 1 - i ): if items [ j ] > items [ j + 1 ]: items [ j ], items [ j + 1 ] = items [ j + 1 ], items [ j ] ``` py linenums=\"1\" def bubble_sort(items): for i in range(len(items)): for j in range(len(items) - 1 - i): if items[j] > items[j + 1]: items[j], items[j + 1] = items[j + 1], items[j] ``` 1 2 3 4 5 def bubble_sort ( items ): for i in range ( len ( items )): for j in range ( len ( items ) - 1 - i ): if items [ j ] > items [ j + 1 ]: items [ j ], items [ j + 1 ] = items [ j + 1 ], items [ j ] ``` py linenums=\"1\" hl_lines=\"2 4\" def bubble_sort(items): for i in range(len(items)): for j in range(len(items) - 1 - i): if items[j] > items[j + 1]: items[j], items[j + 1] = items[j + 1], items[j] ``` 1 2 3 4 5 def bubble_sort ( items ): for i in range ( len ( items )): for j in range ( len ( items ) - 1 - i ): if items [ j ] > items [ j + 1 ]: items [ j ], items [ j + 1 ] = items [ j + 1 ], items [ j ] ``` py linenums=\"1\" hl_lines=\"2-5\" def bubble_sort(items): for i in range(len(items)): for j in range(len(items) - 1 - i): if items[j] > items[j + 1]: items[j], items[j + 1] = items[j + 1], items[j] ```","title":"5. \u4ee3\u7801\u5757"},{"location":"blog/mkdocs/#6-\u5185\u5bb9\u6807\u7b7e\u680f","text":"# mkdocs.yml \u76f8\u5173\u914d\u7f6e markdown_extensions : - pymdownx.superfences - pymdownx.tabbed : alternate_style : true Show Code C C++ #include <stdio.h> int main ( void ) { printf ( \"Hello world! \\n \" ); return 0 ; } #include <iostream> int main ( void ) { std :: cout << \"Hello world!\" << std :: endl ; return 0 ; } === \"C\" ``` c #include <stdio.h> int main(void) { printf(\"Hello world!\\n\"); return 0; } ``` === \"C++\" ``` c++ #include <iostream> int main(void) { std::cout << \"Hello world!\" << std::endl; return 0; } ```","title":"6. \u5185\u5bb9\u6807\u7b7e\u680f"},{"location":"blog/mkdocs/#7-\u8868\u683c","text":"# mkdocs.yml \u76f8\u5173\u914d\u7f6e markdown_extensions : - tables Show Code Method Description GET Fetch resource PUT Update resource DELETE Delete resource | Method | Description | | :-----------: | :------------------------------------: | | `GET` | Fetch resource | | `PUT` | Update resource | | `DELETE` | Delete resource |","title":"7. \u8868\u683c"},{"location":"blog/mkdocs/#8-\u6ce8\u811a","text":"\u5728\u672c\u9875\u7684\u5e95\u90e8\u663e\u793a\u6ce8\u811a\u5185\u5bb9 # mkdocs.yml \u76f8\u5173\u914d\u7f6e markdown_extensions : - footnotes Show Code Lorem ipsum 1 dolor sit amet, consectetur adipiscing elit. 2 Lorem ipsum[^1] dolor sit amet, consectetur adipiscing elit.[^2] [ ^1 ]: Lorem ipsum dolor sit amet, consectetur adipiscing elit. [ ^2 ]: Lorem ipsum dolor sit amet, consectetur adipiscing elit.","title":"8. \u6ce8\u811a"},{"location":"blog/mkdocs/#9-\u683c\u5f0f\u5316\u5904\u7406","text":"# mkdocs.yml \u76f8\u5173\u914d\u7f6e markdown_extensions : - pymdownx.critic - pymdownx.caret - pymdownx.keys - pymdownx.mark - pymdownx.tilde \u5220\u9664\u7ebf\u3001\u4e0b\u5212\u7ebf\u3001\u6ce8\u91ca\u3001\u9ad8\u4eae Code Text can be deleted and replacement text added . This can also be combined into one a single operation. Highlighting is also possible and comments can be added inline . Formatting can also be applied to blocks by putting the opening and closing tags on separate lines and adding new lines between the tags and the content. H 2 0 A T A - H~2~0 - A^T^A","title":"9. \u683c\u5f0f\u5316\u5904\u7406"},{"location":"blog/mkdocs/#10-\u56fe\u6807","text":"# mkdocs.yml \u76f8\u5173\u914d\u7f6e markdown_extensions : - pymdownx.emoji : emoji_index : !!python/name:materialx.emoji.twemoji emoji_generator : !!python/name:materialx.emoji.to_svg Show Code :smile: :dart: \u652f\u6301\u4ee5\u4e0b\u56fe\u6807\uff1a \u2013 Material Design \u2013 FontAwesome \u2013 Octicons github markdown\uff1a https://github.com/zhangjw-THU/Emoji github commit\uff1a https://github.com/shafishcn/git-commit-emoji-cn","title":"10. \u56fe\u6807"},{"location":"blog/mkdocs/#11-\u56fe\u7247","text":"# mkdocs.yml \u76f8\u5173\u914d\u7f6e markdown_extensions : - attr_list - md_in_html markdown\u683c\u5f0f\u5c55\u793a\u56fe\u7247 \u6dfb\u52a0\u56fe\u7247\u8bf4\u660e \u61d2\u52a0\u8f7d\u56fe\u7247 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. ![ Image title ]( https://dummyimage.com/300x200/eee/aaa ){ align=left } Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa. Image \u8bf4\u660e < figure markdown > ![Image title](https://dummyimage.com/600x400/){ width=\"300\" } < figcaption > Image \u8bf4\u660e </ figcaption > </ figure > ![ Image title ]( https://dummyimage.com/600x400/ ){ loading=lazy }","title":"11. \u56fe\u7247"},{"location":"blog/mkdocs/#12-\u5217\u8868","text":"# mkdocs.yml \u76f8\u5173\u914d\u7f6e markdown_extensions : - def_list - pymdownx.tasklist : custom_checkbox : true \u65e0\u5e8f\u5217\u8868 \u6709\u5e8f\u5217\u8868 \u4f7f\u7528\u5b9a\u4e49\u5217\u8868 \u4efb\u52a1\u5217\u8868 Nulla et rhoncus turpis. Mauris ultricies elementum leo. Duis efficitur accumsan nibh eu mattis. Vivamus tempus velit eros, porttitor placerat nibh lacinia sed. Aenean in finibus diam. Duis mollis est eget nibh volutpat, fermentum aliquet dui mollis. Nam vulputate tincidunt fringilla. Nullam dignissim ultrices urna non auctor. - Nulla et rhoncus turpis. Mauris ultricies elementum leo. Duis efficitur accumsan nibh eu mattis. Vivamus tempus velit eros, porttitor placerat nibh lacinia sed. Aenean in finibus diam. * Duis mollis est eget nibh volutpat, fermentum aliquet dui mollis. * Nam vulputate tincidunt fringilla. * Nullam dignissim ultrices urna non auctor. Vivamus id mi enim. Integer id turpis sapien. Ut condimentum lobortis sagittis. Aliquam purus tellus, faucibus eget urna at, iaculis venenatis nulla. Vivamus a pharetra leo. Vivamus venenatis porttitor tortor sit amet rutrum. Pellentesque aliquet quam enim, eu volutpat urna rutrum a. Nam vehicula nunc mauris, a ultricies libero efficitur sed. Morbi eget dapibus felis. Vivamus venenatis porttitor tortor sit amet rutrum. Pellentesque aliquet quam enim, eu volutpat urna rutrum a. Mauris dictum mi lacus Ut sit amet placerat ante Suspendisse ac eros arcu 1. Vivamus id mi enim. Integer id turpis sapien. Ut condimentum lobortis sagittis. Aliquam purus tellus, faucibus eget urna at, iaculis venenatis nulla. Vivamus a pharetra leo. 1. Vivamus venenatis porttitor tortor sit amet rutrum. Pellentesque aliquet quam enim, eu volutpat urna rutrum a. Nam vehicula nunc mauris, a ultricies libero efficitur sed. 2. Morbi eget dapibus felis. Vivamus venenatis porttitor tortor sit amet rutrum. Pellentesque aliquet quam enim, eu volutpat urna rutrum a. 1. Mauris dictum mi lacus 2. Ut sit amet placerat ante 3. Suspendisse ac eros arcu Lorem ipsum dolor sit amet Sed sagittis eleifend rutrum. Donec vitae suscipit est. Nullam tempus tellus non sem sollicitudin, quis rutrum leo facilisis. Cras arcu libero Aliquam metus eros, pretium sed nulla venenatis, faucibus auctor ex. Proin ut eros sed sapien ullamcorper consequat. Nunc ligula ante. Duis mollis est eget nibh volutpat, fermentum aliquet dui mollis. Nam vulputate tincidunt fringilla. Nullam dignissim ultrices urna non auctor. `Lorem ipsum dolor sit amet` : Sed sagittis eleifend rutrum. Donec vitae suscipit est. Nullam tempus tellus non sem sollicitudin, quis rutrum leo facilisis. `Cras arcu libero` : Aliquam metus eros, pretium sed nulla venenatis, faucibus auctor ex. Proin ut eros sed sapien ullamcorper consequat. Nunc ligula ante. Duis mollis est eget nibh volutpat, fermentum aliquet dui mollis. Nam vulputate tincidunt fringilla. Nullam dignissim ultrices urna non auctor. Lorem ipsum dolor sit amet, consectetur adipiscing elit Vestibulum convallis sit amet nisi a tincidunt In hac habitasse platea dictumst In scelerisque nibh non dolor mollis congue sed et metus Praesent sed risus massa Aenean pretium efficitur erat, donec pharetra, ligula non scelerisque - [x] Lorem ipsum dolor sit amet, consectetur adipiscing elit - [ ] Vestibulum convallis sit amet nisi a tincidunt * [x] In hac habitasse platea dictumst * [x] In scelerisque nibh non dolor mollis congue sed et metus * [ ] Praesent sed risus massa - [ ] Aenean pretium efficitur erat, donec pharetra, ligula non scelerisque","title":"12. \u5217\u8868"},{"location":"blog/mkdocs/#13-mathjax","text":"\u7565","title":"13. MathJax"},{"location":"blog/mkdocs/#\u4e8cmkdocsyml\u8bb0\u5f55","text":"","title":"\u4e8c\u3001mkdocs.yml\u8bb0\u5f55"},{"location":"blog/mkdocs/#1-\u8c03\u6574\u989c\u8272","text":".md-typeset button[data-md-color-accent] > code { background-color: var(--md-code-bg-color); color: var(--md-accent-fg-color); } .md-typeset button[data-md-color-primary] > code { background-color: var(--md-code-bg-color); color: var(--md-primary-fg-color); } \u8c03\u6574\u4e3b\u9898\u989c\u8272 \u8c03\u6574\u4e3b\u8272\u8c03 \u8c03\u6574hovered\u3001buttons\u3001scrollbars\u989c\u8272 \u81ea\u5b9a\u4e49\u4e3b\u9898\u989c\u8272 # mkdocs.yml \u76f8\u5173\u914d\u7f6e theme : palette : scheme : default \u9ed8\u8ba4\u53ea\u6709\u4e24\u4e2a\u9009\u9879\u53ef\u9009\uff1adefault\uff08\u4eae\u4e3b\u9898\uff09\u3001slate\uff08\u6697\u4e3b\u9898\uff09 default slate var buttons = document.querySelectorAll(\"button[data-md-color-scheme]\") buttons.forEach(function(button) { button.addEventListener(\"click\", function() { var attr = this.getAttribute(\"data-md-color-scheme\") document.body.setAttribute(\"data-md-color-scheme\", attr) var name = document.querySelector(\"#__code_1 code span:nth-child(7)\") name.textContent = attr }) }) # mkdocs.yml \u76f8\u5173\u914d\u7f6e theme : palette : primary : indigo red pink purple deep purple indigo blue light blue cyan teal green light green lime yellow amber orange deep orange brown grey blue grey black white var buttons = document.querySelectorAll(\"button[data-md-color-primary]\") buttons.forEach(function(button) { button.addEventListener(\"click\", function() { var attr = this.getAttribute(\"data-md-color-primary\") document.body.setAttribute(\"data-md-color-primary\", attr) var name = document.querySelector(\"#__code_2 code span:nth-child(7)\") name.textContent = attr.replace(\"-\", \" \") }) }) # mkdocs.yml \u76f8\u5173\u914d\u7f6e theme : palette : accent : indigo red pink purple deep purple indigo blue light blue cyan teal green light green lime yellow amber orange deep orange var buttons = document.querySelectorAll(\"button[data-md-color-accent]\") buttons.forEach(function(button) { button.addEventListener(\"click\", function() { var attr = this.getAttribute(\"data-md-color-accent\") document.body.setAttribute(\"data-md-color-accent\", attr) var name = document.querySelector(\"#__code_3 code span:nth-child(7)\") name.textContent = attr.replace(\"-\", \" \") }) }) \u5b9a\u4e49\u4e00\u4e2a\u53ebshafish\u7684\u4e3b\u9898\u8272\u8c03 # mkdocs.yml \u76f8\u5173\u914d\u7f6e theme : palette : scheme : shafish extra_css : - stylesheets/extra.css # docs/stylesheets/extra.css [ data-md-color-scheme = \"shafish\" ] { --md-primary-fg-color : #252632 ; --md-primary-fg-color--light : #ECB7B7 ; --md-primary-fg-color--dark : #90030C ; }","title":"1. \u8c03\u6574\u989c\u8272"},{"location":"blog/mkdocs/#2-\u8c03\u6574\u5b57\u4f53","text":"\u652f\u6301\uff1a Google Font # mkdocs.yml \u76f8\u5173\u914d\u7f6e theme : font : text : Roboto # \u5e38\u89c4\u5b57\u4f53 code : Roboto Mono #\u4ee3\u7801\u5757\u5b57\u4f53","title":"2. \u8c03\u6574\u5b57\u4f53"},{"location":"blog/mkdocs/#3-logofavicon","text":"# mkdocs.yml \u76f8\u5173\u914d\u7f6e theme : logo : assets/logo.png # logo favicon : images/favicon.png # favicon","title":"3. logo\u3001favicon"},{"location":"blog/mkdocs/#4-\u5bfc\u822a\u680f","text":"# mkdocs.yml \u76f8\u5173\u914d\u7f6e theme : features : #- navigation.instant # \u70b9\u51fb\u5185\u90e8\u94fe\u63a5\u65f6\uff0c\u4e0d\u7528\u5168\u90e8\u5237\u65b0\u9875\u9762 - navigation.tracking # \u5728url\u4e2d\u4f7f\u7528\u6807\u9898\u5b9a\u4f4d\u951a\u70b9 - navigation.tabs # \u9876\u90e8\u663e\u793a\u5bfc\u822a\u9876\u5c42nav\uff08\u4e5f\u5c31\u662f\u7b2c\u4e00\u4e2a\u8282\u70b9\uff09 - navigation.tabs.sticky # \u6eda\u52a8\u662f\u9690\u85cf\u9876\u90e8nav\uff0c\u9700\u8981\u914d\u5408navigation.tabs\u4f7f\u7528 - navigation.sections # nav\u8282\u70b9\u7f29\u8fdb - navigation.expand # \u4e0d\u6298\u53e0\u5de6\u4fa7nav\u8282\u70b9 - navigation.indexes # \u6307\u5b9a\u8282\u70b9index pages \uff0c\u8ddfinstant\u4e0d\u517c\u5bb9 - toc.integrate # \u53f3\u4fa7\u751f\u4ea7\u76ee\u5f55 - navigation.top # \u4e00\u952e\u56de\u9876\u90e8","title":"4. \u5bfc\u822a\u680f"},{"location":"blog/mkdocs/#5-\u641c\u7d22","text":"ref\uff1a https://squidfunk.github.io/mkdocs-material/setup/setting-up-site-search/","title":"5. \u641c\u7d22"},{"location":"blog/mkdocs/#6-\u7f51\u7ad9\u8bbf\u95ee\u7edf\u8ba1","text":"\u8c37\u6b4c\u793a\u4f8b Google Analytics # mkdocs.yml \u76f8\u5173\u914d\u7f6e extra : analytics : provider : google property : G-XXXXXXXXXX","title":"6. \u7f51\u7ad9\u8bbf\u95ee\u7edf\u8ba1"},{"location":"blog/mkdocs/#7-metadata\u8bbe\u7f6e","text":"\u53ef\u4ee5\u8bbe\u7f6e\u7279\u5b9a\u7684key-value\u5230markdown\u6587\u6863\u4e2d\uff0cmkdocs\u518d\u8fdb\u884c\u5bf9\u5e94\u89e3\u6790 markdown_extensions : - meta \u9875\u9762\u6807\u9898 \u9875\u9762\u63cf\u8ff0 \u9690\u85cfnav\u3001toc \u9690\u85cf\u8bc4\u8bba --- title: Lorem ipsum dolor sit amet --- # Document title ... --- description: Nullam urna elit, malesuada eget finibus ut, ac tortor. --- # Document title ... --- hide: - navigation - toc --- # Document title \u8bf7\u5148\u770b\u7b2c10\u70b9\u8be6\u7ec6\u8bf4\u660e\u3002 --- vssue: \"\" --- # Document title ...","title":"7. metadata\u8bbe\u7f6e"},{"location":"blog/mkdocs/#8-\u9876\u90e8\u9690\u85cf\u53d1\u5e03\u901a\u77e5","text":"# mkdocs.yml \u76f8\u5173\u914d\u7f6e theme : features : - header.autohide custom_dir : overrides # \u81ea\u5b9a\u4e49\u4e3b\u9898\u8bbe\u7f6e\u3002overrides\u76ee\u5f55\u4e0edocs\u76ee\u5f55\u540c\u7ea7 <!-- overrides/main.html\u6587\u4ef6\u5185\u5bb9 --> {% extends \"base.html\" %} {% block announce %} <!-- Add announcement here, including arbitrary HTML --> \u901a\u77e5\uff1a\u5566\u5566\u5566\uff0cshafish\u7528\u65b0\u535a\u5ba2\u5566\uff01\uff01 {% endblock %}","title":"8. \u9876\u90e8\u9690\u85cf\u3001\u53d1\u5e03\u901a\u77e5"},{"location":"blog/mkdocs/#9-\u7f51\u7ad9\u5e95\u90e8\u8bbe\u7f6e","text":"\u58f0\u660e\u4fdd\u7559\u7248\u6743 \u53f3\u4e0b\u89d2\u52a0\u4e2a\u8054\u7cfb\u65b9\u5f0f # mkdocs.yml \u76f8\u5173\u914d\u7f6e copyright : Copyright &copy; 2017 - 2020 shafish.cn \u6216\u8005 \u5728main.html\u4e2d\u81ea\u5b9a\u4e49\uff1a {% extends \"base.html\" %} {% block copyright %} <!-- Add copyright here, including arbitrary HTML --> {% endblock %} # mkdocs.yml \u76f8\u5173\u914d\u7f6e extra : social : - icon : fontawesome/solid/paper-plane link : mailto:<shafish_cn@163.com> name : \u90ae\u7bb1\u5730\u5740","title":"9. \u7f51\u7ad9\u5e95\u90e8\u8bbe\u7f6e"},{"location":"blog/mkdocs/#10-\u8bc4\u8bba\u7cfb\u7edf-vssue","text":"ref: Vssue mkdocs-material 8.x\u5c06\u8bc4\u8bba\u6539\u4e3a\u4e86\u81ea\u5b9a\u4e49\uff0c\u9700\u8981\u5728 mkdocs.yml \u4e2d\u8bbe\u7f6ecustom_dir\u76ee\u5f55\uff0c\u91cd\u5199partials/content.html\u4e2d\u7684\u5185\u5bb9\u3002 overrides/partials/content.html mkdocs.yml <!-- Copyright (c) 2016-2021 Martin Donath <martin.donath@squidfunk.com> Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. --> <!-- Edit button --> {% if page.edit_url %} < a href = \"{{ page.edit_url }}\" title = \"{{ lang.t('edit.link.title') }}\" class = \"md-content__button md-icon\" > {% include \".icons/material/pencil.svg\" %} </ a > {% endif %} <!-- Hack: check whether the content contains a h1 headline. If it doesn't, the page title (or respectively site name) is used as the main headline. --> {% if not \"\\x3ch1\" in page.content %} < h1 > {{ page.title | d(config.site_name, true)}} </ h1 > {% endif %} <!-- Markdown content --> {{ page.content }} <!-- Source file information --> {% if page and page.meta and ( page.meta.git_revision_date_localized or page.meta.revision_date ) %} {% include \"partials/source-file.html\" %} {% endif %} <!-- Get setting from mkdocs.yml, but allow page-level overrides --> <!-- \u5728\u4e0d\u9700\u8981\u8bc4\u8bba\u7684\u9875\u9762\u8bbe\u7f6e `vssue: \"\" ` \u8fd9\u4e2ameta\u4fe1\u606f\uff08\u9700\u5728mkdocs.yml\u4e2d\u6dfb\u52a0meta \u8fd9\u4e2apythonmarkdown \u63d2\u4ef6\uff09\u5373\u53ef\u5173\u95ed\u8be5\u9875\u9762\u7684\u8bc4\u8bba\u529f\u80fd\uff0c\u6bd4\u5982\u5728about\u9875\u9762\u5173\u95ed\u8bc4\u8bba: --- vssue: \"\" --- # about --> {% set vssue = config.extra.vssue %} {% if page and page.meta and page.meta.vssue is string %} {% set vssue = page.meta.vssue %} {% endif %} <!-- Inject Disqus into current page --> {% if not page.is_homepage and vssue %} < div id = \"vssue\" ></ div > <!--<link rel=\"stylesheet\" href=\"https://unpkg.com/vssue/dist/vssue.min.css\"> OR: vue full build (runtime + compiler) --> < script src = \"https://unpkg.com/vue/dist/vue.min.js\" ></ script > <!-- Vssue Github build --> < script src = \"https://unpkg.com/vssue/dist/vssue.github.min.js\" ></ script > < script > new Vue ({ el : '#vssue' , data : { title : options => ` ${ options . prefix }${ document . title } ` , options : { owner : 'shafishcn' , repo : 'shafish_blog' , clientId : 'xxx' , clientSecret : 'xxx' , // only required for some of the platforms prefix : '[BlogComment]' , labels : [ ':sunny:' ], issueContent : ({ url }) => `\u8fd9\u4e2a Issue \u7531 Vssue \u81ea\u52a8\u521b\u5efa\uff0c\u7528\u6765\u5b58\u50a8\u8be5\u9875\u9762\u7684\u8bc4\u8bba\uff1a ${ url } ` }, }, template : `<vssue :title=\"title\" :options=\"options\"></vssue>` , }) </ script > {% endif %} theme : custom_dir : overrides extra : vssue : shafish # \u968f\u4fbf\u586b\u503c\uff0c\u4e3b\u8981\u662f\u8bbe\u7f6e{% set vssue = config.extra.vssue %}\u65f6\uff0cvssue\u521d\u59cb\u503c\u53ef\u7528","title":"10. \u8bc4\u8bba\u7cfb\u7edf-Vssue"},{"location":"blog/mkdocs/#11-blocks","text":"ref: https://squidfunk.github.io/mkdocs-material/customization/ \u4f7f\u7528\u65b9\u6cd5 mkdocs.yml \u8bbe\u7f6e\u6807\u9898-htmltitle \u901a\u77e5\u680f-announce <!-- overrides/main.html \uff0c \u5f04\u4e4b\u524d\u5148\u914d\u7f6e\u597dmkdocs.yml\u7684custom_dir--> {% extends \"base.html\" %} {% block blockName %} xxx {% endblock %} theme : custom_dir : overrides {% extends \"base.html\" %} {% block htmltitle %} xxx {% endblock %} {% extends \"base.html\" %} {% block announce %} xxx {% endblock %}","title":"11. blocks"},{"location":"blog/mkdocs/#\u4e09\u63d2\u4ef6","text":"https://facelessuser.github.io/pymdown-extensions/extensions","title":"\u4e09\u3001\u63d2\u4ef6"},{"location":"blog/mkdocs/#1-\u663e\u793a\u6587\u4ef6\u6700\u540e\u4fee\u6539\u65f6\u95f4","text":"$ pip install mkdocs-git-revision-date-localized-plugin # mkdocs.yml \u76f8\u5173\u914d\u7f6e plugins : - git-revision-date-localized : type : datetime fallback_to_build_date : true enable_creation_date : true","title":"1. \u663e\u793a\u6587\u4ef6\u6700\u540e\u4fee\u6539\u65f6\u95f4"},{"location":"blog/mkdocs/#\u56db\u90e8\u7f72","text":"Github action\u90e8\u7f72\u5230github page Jenkins\u90e8\u7f72\u5230\u670d\u52a1\u5668 Lorem ipsum dolor sit amet, consectetur adipiscing elit. \u21a9 Lorem ipsum dolor sit amet, consectetur adipiscing elit. \u21a9","title":"\u56db\u3001\u90e8\u7f72"},{"location":"blog/2021/","text":"2021\u5e74\u6587\u7ae0\u5bfc\u822a \ud83d\udc1f 12\u6708\u4efd \ud83d\udc1f archivebox\u4f7f\u7528\uff08\u66f4\u65b0\uff09 jenkins\u90e8\u7f72(\u672a\u5b8c) github action\u4f7f\u7528 nginx\u4f7f\u7528\u8bb0\u5f55","title":"2021\u5e74\u6587\u7ae0\u5bfc\u822a"},{"location":"blog/2021/#2021\u5e74\u6587\u7ae0\u5bfc\u822a","text":"","title":"2021\u5e74\u6587\u7ae0\u5bfc\u822a"},{"location":"blog/2021/#12\u6708\u4efd","text":"archivebox\u4f7f\u7528\uff08\u66f4\u65b0\uff09 jenkins\u90e8\u7f72(\u672a\u5b8c) github action\u4f7f\u7528 nginx\u4f7f\u7528\u8bb0\u5f55","title":"12\u6708\u4efd"},{"location":"blog/2021/12/archivebox/","text":"ArchiveBox\u4f7f\u7528 \ud83d\udc1f ref: https://nixintel.info/osint-tools/make-your-own-internet-archive-with-archive-box/ https://github.com/ArchiveBox/ArchiveBox/wiki/Docker \u5f53\u4f60\u9047\u89c1\u4ed6\uff0c\u611f\u609f\u4ed6\uff0c\u7ec6\u5fc3\u73cd\u85cf\u4ed6\uff0c\u7136\u540e\u6beb\u65e0\u7591\u95ee\u5730\uff0c\u6700\u7ec8\u4f1a\u9057\u5fd8\u4e86\u4ed6\uff0c\u6211\u8bf4\u7684\u662f\u4e66\u7b7e\uff0c\u6d4f\u89c8\u5668\u4e0a\u4fdd\u5b58\u7684\u90a3\u4e9b\u6210\u767d\u4e0a\u5343\u7684\u3001\u6742\u4e71\u7684\u4e66\u7b7e\u3002 \u6bcf\u6b21\u7ffb\u8d77\u90fd\u4e0d\u81ea\u89c9\u7684\u745f\u745f\u53d1\u6296\uff0c\u4e0d\u4ec5\u662f\u5fd8\u4e86\u62ff\u6765\u5e72\u5565\uff0c\u4e3b\u8981\u8fd8\u6709\u5f88\u591a\u7ecf\u8fc7\u5c81\u6708\u6d17\u793c\u540e\u5df2\u7ecfGG\u54a7\uff0c404\uff0c\u603b\u4f1a\u7ed9\u4f60\u610f\u5916\u7684\u60ca\u559c\uff0c\u4e3a\u5565\u662f\u60ca\u559c\uff0c\u56e0\u4e3a\u4f60\u6709\u4e86\u501f\u53e3\u5220\u6389\u5b83\u3002 \u5076\u7136\u5728\u7f51\u4e0a\u627e\u5230ArchiveBox\uff0c\u4e00\u4e2aOpen-source self-hosted web archiving\uff08\u81ea\u5efa\u7684\u5185\u5bb9\u5b58\u6863\uff1f\uff09\uff0c\u662f\u57fa\u4e8epython\u7684\u722c\u866b\u7cfb\u7edf\uff0c\u53ef\u4ee5\u628a\u94fe\u63a5\u5185\u5bb9\u5b8c\u6574\u5730\u4fdd\u5b58\u5230\u672c\u5730\uff08\u5305\u62ec\u6587\u7ae0\u6587\u5b57\u3001\u6837\u5f0f\uff0c\u751a\u81f3\u97f3\u89c6\u9891\uff09\uff0c\u8fd8\u63d0\u4f9b\u4e86\u5b58\u6863\u7684\u7ba1\u7406\u540e\u53f0\u3002\u5c31\u975e\u5e38\u94f6\u6027\u5316\uff0c\u5f88\u7b26\u5408\u5728\u4e0b\u8981\u6c42\u3002 \u90a3\u4e48\uff0c\u641e\u8d77\uff1a) \u4e00\u3001\u5b89\u88c5 \ud83d\udc1f \u63a8\u8350\u662f\u7528docker\u5b89\u88c5\uff0c\u56e0\u4e3a\u65b9\u4fbf\uff0c\u76f4\u63a5pip\u5b89\u88c5\u4e5f\u5f88\u597d\uff0c\u770b\u4e2a\u4eba\u4e60\u60ef\uff0c\u7ffb\u7ffb\u4e0a\u9762\u5b98\u65b9\u94fe\u63a5\uff0c\u8fd9\u91cc\u4e0d\u591a\u4ecb\u7ecd\u4e86\u3002 docker-compose.yml # Usage: # docker-compose run archivebox init --setup # docker-compose up # echo \"https://example.com\" | docker-compose run archivebox archivebox add # docker-compose run archivebox add --depth=1 https://example.com/some/feed.rss # docker-compose run archivebox config --set PUBLIC_INDEX=True # docker-compose run archivebox help # Documentation: # https://github.com/ArchiveBox/ArchiveBox/wiki/Docker#docker-compose version : '2.4' services : archivebox : # build: . # for developers working on archivebox image : ${DOCKER_IMAGE:-archivebox/archivebox:master} command : server --quick-init 0.0.0.0:8000 ports : - 8800:8000 environment : - ALLOWED_HOSTS=* # add any config options you want as env vars - MEDIA_MAX_SIZE=750m #- SAVE_WARC=False #- SAVE_PDF=False #- SAVE_SCREENSHOT=False #- SAVE_MEDIA=False - SAVE_ARCHIVE_DOT_ORG=False - TIMEOUT=1500 - SEARCH_BACKEND_ENGINE=sonic # uncomment these if you enable sonic below - SEARCH_BACKEND_HOST_NAME=sonic - SEARCH_BACKEND_PASSWORD=xxxxabc volumes : - ./data:/data # - ./archivebox:/app/archivebox # for developers working on archivebox # To run the Sonic full-text search backend, first download the config file to sonic.cfg # curl -O https://raw.githubusercontent.com/ArchiveBox/ArchiveBox/master/etc/sonic.cfg # after starting, backfill any existing Snapshots into the index: docker-compose run archivebox update --index-only sonic : image : valeriansaliou/sonic:v1.3.0 expose : - 1491 environment : - SEARCH_BACKEND_PASSWORD=xxxxabc volumes : - ./sonic.cfg:/etc/sonic.cfg:ro - ./data/sonic:/var/lib/sonic/store ### Optional Addons: tweak these examples as needed for your specific use case # Example: Run scheduled imports in a docker instead of using cron on the # host machine, add tasks and see more info with archivebox schedule --help # scheduler: # image: archivebox/archivebox:latest # command: schedule --foreground --every=day --depth=1 'https://getpocket.com/users/USERNAME/feed/all' # environment: # - USE_COLOR=True # - SHOW_PROGRESS=False # volumes: # - ./data:/data # Example: Put Nginx in front of the ArchiveBox server for SSL termination # nginx: # image: nginx:alpine # ports: # - 443:443 # - 80:80 # volumes: # - ./etc/nginx/nginx.conf:/etc/nginx/nginx.conf # - ./data:/var/www # Example: run all your ArchiveBox traffic through a WireGuard VPN tunnel # wireguard: # image: linuxserver/wireguard # network_mode: 'service:archivebox' # cap_add: # - NET_ADMIN # - SYS_MODULE # sysctls: # - net.ipv4.conf.all.rp_filter=2 # - net.ipv4.conf.all.src_valid_mark=1 # volumes: # - /lib/modules:/lib/modules # - ./wireguard.conf:/config/wg0.conf:ro # Example: Run PYWB in parallel and auto-import WARCs from ArchiveBox # pywb: # image: webrecorder/pywb:latest # entrypoint: /bin/sh 'wb-manager add default /archivebox/archive/*/warc/*.warc.gz; wayback --proxy;' # environment: # - INIT_COLLECTION=archivebox # ports: # - 8080:8080 # volumes: # ./data:/archivebox # ./data/wayback:/webarchive # \u8fd0\u884c docker-compose up -d \u6587\u4ef6\u8bbe\u7f6e\u4e86\u5bb9\u5668\u5bf9\u5916\u66b4\u9732\u672c\u57308800\u7aef\u53e3\uff0c\u53ef\u4ee5\u505a\u4e2anginx\u53cd\u4ee3\uff0c\u6216\u8005\u76f4\u63a5\u653e\u884c\u670d\u52a1\u56688800\u8bbf\u95ee\uff0c\u81ea\u5df1\u641e\u3002 \u6267\u884c\u8fc7\u7a0b\u4f1a\u63d0\u793a\u8f93\u5165\u7528\u6237\u540d\u3001\u90ae\u7bb1\u3001\u5bc6\u7801\u7684\uff0c\u8fd9\u4e2a\u5c31\u662f\u7ba1\u7406\u5458\u5e10\u53f7\uff0c\u767b\u5f55\u7ba1\u7406\u540e\u53f0\u7528\u7684\u3002 \u4e8c\u3001\u4fdd\u5b58\u5185\u5bb9 \ud83d\udc1f \u6bd4\u5982\u8bf4\u60f3\u4fdd\u5b58\u8fd9\u7bc7\uff1ahttp://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html Tip \u5982\u679c\u7f51\u7edc\u4e0d\u597d\uff0c\u51fa\u73b0timeout\uff0c\u5c31\u628adocker-compose\u91cc\u7684TIMEOUT\u503c\u5347\u9ad8\u70b9\u3002 \u6700\u540e\u53ef\u4ee5\u770b\u5230\u4e0b\u8f7d\u5230\u672c\u5730\u7684\u5185\u5bb9\u80fd\u5c55\u793a\u591a\u79cd\u7c7b\u578b\uff0chtml\u3001pdf\u3001\u539f\u751f\u7b49\u7b49\uff0c\u76f4\u63a5\u7528singlefile\u4e5f\u5c31\u662f\u7b2c\u4e00\u4e2a\u5c31\u597d\u3002\u6216\u8005\u5728Archive method\u4e2d\u9009\u524d\u56db\u4e2a\u5c31\u884c(\u63a8\u8350\u4f7f\u7528) \u4e09\u3001\u914d\u7f6e \ud83d\udc1f https://github.com/ArchiveBox/ArchiveBox/wiki/Configuration","title":"archivebox\u4f7f\u7528"},{"location":"blog/2021/12/archivebox/#archivebox\u4f7f\u7528","text":"ref: https://nixintel.info/osint-tools/make-your-own-internet-archive-with-archive-box/ https://github.com/ArchiveBox/ArchiveBox/wiki/Docker \u5f53\u4f60\u9047\u89c1\u4ed6\uff0c\u611f\u609f\u4ed6\uff0c\u7ec6\u5fc3\u73cd\u85cf\u4ed6\uff0c\u7136\u540e\u6beb\u65e0\u7591\u95ee\u5730\uff0c\u6700\u7ec8\u4f1a\u9057\u5fd8\u4e86\u4ed6\uff0c\u6211\u8bf4\u7684\u662f\u4e66\u7b7e\uff0c\u6d4f\u89c8\u5668\u4e0a\u4fdd\u5b58\u7684\u90a3\u4e9b\u6210\u767d\u4e0a\u5343\u7684\u3001\u6742\u4e71\u7684\u4e66\u7b7e\u3002 \u6bcf\u6b21\u7ffb\u8d77\u90fd\u4e0d\u81ea\u89c9\u7684\u745f\u745f\u53d1\u6296\uff0c\u4e0d\u4ec5\u662f\u5fd8\u4e86\u62ff\u6765\u5e72\u5565\uff0c\u4e3b\u8981\u8fd8\u6709\u5f88\u591a\u7ecf\u8fc7\u5c81\u6708\u6d17\u793c\u540e\u5df2\u7ecfGG\u54a7\uff0c404\uff0c\u603b\u4f1a\u7ed9\u4f60\u610f\u5916\u7684\u60ca\u559c\uff0c\u4e3a\u5565\u662f\u60ca\u559c\uff0c\u56e0\u4e3a\u4f60\u6709\u4e86\u501f\u53e3\u5220\u6389\u5b83\u3002 \u5076\u7136\u5728\u7f51\u4e0a\u627e\u5230ArchiveBox\uff0c\u4e00\u4e2aOpen-source self-hosted web archiving\uff08\u81ea\u5efa\u7684\u5185\u5bb9\u5b58\u6863\uff1f\uff09\uff0c\u662f\u57fa\u4e8epython\u7684\u722c\u866b\u7cfb\u7edf\uff0c\u53ef\u4ee5\u628a\u94fe\u63a5\u5185\u5bb9\u5b8c\u6574\u5730\u4fdd\u5b58\u5230\u672c\u5730\uff08\u5305\u62ec\u6587\u7ae0\u6587\u5b57\u3001\u6837\u5f0f\uff0c\u751a\u81f3\u97f3\u89c6\u9891\uff09\uff0c\u8fd8\u63d0\u4f9b\u4e86\u5b58\u6863\u7684\u7ba1\u7406\u540e\u53f0\u3002\u5c31\u975e\u5e38\u94f6\u6027\u5316\uff0c\u5f88\u7b26\u5408\u5728\u4e0b\u8981\u6c42\u3002 \u90a3\u4e48\uff0c\u641e\u8d77\uff1a)","title":"ArchiveBox\u4f7f\u7528"},{"location":"blog/2021/12/archivebox/#\u4e00\u5b89\u88c5","text":"\u63a8\u8350\u662f\u7528docker\u5b89\u88c5\uff0c\u56e0\u4e3a\u65b9\u4fbf\uff0c\u76f4\u63a5pip\u5b89\u88c5\u4e5f\u5f88\u597d\uff0c\u770b\u4e2a\u4eba\u4e60\u60ef\uff0c\u7ffb\u7ffb\u4e0a\u9762\u5b98\u65b9\u94fe\u63a5\uff0c\u8fd9\u91cc\u4e0d\u591a\u4ecb\u7ecd\u4e86\u3002 docker-compose.yml # Usage: # docker-compose run archivebox init --setup # docker-compose up # echo \"https://example.com\" | docker-compose run archivebox archivebox add # docker-compose run archivebox add --depth=1 https://example.com/some/feed.rss # docker-compose run archivebox config --set PUBLIC_INDEX=True # docker-compose run archivebox help # Documentation: # https://github.com/ArchiveBox/ArchiveBox/wiki/Docker#docker-compose version : '2.4' services : archivebox : # build: . # for developers working on archivebox image : ${DOCKER_IMAGE:-archivebox/archivebox:master} command : server --quick-init 0.0.0.0:8000 ports : - 8800:8000 environment : - ALLOWED_HOSTS=* # add any config options you want as env vars - MEDIA_MAX_SIZE=750m #- SAVE_WARC=False #- SAVE_PDF=False #- SAVE_SCREENSHOT=False #- SAVE_MEDIA=False - SAVE_ARCHIVE_DOT_ORG=False - TIMEOUT=1500 - SEARCH_BACKEND_ENGINE=sonic # uncomment these if you enable sonic below - SEARCH_BACKEND_HOST_NAME=sonic - SEARCH_BACKEND_PASSWORD=xxxxabc volumes : - ./data:/data # - ./archivebox:/app/archivebox # for developers working on archivebox # To run the Sonic full-text search backend, first download the config file to sonic.cfg # curl -O https://raw.githubusercontent.com/ArchiveBox/ArchiveBox/master/etc/sonic.cfg # after starting, backfill any existing Snapshots into the index: docker-compose run archivebox update --index-only sonic : image : valeriansaliou/sonic:v1.3.0 expose : - 1491 environment : - SEARCH_BACKEND_PASSWORD=xxxxabc volumes : - ./sonic.cfg:/etc/sonic.cfg:ro - ./data/sonic:/var/lib/sonic/store ### Optional Addons: tweak these examples as needed for your specific use case # Example: Run scheduled imports in a docker instead of using cron on the # host machine, add tasks and see more info with archivebox schedule --help # scheduler: # image: archivebox/archivebox:latest # command: schedule --foreground --every=day --depth=1 'https://getpocket.com/users/USERNAME/feed/all' # environment: # - USE_COLOR=True # - SHOW_PROGRESS=False # volumes: # - ./data:/data # Example: Put Nginx in front of the ArchiveBox server for SSL termination # nginx: # image: nginx:alpine # ports: # - 443:443 # - 80:80 # volumes: # - ./etc/nginx/nginx.conf:/etc/nginx/nginx.conf # - ./data:/var/www # Example: run all your ArchiveBox traffic through a WireGuard VPN tunnel # wireguard: # image: linuxserver/wireguard # network_mode: 'service:archivebox' # cap_add: # - NET_ADMIN # - SYS_MODULE # sysctls: # - net.ipv4.conf.all.rp_filter=2 # - net.ipv4.conf.all.src_valid_mark=1 # volumes: # - /lib/modules:/lib/modules # - ./wireguard.conf:/config/wg0.conf:ro # Example: Run PYWB in parallel and auto-import WARCs from ArchiveBox # pywb: # image: webrecorder/pywb:latest # entrypoint: /bin/sh 'wb-manager add default /archivebox/archive/*/warc/*.warc.gz; wayback --proxy;' # environment: # - INIT_COLLECTION=archivebox # ports: # - 8080:8080 # volumes: # ./data:/archivebox # ./data/wayback:/webarchive # \u8fd0\u884c docker-compose up -d \u6587\u4ef6\u8bbe\u7f6e\u4e86\u5bb9\u5668\u5bf9\u5916\u66b4\u9732\u672c\u57308800\u7aef\u53e3\uff0c\u53ef\u4ee5\u505a\u4e2anginx\u53cd\u4ee3\uff0c\u6216\u8005\u76f4\u63a5\u653e\u884c\u670d\u52a1\u56688800\u8bbf\u95ee\uff0c\u81ea\u5df1\u641e\u3002 \u6267\u884c\u8fc7\u7a0b\u4f1a\u63d0\u793a\u8f93\u5165\u7528\u6237\u540d\u3001\u90ae\u7bb1\u3001\u5bc6\u7801\u7684\uff0c\u8fd9\u4e2a\u5c31\u662f\u7ba1\u7406\u5458\u5e10\u53f7\uff0c\u767b\u5f55\u7ba1\u7406\u540e\u53f0\u7528\u7684\u3002","title":"\u4e00\u3001\u5b89\u88c5"},{"location":"blog/2021/12/archivebox/#\u4e8c\u4fdd\u5b58\u5185\u5bb9","text":"\u6bd4\u5982\u8bf4\u60f3\u4fdd\u5b58\u8fd9\u7bc7\uff1ahttp://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html Tip \u5982\u679c\u7f51\u7edc\u4e0d\u597d\uff0c\u51fa\u73b0timeout\uff0c\u5c31\u628adocker-compose\u91cc\u7684TIMEOUT\u503c\u5347\u9ad8\u70b9\u3002 \u6700\u540e\u53ef\u4ee5\u770b\u5230\u4e0b\u8f7d\u5230\u672c\u5730\u7684\u5185\u5bb9\u80fd\u5c55\u793a\u591a\u79cd\u7c7b\u578b\uff0chtml\u3001pdf\u3001\u539f\u751f\u7b49\u7b49\uff0c\u76f4\u63a5\u7528singlefile\u4e5f\u5c31\u662f\u7b2c\u4e00\u4e2a\u5c31\u597d\u3002\u6216\u8005\u5728Archive method\u4e2d\u9009\u524d\u56db\u4e2a\u5c31\u884c(\u63a8\u8350\u4f7f\u7528)","title":"\u4e8c\u3001\u4fdd\u5b58\u5185\u5bb9"},{"location":"blog/2021/12/archivebox/#\u4e09\u914d\u7f6e","text":"https://github.com/ArchiveBox/ArchiveBox/wiki/Configuration","title":"\u4e09\u3001\u914d\u7f6e"},{"location":"blog/2021/12/github_action/","text":"Github Action \ud83d\udc1f ref: GitHub Actions \u5165\u95e8\u6559\u7a0b-\u962e\u4e00\u5cf0 GitHub Actions\u5b98\u65b9\u6587\u6863 Github Actions\u8bed\u6cd5 \u7528\u6cd5\u548c\u6982\u5ff5\u57fa\u672c\u90fd\u662f\u53c2\u8003 \u962e\u4e00\u5cf0 \u7684\u90a3\u7bc7\u6587\u7ae0\uff0c\u6240\u4ee5\u5728\u8fd9\u91cc\u7eaf\u7cb9\u662f\u8bb0\u5f55\u4e0b\u4f7f\u7528\u3002 \u4e00\u3001\u6982\u5ff5\u4ecb\u7ecd \ud83d\udc1f workflow \ud83d\udc1f \u5de5\u4f5c\u6d41\u3002\u6301\u7eed\u96c6\u6210\u4e00\u6b21\u8fd0\u884c\u7684\u8fc7\u7a0b\uff0c\u5c31\u662f\u4e00\u4e2a workflow\u3002 job \ud83d\udc1f \u4efb\u52a1\u3002\u4e00\u4e2a workflow \u7531\u4e00\u4e2a\u6216\u591a\u4e2a jobs \u6784\u6210\uff0c\u542b\u4e49\u662f\u4e00\u6b21\u6301\u7eed\u96c6\u6210\u7684\u8fd0\u884c\uff0c\u53ef\u4ee5\u5b8c\u6210\u591a\u4e2a\u4efb\u52a1\u3002 step \ud83d\udc1f \u6b65\u9aa4\u3002\u6bcf\u4e2a job \u7531\u591a\u4e2a step \u6784\u6210\uff0c\u4e00\u6b65\u6b65\u5b8c\u6210\u3002 action \ud83d\udc1f \u52a8\u4f5c\u3002\u6bcf\u4e2a step \u53ef\u4ee5\u4f9d\u6b21\u6267\u884c\u4e00\u4e2a\u6216\u591a\u4e2a\u547d\u4ee4\uff08action\uff09\u3002 \u90e8\u7f72\u9879\u76ee\u8fc7\u7a0b\u4e2d\u7684\u670d\u52a1\u5668\u767b\u5f55\u3001\u8fd0\u884c\u73af\u5883\u7684\u90e8\u7f72\u3001\u4ee3\u7801\u62c9\u53d6\u3001\u8fd0\u884c\u90e8\u7f72\u811a\u672c\u7b49\u64cd\u4f5c\uff0c\u5728github action\u4e2d\u90fd\u88ab\u770b\u4f5c\u4e3a\u662f\u4e00\u4e2a\u4e2a\u7684action\u3002 \u5176\u4e2d\u7684\u5927\u90e8\u5206action\u90fd\u662f\u53ef\u4ee5\u88ab\u590d\u7528\u7684\uff1a\u6bd4\u5982\u73af\u5883\u90e8\u7f72\uff0c\u57fa\u672c\u5c31\u53ea\u6709\u8f6f\u4ef6\u5bf9\u5e94\u7cfb\u7edf\u548c\u7248\u672c\u7684\u533a\u522b\u3002 \u6240\u4ee5Github Action\u4e2d\u4f7f\u7528\u5230\u7684action\u662f\u53ef\u4ee5\u76f4\u63a5\u5f15\u7528\u4ed6\u4eba\u5199\u597d\u7684 action\u6ef4\uff0c\u53ef\u4ee5\u5728\u4e0b\u9762\u5217\u51fa\u7684\u4ed3\u5e93\u4e2d\u627e\u627e\uff1a Github\u5b98\u65b9\u5e02\u573a Awesome actions \u4e8c\u3001Workflow\u5b9a\u4e49 \ud83d\udc1f \u5728\u4ee3\u7801\u4ed3\u5e93\u7684.github/workflows\u76ee\u5f55\u4e0b\u5b9a\u4e49\u5de5\u4f5c\u6d41\u6587\u4ef6\uff0c\u6587\u4ef6\u540e\u7f00\u540d\u7edf\u4e00\u4e3a yml \uff0cGithub\u4f1a\u6839\u636e\u89e6\u53d1\u6761\u4ef6\u8fd0\u884c\u8fd9\u4e9b\u5de5\u4f5c\u6d41\u6587\u4ef6\u3002 \u57fa\u672c\u914d\u7f6e\u5b57\u6bb5 \ud83d\udc1f name \uff1a\u6307\u5b9aworkflow \u7684\u540d\u79f0\u3002 on.<push|pull_request>.<tags|branches> \uff1a\u89e6\u53d1\u6240\u5728\u5de5\u4f5c\u6d41\u6267\u884c\u7684\u6761\u4ef6\uff0c\u6bd4\u5982 \u67d0\u4e2a\u5206\u652f\u53d1\u751fpush/pull\u65f6\u3002 # masterf\u5206\u652f\u53d1\u751fpush\u65f6\u89e6\u53d1\u5de5\u4f5c\u6d41\u6267\u884c on : push : branches : - master jobs.<job_id>.name \uff1a\u9700\u8981\u6267\u884c\u7684\u4e00\u9879\u6216\u591a\u9879\u4efb\u52a1\u3002 # job_id \u5bf9\u5e94\u7279\u5b9a\u7684\u4efb\u52a1\uff0cmy_first_job\u3001my_second_job # name \u662f\u4efb\u52a1\u7684\u8bf4\u660e jobs : my_first_job : name : My first job my_second_job : name : My second job jobs.<job_id>.needs \uff1a\u6307\u5b9a\u5f53\u524d\u4efb\u52a1\u7684\u8fd0\u884c\u987a\u5e8f\u3002 # job1\u5fc5\u987b\u5148\u4e8ejob2\u5b8c\u6210\uff0c\u800cjob3\u7b49\u5f85job1\u548cjob2\u7684\u5b8c\u6210\u624d\u80fd\u8fd0\u884c\u3002\u56e0\u6b64\uff0c\u8fd9\u4e2a workflow \u7684\u8fd0\u884c\u987a\u5e8f\u4f9d\u6b21\u4e3a\uff1ajob1\u3001job2\u3001job3 jobs : job1 : job2 : needs : job1 job3 : needs : [ job1 , job2 ] jobs.<job_id>.runs-on \uff1a\u6307\u5b9a\u8fd0\u884c\u6240\u9700\u8981\u7684\u865a\u62df\u673a\u73af\u5883\u3002 # \u53ef\u9009\u7684\u73af\u5883\u5982\u4e0b\uff1a ubuntu-latest\uff0cubuntu-18.04\u6216ubuntu-16.04 windows-latest\uff0cwindows-2019\u6216windows-2016 macOS-latest\u6216macOS-10.14 jobs.<job_id>.steps \uff1a\u6307\u5b9a\u6bcf\u4e2a Job \u7684\u8fd0\u884c\u6b65\u9aa4\uff0c\u53ef\u4ee5\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u6b65\u9aa4\uff0c\u6b65\u9aa4\u5305\u542bname\u3001env\u3001run\u4e09\u4e2a\u5b57\u6bb5\u3002 \u5b8c\u6574\u7684\u5de5\u4f5c\u6d41\u5b9a\u4e49\uff1a name : Greeting from Mona on : push jobs : my-job : name : My Job runs-on : ubuntu-latest steps : # \u5b9a\u4e49\u4e86\u4e2a echo\u53d8\u91cf\u503c \u7684job - name : Print a greeting env : MY_VAR : Hi there! My name is FIRST_NAME : Mona MIDDLE_NAME : The LAST_NAME : Octocat run : | echo $MY_VAR $FIRST_NAME $MIDDLE_NAME $LAST_NAME. \u4e09\u3001\u793a\u4f8b \ud83d\udc1f 1. ci.yml\u719f\u6089 \ud83d\udc1f # .github/workflows/ci.yml name : GitHub Actions Build and Deploy Demo on : push : branches : - master jobs : build-and-deploy : runs-on : ubuntu-latest steps : - name : Checkout uses : actions/checkout@master # \u83b7\u53d6\u6e90\u7801 - name : Build and Deploy uses : JamesIves/github-pages-deploy-action@master # \u6784\u5efa\u548c\u90e8\u7f72 env : ACCESS_TOKEN : ${{ secrets.ACCESS_TOKEN }} BRANCH : gh-pages FOLDER : build BUILD_SCRIPT : npm install && npm run build name : Build app and deploy to aliyun on : #\u76d1\u542cpush\u64cd\u4f5c push : branches : # master\u5206\u652f\uff0c\u4f60\u4e5f\u53ef\u4ee5\u6539\u6210\u5176\u4ed6\u5206\u652f - master jobs : build : runs-on : ubuntu-latest steps : - uses : actions/checkout@v1 - name : Install Node.js uses : actions/setup-node@v1 with : node-version : '12.16.2' - name : Install npm dependencies run : npm install - name : Run build task run : npm run build - name : Deploy to Server uses : easingthemes/ssh-deploy@v2.1.5 env : SSH_PRIVATE_KEY : ${{ secrets.SERVER_SSH_KEY }} ARGS : '-rltgoDzvO --delete' SOURCE : dist # \u8fd9\u662f\u8981\u590d\u5236\u5230\u963f\u91cc\u4e91\u9759\u6001\u670d\u52a1\u5668\u7684\u6587\u4ef6\u5939\u540d\u79f0 REMOTE_HOST : '118.190.217.8' # \u4f60\u7684\u963f\u91cc\u4e91\u516c\u7f51\u5730\u5740 REMOTE_USER : root # \u963f\u91cc\u4e91\u767b\u5f55\u540e\u9ed8\u8ba4\u4e3a root \u7528\u6237\uff0c\u5e76\u4e14\u6240\u5728\u6587\u4ef6\u5939\u4e3a root TARGET : /root/node-server # \u6253\u5305\u540e\u7684 dist \u6587\u4ef6\u5939\u5c06\u653e\u5728 /root/node-server 2. \u628amkdocs\u90e8\u7f72\u5230github page \ud83d\udc1f # \u521d\u59cb\u5316\u4e00\u4e2amkdocs-metereal\u9879\u76ee mkdir -p /home/shafish/Project/blog/shafish.cn && cd $_ mkdocs init . # \u6dfb\u52a0mkdocs.yml\u7684theme\u4e3amaterial vim mkdocs.yml # \u521b\u5efagithub workflow mkdir -p .github/workflows touch .github/workflows/ci.yml # \u63d0\u4ea4\u5230github\u4ed3\u5e93 # \u73b0\u5728github\u7f51\u7ad9\u4e0a\u521b\u5efa\u4e2a\u4ed3\u5e93 git remote add origin git@github.com:\u7528\u6237\u540d/\u4ed3\u5e93\u540d.git git branch -M main git push -u origin main # ok\uff0c\u8bbf\u95eehttps://\u7528\u6237\u540d.github.io/ \u5373\u53ef # \u5982\u679c\u51fa\u73b0\u95ee\u9898\uff0c\u5728Github\u7f51\u7ad9\u4ed3\u5e93\u4e2d\u7684Actions\u9009\u9879\u67e5\u770b\u6267\u884clogs\u3002 mkdocs.yml theme : name : material ci.yml name : blog_ci on : push : branches : - master - main jobs : deploy : runs-on : ubuntu-latest steps : - name : Checkout master uses : actions/checkout@v2 - name : Set up Python3.x uses : actions/setup-python@v2 with : python-version : 3.x - name : Install dependencies run : pip install mkdocs-material - name : Deploy run : mkdocs gh-deploy --force \u56db\u3001\u628amkdocs\u90e8\u7f72\u5230\u4e91\u670d\u52a1\u5668 \ud83d\udc1f 1. \u65b0\u5efa\u90e8\u7f72\u7528\u6237 \ud83d\udc1f \u63d0\u4f9b\u7ed9Github action\u6267\u884cssh\u3001rsync\u7b49\u547d\u4ee4\u3002 # -s\u4e3a\u7528\u6237\u767b\u5f55\u8bbe\u7f6eshell # -d -m \u4e3a\u7528\u6237\u521b\u5efa\u4e3b\u7528\u6237\u76ee\u5f55 # -G \u628arsync\u6dfb\u52a0\u5230www\u7ec4\u4e2d\uff0c\u65b9\u4fbf\u540e\u7eed\u64cd\u4f5cwww\u7528\u6237\u8d44\u6e90 # -c \u7528\u6237\u8bf4\u660e sudo useradd -s /bin/bash \u2013d /home/rsync -m -G www -c for_github_action_remote_deployment rsync # \u8bbe\u7f6ersync\u7528\u6237\u5bc6\u7801 sudo passwd rsync # \u4fee\u6539\u7ad9\u70b9\u76ee\u5f55\u7ec4\u6743\u9650 sudo chmod -R 775 /www/wwwroot/shafish.cn 2. \u914d\u7f6e\u7528\u6237ssh\u4fe1\u606f \ud83d\udc1f # \u767b\u5f55rsync\u7528\u6237 su - rsync # \u521b\u5efa.ssh\u76ee\u5f55\uff0c\u4fdd\u5b58\u516c\u79c1\u94a5\u7b49\u4fe1\u606f mkdir -p ~/.ssh && cd ~/.ssh # \u751f\u6210\u5bc6\u94a5\u4fe1\u606f\uff0cshafishcn\u4e3a\u6587\u4ef6\u540d\uff0c\u81ea\u884c\u586b\u5199 # \u4e00\u8def\u56de\u8f66\uff0c\u6700\u7ec8\u751f\u6210shafishcn\uff08\u79c1\u94a5\uff09\u548cshafishcn.pub\uff08\u516c\u94a5\uff09 ssh-keygen -t rsa -f shafishcn # \u914d\u7f6e\u8fde\u63a5\u4fe1\u606f cat shafishcn.pub >> authorized_keys # \u590d\u5236\u79c1\u94a5\uff0cgithub action ssh\u767b\u5f55\u5230\u670d\u52a1\u5668\u65f6\u7528\u5230 cat shafishcn 3. \u914d\u7f6eGithub action\u73af\u5883\u53d8\u91cf \ud83d\udc1f \u6253\u5f00\u4ed3\u5e93 --> Settings --> Secrets\uff08\u4fa7\u8fb9\u680f\u4e2d\uff09-->Actions\uff08\u4e3aSecrets\u5b50\u9879\uff09-->New repository secret Name\uff1a\u73af\u5883\u53d8\u91cf\u540d\u79f0 Value\uff1a\u53d8\u91cf\u503c \u53d8\u91cf \u53d8\u91cf\u503c SERVER_HOST \u670d\u52a1\u5668ip SERVER_KEY \u7b2c2\u6b65\u4e2d\u7684shafishcn\u79c1\u94a5\u5185\u5bb9 SERVER_PORT ssh\u7aef\u53e3\uff0c\u9ed8\u8ba422 SERVER_USERNAME rsync 4. \u90e8\u7f72\u6587\u4ef6 \ud83d\udc1f name : Built and pushed to the server on : push : branches : - master # \u63d0\u4ea4\u5230master\u5206\u652f\u65f6\u89e6\u53d1\u6267\u884c - main # \u63d0\u4ea4\u5230main\u5206\u652f\u65f6\u89e6\u53d1\u6267\u884c env : TZ : Asia/Shanghai # \u8bbe\u7f6e\u5f53\u524d\u73af\u5883\u65f6\u533a jobs : deploy : runs-on : ubuntu-latest # github action\u63d0\u4f9b\u7684\u5bb9\u5668\u73af\u5883 steps : - name : Checkout master # \u62c9\u4ed3\u5e93\u4ee3\u7801\u5230\u5bb9\u5668\u4e2d\uff08\u4ee5\u4e0b\u7684\u6240\u6709\u64cd\u4f5c\u90fd\u4ee5\u4ed3\u5e93\u6240\u5728\u76ee\u5f55\u4e3a\u6839\u76ee\u5f55\uff09 uses : actions/checkout@v2 - name : Set up Python3.x # \u5bb9\u5668\u5b89\u88c5python3\u73af\u5883 uses : actions/setup-python@v2 with : python-version : 3.x - name : Install dependencies # \u5bb9\u5668\u5b89\u88c5mkdocs material\u548c\u7528\u5230\u7684\u63d2\u4ef6 run : pip install mkdocs-material mkdocs-git-revision-date-localized-plugin - name : Build # \u5728\u5bb9\u5668\u4e2d\u6267\u884cmkdocs \u6784\u5efa\u547d\u4ee4\uff0c\u6784\u5efa\u6210\u529f\u751f\u6210html\u6587\u4ef6\u4f1a\u4fdd\u5b58\u5728site\u6587\u4ef6\u5939\u4e2d\uff0c\u6267\u884ctar\u5c06\u5176\u538b\u7f29\u4e3asite.tar.gz run : | mkdocs build tar -zcvf ./site.tar.gz ./site - name : upload build file to my host # \u8bfb\u53d6\u7b2c3\u6b65\u914d\u7f6e\u7684\u4fe1\u606f\uff0c\u8c03\u7528rsync\u547d\u4ee4\u5c06site.tar.gz\u63a8\u9001\u5230SERVER_HOST\u670d\u52a1\u5668\u7684rsync\u5bb6\u76ee\u5f55 uses : AEnterprise/rsync-deploy@v1.0 env : DEPLOY_KEY : ${{ secrets.SERVER_KEY }} ARGS : -avz --delete --exclude='.user.ini' SERVER_PORT : ${{ secrets.SERVER_PORT }} FOLDER : ./site.tar.gz SERVER_IP : ${{ secrets.SERVER_HOST }} USERNAME : ${{ secrets.SERVER_USERNAME }} SERVER_DESTINATION : /home/rsync - name : execute script # ssh\u767b\u5f55SERVER_HOST\u670d\u52a1\u5668\uff0c\u5c06site.tar.gz\u89e3\u538b\u5230\u7f51\u7ad9\u6839\u76ee\u5f55 uses : appleboy/ssh-action@master with : host : ${{ secrets.SERVER_HOST }} username : ${{ secrets.SERVER_USERNAME }} key : ${{ secrets.SERVER_KEY }} script : | cd /www/wwwroot/shafish.cn/ && rm -rf ./* tar -zxvf /home/rsync/site.tar.gz -C ./ && mv site/* ./ 5. \u63d0\u4ea4\u6539\u52a8\u8fdb\u884c\u6d4b\u8bd5 \ud83d\udc1f \u7565 \u9879\u76ee\u5de5\u4f5c\u6d41\u6587\u4ef6 https://github.com/shafishcn/shafish_blog/tree/main/.github/workflows ci.yml\u4e3agithub page\u90e8\u7f72\uff1ahttps://shafishcn.github.io/shafish_blog/ server_ci.yml\u662f\u5728\u4e0b\u7684\u670d\u52a1\u5668\uff1ahttps://shafish.cn/","title":"github action\u4f7f\u7528"},{"location":"blog/2021/12/github_action/#github-action","text":"ref: GitHub Actions \u5165\u95e8\u6559\u7a0b-\u962e\u4e00\u5cf0 GitHub Actions\u5b98\u65b9\u6587\u6863 Github Actions\u8bed\u6cd5 \u7528\u6cd5\u548c\u6982\u5ff5\u57fa\u672c\u90fd\u662f\u53c2\u8003 \u962e\u4e00\u5cf0 \u7684\u90a3\u7bc7\u6587\u7ae0\uff0c\u6240\u4ee5\u5728\u8fd9\u91cc\u7eaf\u7cb9\u662f\u8bb0\u5f55\u4e0b\u4f7f\u7528\u3002","title":"Github Action"},{"location":"blog/2021/12/github_action/#\u4e00\u6982\u5ff5\u4ecb\u7ecd","text":"","title":"\u4e00\u3001\u6982\u5ff5\u4ecb\u7ecd"},{"location":"blog/2021/12/github_action/#workflow","text":"\u5de5\u4f5c\u6d41\u3002\u6301\u7eed\u96c6\u6210\u4e00\u6b21\u8fd0\u884c\u7684\u8fc7\u7a0b\uff0c\u5c31\u662f\u4e00\u4e2a workflow\u3002","title":"workflow"},{"location":"blog/2021/12/github_action/#job","text":"\u4efb\u52a1\u3002\u4e00\u4e2a workflow \u7531\u4e00\u4e2a\u6216\u591a\u4e2a jobs \u6784\u6210\uff0c\u542b\u4e49\u662f\u4e00\u6b21\u6301\u7eed\u96c6\u6210\u7684\u8fd0\u884c\uff0c\u53ef\u4ee5\u5b8c\u6210\u591a\u4e2a\u4efb\u52a1\u3002","title":"job"},{"location":"blog/2021/12/github_action/#step","text":"\u6b65\u9aa4\u3002\u6bcf\u4e2a job \u7531\u591a\u4e2a step \u6784\u6210\uff0c\u4e00\u6b65\u6b65\u5b8c\u6210\u3002","title":"step"},{"location":"blog/2021/12/github_action/#action","text":"\u52a8\u4f5c\u3002\u6bcf\u4e2a step \u53ef\u4ee5\u4f9d\u6b21\u6267\u884c\u4e00\u4e2a\u6216\u591a\u4e2a\u547d\u4ee4\uff08action\uff09\u3002 \u90e8\u7f72\u9879\u76ee\u8fc7\u7a0b\u4e2d\u7684\u670d\u52a1\u5668\u767b\u5f55\u3001\u8fd0\u884c\u73af\u5883\u7684\u90e8\u7f72\u3001\u4ee3\u7801\u62c9\u53d6\u3001\u8fd0\u884c\u90e8\u7f72\u811a\u672c\u7b49\u64cd\u4f5c\uff0c\u5728github action\u4e2d\u90fd\u88ab\u770b\u4f5c\u4e3a\u662f\u4e00\u4e2a\u4e2a\u7684action\u3002 \u5176\u4e2d\u7684\u5927\u90e8\u5206action\u90fd\u662f\u53ef\u4ee5\u88ab\u590d\u7528\u7684\uff1a\u6bd4\u5982\u73af\u5883\u90e8\u7f72\uff0c\u57fa\u672c\u5c31\u53ea\u6709\u8f6f\u4ef6\u5bf9\u5e94\u7cfb\u7edf\u548c\u7248\u672c\u7684\u533a\u522b\u3002 \u6240\u4ee5Github Action\u4e2d\u4f7f\u7528\u5230\u7684action\u662f\u53ef\u4ee5\u76f4\u63a5\u5f15\u7528\u4ed6\u4eba\u5199\u597d\u7684 action\u6ef4\uff0c\u53ef\u4ee5\u5728\u4e0b\u9762\u5217\u51fa\u7684\u4ed3\u5e93\u4e2d\u627e\u627e\uff1a Github\u5b98\u65b9\u5e02\u573a Awesome actions","title":"action"},{"location":"blog/2021/12/github_action/#\u4e8cworkflow\u5b9a\u4e49","text":"\u5728\u4ee3\u7801\u4ed3\u5e93\u7684.github/workflows\u76ee\u5f55\u4e0b\u5b9a\u4e49\u5de5\u4f5c\u6d41\u6587\u4ef6\uff0c\u6587\u4ef6\u540e\u7f00\u540d\u7edf\u4e00\u4e3a yml \uff0cGithub\u4f1a\u6839\u636e\u89e6\u53d1\u6761\u4ef6\u8fd0\u884c\u8fd9\u4e9b\u5de5\u4f5c\u6d41\u6587\u4ef6\u3002","title":"\u4e8c\u3001Workflow\u5b9a\u4e49"},{"location":"blog/2021/12/github_action/#\u57fa\u672c\u914d\u7f6e\u5b57\u6bb5","text":"name \uff1a\u6307\u5b9aworkflow \u7684\u540d\u79f0\u3002 on.<push|pull_request>.<tags|branches> \uff1a\u89e6\u53d1\u6240\u5728\u5de5\u4f5c\u6d41\u6267\u884c\u7684\u6761\u4ef6\uff0c\u6bd4\u5982 \u67d0\u4e2a\u5206\u652f\u53d1\u751fpush/pull\u65f6\u3002 # masterf\u5206\u652f\u53d1\u751fpush\u65f6\u89e6\u53d1\u5de5\u4f5c\u6d41\u6267\u884c on : push : branches : - master jobs.<job_id>.name \uff1a\u9700\u8981\u6267\u884c\u7684\u4e00\u9879\u6216\u591a\u9879\u4efb\u52a1\u3002 # job_id \u5bf9\u5e94\u7279\u5b9a\u7684\u4efb\u52a1\uff0cmy_first_job\u3001my_second_job # name \u662f\u4efb\u52a1\u7684\u8bf4\u660e jobs : my_first_job : name : My first job my_second_job : name : My second job jobs.<job_id>.needs \uff1a\u6307\u5b9a\u5f53\u524d\u4efb\u52a1\u7684\u8fd0\u884c\u987a\u5e8f\u3002 # job1\u5fc5\u987b\u5148\u4e8ejob2\u5b8c\u6210\uff0c\u800cjob3\u7b49\u5f85job1\u548cjob2\u7684\u5b8c\u6210\u624d\u80fd\u8fd0\u884c\u3002\u56e0\u6b64\uff0c\u8fd9\u4e2a workflow \u7684\u8fd0\u884c\u987a\u5e8f\u4f9d\u6b21\u4e3a\uff1ajob1\u3001job2\u3001job3 jobs : job1 : job2 : needs : job1 job3 : needs : [ job1 , job2 ] jobs.<job_id>.runs-on \uff1a\u6307\u5b9a\u8fd0\u884c\u6240\u9700\u8981\u7684\u865a\u62df\u673a\u73af\u5883\u3002 # \u53ef\u9009\u7684\u73af\u5883\u5982\u4e0b\uff1a ubuntu-latest\uff0cubuntu-18.04\u6216ubuntu-16.04 windows-latest\uff0cwindows-2019\u6216windows-2016 macOS-latest\u6216macOS-10.14 jobs.<job_id>.steps \uff1a\u6307\u5b9a\u6bcf\u4e2a Job \u7684\u8fd0\u884c\u6b65\u9aa4\uff0c\u53ef\u4ee5\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u6b65\u9aa4\uff0c\u6b65\u9aa4\u5305\u542bname\u3001env\u3001run\u4e09\u4e2a\u5b57\u6bb5\u3002 \u5b8c\u6574\u7684\u5de5\u4f5c\u6d41\u5b9a\u4e49\uff1a name : Greeting from Mona on : push jobs : my-job : name : My Job runs-on : ubuntu-latest steps : # \u5b9a\u4e49\u4e86\u4e2a echo\u53d8\u91cf\u503c \u7684job - name : Print a greeting env : MY_VAR : Hi there! My name is FIRST_NAME : Mona MIDDLE_NAME : The LAST_NAME : Octocat run : | echo $MY_VAR $FIRST_NAME $MIDDLE_NAME $LAST_NAME.","title":"\u57fa\u672c\u914d\u7f6e\u5b57\u6bb5"},{"location":"blog/2021/12/github_action/#\u4e09\u793a\u4f8b","text":"","title":"\u4e09\u3001\u793a\u4f8b"},{"location":"blog/2021/12/github_action/#1-ciyml\u719f\u6089","text":"# .github/workflows/ci.yml name : GitHub Actions Build and Deploy Demo on : push : branches : - master jobs : build-and-deploy : runs-on : ubuntu-latest steps : - name : Checkout uses : actions/checkout@master # \u83b7\u53d6\u6e90\u7801 - name : Build and Deploy uses : JamesIves/github-pages-deploy-action@master # \u6784\u5efa\u548c\u90e8\u7f72 env : ACCESS_TOKEN : ${{ secrets.ACCESS_TOKEN }} BRANCH : gh-pages FOLDER : build BUILD_SCRIPT : npm install && npm run build name : Build app and deploy to aliyun on : #\u76d1\u542cpush\u64cd\u4f5c push : branches : # master\u5206\u652f\uff0c\u4f60\u4e5f\u53ef\u4ee5\u6539\u6210\u5176\u4ed6\u5206\u652f - master jobs : build : runs-on : ubuntu-latest steps : - uses : actions/checkout@v1 - name : Install Node.js uses : actions/setup-node@v1 with : node-version : '12.16.2' - name : Install npm dependencies run : npm install - name : Run build task run : npm run build - name : Deploy to Server uses : easingthemes/ssh-deploy@v2.1.5 env : SSH_PRIVATE_KEY : ${{ secrets.SERVER_SSH_KEY }} ARGS : '-rltgoDzvO --delete' SOURCE : dist # \u8fd9\u662f\u8981\u590d\u5236\u5230\u963f\u91cc\u4e91\u9759\u6001\u670d\u52a1\u5668\u7684\u6587\u4ef6\u5939\u540d\u79f0 REMOTE_HOST : '118.190.217.8' # \u4f60\u7684\u963f\u91cc\u4e91\u516c\u7f51\u5730\u5740 REMOTE_USER : root # \u963f\u91cc\u4e91\u767b\u5f55\u540e\u9ed8\u8ba4\u4e3a root \u7528\u6237\uff0c\u5e76\u4e14\u6240\u5728\u6587\u4ef6\u5939\u4e3a root TARGET : /root/node-server # \u6253\u5305\u540e\u7684 dist \u6587\u4ef6\u5939\u5c06\u653e\u5728 /root/node-server","title":"1. ci.yml\u719f\u6089"},{"location":"blog/2021/12/github_action/#2-\u628amkdocs\u90e8\u7f72\u5230github-page","text":"# \u521d\u59cb\u5316\u4e00\u4e2amkdocs-metereal\u9879\u76ee mkdir -p /home/shafish/Project/blog/shafish.cn && cd $_ mkdocs init . # \u6dfb\u52a0mkdocs.yml\u7684theme\u4e3amaterial vim mkdocs.yml # \u521b\u5efagithub workflow mkdir -p .github/workflows touch .github/workflows/ci.yml # \u63d0\u4ea4\u5230github\u4ed3\u5e93 # \u73b0\u5728github\u7f51\u7ad9\u4e0a\u521b\u5efa\u4e2a\u4ed3\u5e93 git remote add origin git@github.com:\u7528\u6237\u540d/\u4ed3\u5e93\u540d.git git branch -M main git push -u origin main # ok\uff0c\u8bbf\u95eehttps://\u7528\u6237\u540d.github.io/ \u5373\u53ef # \u5982\u679c\u51fa\u73b0\u95ee\u9898\uff0c\u5728Github\u7f51\u7ad9\u4ed3\u5e93\u4e2d\u7684Actions\u9009\u9879\u67e5\u770b\u6267\u884clogs\u3002 mkdocs.yml theme : name : material ci.yml name : blog_ci on : push : branches : - master - main jobs : deploy : runs-on : ubuntu-latest steps : - name : Checkout master uses : actions/checkout@v2 - name : Set up Python3.x uses : actions/setup-python@v2 with : python-version : 3.x - name : Install dependencies run : pip install mkdocs-material - name : Deploy run : mkdocs gh-deploy --force","title":"2. \u628amkdocs\u90e8\u7f72\u5230github page"},{"location":"blog/2021/12/github_action/#\u56db\u628amkdocs\u90e8\u7f72\u5230\u4e91\u670d\u52a1\u5668","text":"","title":"\u56db\u3001\u628amkdocs\u90e8\u7f72\u5230\u4e91\u670d\u52a1\u5668"},{"location":"blog/2021/12/github_action/#1-\u65b0\u5efa\u90e8\u7f72\u7528\u6237","text":"\u63d0\u4f9b\u7ed9Github action\u6267\u884cssh\u3001rsync\u7b49\u547d\u4ee4\u3002 # -s\u4e3a\u7528\u6237\u767b\u5f55\u8bbe\u7f6eshell # -d -m \u4e3a\u7528\u6237\u521b\u5efa\u4e3b\u7528\u6237\u76ee\u5f55 # -G \u628arsync\u6dfb\u52a0\u5230www\u7ec4\u4e2d\uff0c\u65b9\u4fbf\u540e\u7eed\u64cd\u4f5cwww\u7528\u6237\u8d44\u6e90 # -c \u7528\u6237\u8bf4\u660e sudo useradd -s /bin/bash \u2013d /home/rsync -m -G www -c for_github_action_remote_deployment rsync # \u8bbe\u7f6ersync\u7528\u6237\u5bc6\u7801 sudo passwd rsync # \u4fee\u6539\u7ad9\u70b9\u76ee\u5f55\u7ec4\u6743\u9650 sudo chmod -R 775 /www/wwwroot/shafish.cn","title":"1. \u65b0\u5efa\u90e8\u7f72\u7528\u6237"},{"location":"blog/2021/12/github_action/#2-\u914d\u7f6e\u7528\u6237ssh\u4fe1\u606f","text":"# \u767b\u5f55rsync\u7528\u6237 su - rsync # \u521b\u5efa.ssh\u76ee\u5f55\uff0c\u4fdd\u5b58\u516c\u79c1\u94a5\u7b49\u4fe1\u606f mkdir -p ~/.ssh && cd ~/.ssh # \u751f\u6210\u5bc6\u94a5\u4fe1\u606f\uff0cshafishcn\u4e3a\u6587\u4ef6\u540d\uff0c\u81ea\u884c\u586b\u5199 # \u4e00\u8def\u56de\u8f66\uff0c\u6700\u7ec8\u751f\u6210shafishcn\uff08\u79c1\u94a5\uff09\u548cshafishcn.pub\uff08\u516c\u94a5\uff09 ssh-keygen -t rsa -f shafishcn # \u914d\u7f6e\u8fde\u63a5\u4fe1\u606f cat shafishcn.pub >> authorized_keys # \u590d\u5236\u79c1\u94a5\uff0cgithub action ssh\u767b\u5f55\u5230\u670d\u52a1\u5668\u65f6\u7528\u5230 cat shafishcn","title":"2. \u914d\u7f6e\u7528\u6237ssh\u4fe1\u606f"},{"location":"blog/2021/12/github_action/#3-\u914d\u7f6egithub-action\u73af\u5883\u53d8\u91cf","text":"\u6253\u5f00\u4ed3\u5e93 --> Settings --> Secrets\uff08\u4fa7\u8fb9\u680f\u4e2d\uff09-->Actions\uff08\u4e3aSecrets\u5b50\u9879\uff09-->New repository secret Name\uff1a\u73af\u5883\u53d8\u91cf\u540d\u79f0 Value\uff1a\u53d8\u91cf\u503c \u53d8\u91cf \u53d8\u91cf\u503c SERVER_HOST \u670d\u52a1\u5668ip SERVER_KEY \u7b2c2\u6b65\u4e2d\u7684shafishcn\u79c1\u94a5\u5185\u5bb9 SERVER_PORT ssh\u7aef\u53e3\uff0c\u9ed8\u8ba422 SERVER_USERNAME rsync","title":"3. \u914d\u7f6eGithub action\u73af\u5883\u53d8\u91cf"},{"location":"blog/2021/12/github_action/#4-\u90e8\u7f72\u6587\u4ef6","text":"name : Built and pushed to the server on : push : branches : - master # \u63d0\u4ea4\u5230master\u5206\u652f\u65f6\u89e6\u53d1\u6267\u884c - main # \u63d0\u4ea4\u5230main\u5206\u652f\u65f6\u89e6\u53d1\u6267\u884c env : TZ : Asia/Shanghai # \u8bbe\u7f6e\u5f53\u524d\u73af\u5883\u65f6\u533a jobs : deploy : runs-on : ubuntu-latest # github action\u63d0\u4f9b\u7684\u5bb9\u5668\u73af\u5883 steps : - name : Checkout master # \u62c9\u4ed3\u5e93\u4ee3\u7801\u5230\u5bb9\u5668\u4e2d\uff08\u4ee5\u4e0b\u7684\u6240\u6709\u64cd\u4f5c\u90fd\u4ee5\u4ed3\u5e93\u6240\u5728\u76ee\u5f55\u4e3a\u6839\u76ee\u5f55\uff09 uses : actions/checkout@v2 - name : Set up Python3.x # \u5bb9\u5668\u5b89\u88c5python3\u73af\u5883 uses : actions/setup-python@v2 with : python-version : 3.x - name : Install dependencies # \u5bb9\u5668\u5b89\u88c5mkdocs material\u548c\u7528\u5230\u7684\u63d2\u4ef6 run : pip install mkdocs-material mkdocs-git-revision-date-localized-plugin - name : Build # \u5728\u5bb9\u5668\u4e2d\u6267\u884cmkdocs \u6784\u5efa\u547d\u4ee4\uff0c\u6784\u5efa\u6210\u529f\u751f\u6210html\u6587\u4ef6\u4f1a\u4fdd\u5b58\u5728site\u6587\u4ef6\u5939\u4e2d\uff0c\u6267\u884ctar\u5c06\u5176\u538b\u7f29\u4e3asite.tar.gz run : | mkdocs build tar -zcvf ./site.tar.gz ./site - name : upload build file to my host # \u8bfb\u53d6\u7b2c3\u6b65\u914d\u7f6e\u7684\u4fe1\u606f\uff0c\u8c03\u7528rsync\u547d\u4ee4\u5c06site.tar.gz\u63a8\u9001\u5230SERVER_HOST\u670d\u52a1\u5668\u7684rsync\u5bb6\u76ee\u5f55 uses : AEnterprise/rsync-deploy@v1.0 env : DEPLOY_KEY : ${{ secrets.SERVER_KEY }} ARGS : -avz --delete --exclude='.user.ini' SERVER_PORT : ${{ secrets.SERVER_PORT }} FOLDER : ./site.tar.gz SERVER_IP : ${{ secrets.SERVER_HOST }} USERNAME : ${{ secrets.SERVER_USERNAME }} SERVER_DESTINATION : /home/rsync - name : execute script # ssh\u767b\u5f55SERVER_HOST\u670d\u52a1\u5668\uff0c\u5c06site.tar.gz\u89e3\u538b\u5230\u7f51\u7ad9\u6839\u76ee\u5f55 uses : appleboy/ssh-action@master with : host : ${{ secrets.SERVER_HOST }} username : ${{ secrets.SERVER_USERNAME }} key : ${{ secrets.SERVER_KEY }} script : | cd /www/wwwroot/shafish.cn/ && rm -rf ./* tar -zxvf /home/rsync/site.tar.gz -C ./ && mv site/* ./","title":"4. \u90e8\u7f72\u6587\u4ef6"},{"location":"blog/2021/12/github_action/#5-\u63d0\u4ea4\u6539\u52a8\u8fdb\u884c\u6d4b\u8bd5","text":"\u7565 \u9879\u76ee\u5de5\u4f5c\u6d41\u6587\u4ef6 https://github.com/shafishcn/shafish_blog/tree/main/.github/workflows ci.yml\u4e3agithub page\u90e8\u7f72\uff1ahttps://shafishcn.github.io/shafish_blog/ server_ci.yml\u662f\u5728\u4e0b\u7684\u670d\u52a1\u5668\uff1ahttps://shafish.cn/","title":"5. \u63d0\u4ea4\u6539\u52a8\u8fdb\u884c\u6d4b\u8bd5"},{"location":"blog/2021/12/jenkins/","text":"Jenkins\u90e8\u7f72 \ud83d\udc1f jenkin\u5b89\u88c5 \ud83d\udc1f curl -fsSL https://pkg.jenkins.io/debian-stable/jenkins.io.key | sudo tee /usr/share/keyrings/jenkins-keyring.asc > /dev/null echo deb [ signed-by = /usr/share/keyrings/jenkins-keyring.asc ] https://pkg.jenkins.io/debian-stable binary/ | sudo tee /etc/apt/sources.list.d/jenkins.list > /dev/null sudo apt-get update sudo apt-get install jenkins Setup Jenkins as a daemon launched on start. See /etc/init.d/jenkins for more details. Create a \u2018jenkins\u2019 user to run this service. jenkins\u8fd0\u884clogs\uff1a /var/log/jenkins/jenkins.log jenkins\u914d\u7f6e\u6587\u4ef6\uff1a /etc/default/jenkins","title":"jenkins\u90e8\u7f72"},{"location":"blog/2021/12/jenkins/#jenkins\u90e8\u7f72","text":"","title":"Jenkins\u90e8\u7f72"},{"location":"blog/2021/12/jenkins/#jenkin\u5b89\u88c5","text":"curl -fsSL https://pkg.jenkins.io/debian-stable/jenkins.io.key | sudo tee /usr/share/keyrings/jenkins-keyring.asc > /dev/null echo deb [ signed-by = /usr/share/keyrings/jenkins-keyring.asc ] https://pkg.jenkins.io/debian-stable binary/ | sudo tee /etc/apt/sources.list.d/jenkins.list > /dev/null sudo apt-get update sudo apt-get install jenkins Setup Jenkins as a daemon launched on start. See /etc/init.d/jenkins for more details. Create a \u2018jenkins\u2019 user to run this service. jenkins\u8fd0\u884clogs\uff1a /var/log/jenkins/jenkins.log jenkins\u914d\u7f6e\u6587\u4ef6\uff1a /etc/default/jenkins","title":"jenkin\u5b89\u88c5"},{"location":"blog/2021/12/nginx_record/","text":"nginx\u4f7f\u7528\u8bb0\u5f55 \ud83d\udc1f Abstract \u4ec5\u505a\u7b14\u8bb0\uff0c\u4e3a\u4e86\u6709\u4e2a\u5c0f\u5c0f\u5370\u8c61\u3002 \u4e00\u3001\u5b89\u88c5\u4f9d\u8d56\u5e93 \ud83d\udc1f sudo pacman -S wget gcc-c++ ncurses ncurses-devel cmake make perl bison openssl openssl-devel \\ gcc* libxml2 libxml2-devel curl-devel libjpeg* libpng* freetype* autoconf automake zlib* fiex* \\ libxml* libmcrypt* libtool-ltdl-devel* libaio libaio-devel bzr libtool \u4e8c\u3001configure\u914d\u7f6e \ud83d\udc1f \u4f7f\u7528 configure \u6307\u5b9a\u914d\u7f6e\u9879\uff0c\u53ef\u4ee5\u7528 ./configure --help \u67e5\u770b\uff0c\u5bf9\u5e94\u53c2\u6570\u5206\u4e3a\u56db\u5927\u7c7b\uff1a 1.\u8def\u5f84\u76f8\u5173\u53c2\u6570\uff1a \ud83d\udc1f --prefix=path \uff1a\u5b89\u88c5\u7684\u6839\u76ee\u5f55\uff0c\u7f3a\u7701\u9ed8\u8ba4\u76ee\u5f55\u4e3a\uff1a /usr/local/nginx \uff0c\u8be5\u76ee\u5f55\u6307\u4e0b\u9762\u51fa\u73b0\u5230\u7684 \uff0cbulingbuling\u3002 --sbin-path=path \uff1anginx\u76f8\u5173\u4e8c\u8fdb\u5236\u6587\u4ef6\u8def\u5f84\uff0c <prefix>/sbin/nginx --conf-path=path \uff1anginx\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff0c <prefix>/conf/nginx.conf --error-log-path=PATH \uff1aerror\u65e5\u5fd7\u6587\u4ef6\u8def\u5f84\uff0c <prefix>/logs/error.log --pid-path=PATH \uff1apid\u6587\u4ef6\u7684\u5b58\u653e\u8def\u5f84\uff0c\u6587\u4ef6\u4ee5ascii\u7801\u5b58\u653enginx master\u8fdb\u7a0bid\uff0cmaster\u4e4b\u540e\u4f1a\u8bb2\u5230\uff08\u975e\u5e38\u91cd\u8981\uff09\uff0c <prefix>/logs/nginx.pid --lock-path=PATH \uff1alock\u6587\u4ef6\u7684\u5b58\u653e\u8def\u5f84\uff0c <prefix>/logs/nginx.lock --builddir=DIR \uff1aconfigura\u547d\u4ee4\u6267\u884c\u548c\u7a0b\u5e8f\u7f16\u8bd1\u65f6\u4ea7\u751f\u4e34\u65f6\u6587\u4ef6\u7684\u5b58\u653e\u76ee\u5f55\uff0c <prefix>/objs --with-perl_modules_path=PATH \uff1aperl module\u5b58\u653e\u8def\u5f84 --with-perl=PATH \uff1aperl binary\u5b58\u653e\u8def\u5f84\uff0c\u6267\u884cperl\u811a\u672c\u9700\u8981\u6b64\u8bbe\u7f6e --http-log-path=PATH \uff1aaccess\u65e5\u5fd7\u5b58\u653e\u8def\u5f84\uff0c\u4f1a\u8bb0\u5f55\u6bcf\u4e2ahttp\u8bf7\u6c42\u7684\u8bbf\u95ee\u8bb0\u5f55\uff0c <prefix>/logs/access.log --http-client-body-temp-path=PATH \uff1a\u4fdd\u5b58http\u8bf7\u6c42\u5305\u4f53\u7b49\u4e34\u65f6\u5185\u5bb9\uff0c <prefix>/client_body_temp --http-proxy-temp-path=PATH \uff1a\u505a\u53cd\u5411\u4ee3\u7406\u65f6\uff0c\u4e0a\u6e38\u670d\u52a1\u5668\u7684http\u8bf7\u6c42\u5305\u4f53\uff0c <prefix>/proxy_temp --http-fastcgi-temp-path=PATH \uff1afastcgi\u4e34\u65f6\u6587\u4ef6\u5b58\u653e\u76ee\u5f55\uff0c <prefix>/fastcgi_temp --http-uwsgi-temp-path=PATH \uff1auwsgi\u4e34\u65f6\u6587\u4ef6\u5b58\u653e\u76ee\u5f55\uff0c <prefix>/uwsgi_temp --http-scgi-temp-path=PATH \uff1ascgi\u4e34\u65f6\u6587\u4ef6\u5b58\u653e\u76ee\u5f55\uff0c <prefix>/scgi_temp 2.\u7f16\u8bd1\u76f8\u5173\u53c2\u6570\uff1a \ud83d\udc1f --with-cc=PATH \uff1ac\u7f16\u8bd1\u5668\u7684\u8def\u5f84 --with-cpp=PATH \uff1ac\u9884\u7f16\u8bd1\u5668\u7684\u8def\u5f84 --with-cc-opt=OPTIONS \uff1a\u5728nginx\u7f16\u8bd1\u65f6\u6307\u5b9a\u4e00\u4e9b\u7f16\u8bd1\u9009\u9879 --with-ld-opt=OPTIONS \uff1a\u52a0\u5165\u751f\u6210\u4e8c\u8fdb\u5236\u6267\u884c\u6587\u4ef6\u524d\u7684\u4e00\u4e9b\u6307\u5b9a\u7684\u94fe\u63a5\u6587\u4ef6 --with-cpu-opt=CPU \uff1a\u6307\u5b9acpu\u5904\u7406\u5668\u67b6\u6784\uff0cpentium, pentiumpro, pentium3, pentium4, athlon, opteron, amd64, sparc32, sparc64, ppc64 3.\u76f8\u5173\uff08\u5e38\u7528\uff09\u8f6f\u4ef6\u5e93\u914d\u7f6e\u53c2\u6570\uff1a \ud83d\udc1f pcre\u5e93 --without-pcre \uff1a\u8bbe\u7f6e\u914d\u7f6e\u6587\u4ef6\u4e2d\u4e0d\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f --with-pcre \uff1a\u5f3a\u5236\u4f7f\u7528pcre\u5e93 --with-pcre=DIR \uff1a\u6307\u5b9apcre\u5e93\u7684\u6e90\u7801\u76ee\u5f55\uff0c\u7f16\u8bd1nginx\u65f6\u8fdb\u5165\u8be5\u76ee\u5f55\u7f16\u8bd1pcre --with-pcre-opt=OPTIONS \uff1a\u7f16\u8bd1pcre\u65f6\u6307\u5b9a\u7f16\u8bd1\u9009\u9879 openssl\u5e93 --with-openssl=DIR \uff1a\u6307\u5b9aopenssl\u5e93\u7684\u6e90\u7801\u76ee\u5f55\uff0c\u7f16\u8bd1nginx\u65f6\u8fdb\u5165\u8be5\u76ee\u5f55\u7f16\u8bd1openssl\u3002\u5982\u9700\u8981https\u652f\u6301\uff0c\u9700\u8981\u5b89\u88c5\u8be5\u5e93 --with-openssl-opt=OPTIONS \uff1a\u7f16\u8bd1openssl\u65f6\u6307\u5b9a\u7f16\u8bd1\u9009\u9879 atomic\u539f\u5b50\u5e93 --with-libatomic \uff1a\u5f3a\u5236\u4f7f\u7528atomic\u5e93 --with-libatomic=DIR \uff1aatomic\u5e93\u6240\u5728\u4f4d\u7f6e \u6563\u5217\u51fd\u6570\u5e93 --with-MD5=DIR \uff1a\u6307\u5b9amd5\u5e93\u6e90\u7801\u76ee\u5f55\uff0c\u7f16\u8bd1nginx\u65f6\u8fdb\u5165\u8be5\u76ee\u5f55\u7f16\u8bd1md5\u3002\uff08\u6ca1\u7279\u6b8a\u9700\u6c42\uff0c\u53ef\u7528nginx\u81ea\u5e26\u7684md5\u7b97\u6cd5\uff09 --with-MD5-opt=OPTIONS \uff1a\u7f16\u8bd1md5\u65f6\u6307\u5b9a\u7f16\u8bd1\u9009\u9879 --with-MD5-asm \uff1a\u4f7f\u7528md5\u7684\u6c47\u7f16\u6e90\u7801 --with-SHA1=DIR \uff1a\u6307\u5b9aSHA1\u5e93\u6e90\u7801\u76ee\u5f55\uff0c\u7f16\u8bd1nginx\u65f6\u8fdb\u5165\u8be5\u76ee\u5f55\u7f16\u8bd1SHA1\u3002\uff08openssl\u6709sha1\u7684\u5b9e\u73b0\uff0c\u5df2\u7ecf\u5b89\u88c5openssl\u76f4\u63a5\u7528\uff09 --with-SHA1-opt=OPTIONS \uff1a\u7f16\u8bd1SHA1\u65f6\u6307\u5b9a\u7f16\u8bd1\u9009\u9879 --with-SHA1-asm \uff1a\u4f7f\u7528SHA1\u7684\u6c47\u7f16\u6e90\u7801 zlib\u5e93 --with-zlib=DIR \uff1a\u6307\u5b9azlib\u5e93\u6e90\u7801\u76ee\u5f55\uff0c\u7f16\u8bd1nginx\u65f6\u8fdb\u5165\u8be5\u76ee\u5f55\u7f16\u8bd1zlib\u3002\uff08\u9700\u8981gzip\u538b\u7f29\uff0c\u5c31\u9700\u8be5\u5e93\u652f\u6301\uff09 --with-zlib-opt=OPTIONS \uff1a\u7f16\u8bd1zlib\u65f6\u6307\u5b9a\u7f16\u8bd1\u9009\u9879 --with-zlib-asm=CPU \uff1a\u6307\u5b9a\u5bf9\u7279\u5b9acpu\u804c\u4e1azlib\u6c47\u7f16\u4f18\u5316\u529f\u80fd\uff0cpentium, pentiumpro\u3002 \u3002\u3002\u3002 4.\u6a21\u5757\u76f8\u5173\u53c2\u6570\uff1a\u53c8\u5206\u4e3a\u4e94\u5927\u6a21\u5757 \ud83d\udc1f \u4e8b\u4ef6\u6a21\u5757\uff08\u5177\u4f53\u4e8b\u4ef6\u9a71\u52a8\u7279\u70b9\uff0c\u53e6\u8bf4\uff09 --with-rtsig_module \uff1a\u4f7f\u7528rtsig module\u5904\u7406\u4e8b\u4ef6\u9a71\u52a8 --with-select_module \uff1a\u4f7f\u7528select \u591a\u8def\u590d\u7528module\u5904\u7406\u4e8b\u4ef6\u6e20\u9053 --without-select_module \uff1a\u4e0d\u5b89\u88c5select module --with-poll_module \uff1a\u4f7f\u7528poll module\u5904\u7406\u4e8b\u4ef6\u9a71\u52a8 --without-poll_module \uff1a\u4e0d\u5b89\u88c5poll module --with-aio_module \uff1a\u4f7f\u7528aio\u5904\u7406\u4e8b\u4ef6\u9a71\u52a8\uff0c\u53ea\u80fd\u518dfreebsd\u7cfb\u7edf\u4e2d\u4f7f\u7528 \u9ed8\u8ba4\u5b89\u88c5\u8fdbhttp\u6a21\u5757\uff08nginx\u5b89\u88c5\u65f6\u9ed8\u8ba4\u5b89\u88c5\u7684http\u76f8\u5173\u529f\u80fd\uff0c\u5982\u679c\u4e0d\u9700\u8981\u5c31\u7528 --without-http-xxx \u53bb\u9664\uff09 --without-http_chatset_module \uff1a\u4e0d\u5b89\u88c5http chatset\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u5c06\u670d\u52a1\u5668\u53d1\u51fa\u7684http\u54cd\u5e94\u91cd\u7f16\u7801 --without-http_gzip_module \uff1a\u4e0d\u5b89\u88c5gzip\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u5bf9\u54cd\u5e94\u5185\u5bb9\u8fdb\u884c\u538b\u7f29 --without-http_ssi_module \uff1a\u4e0d\u5b89\u88c5ssi\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u5728\u54cd\u5e94\u4e2d\u52a0\u5165\u7279\u5b9a\u5185\u5bb9 --without-http_userid_module \uff1a\u4e0d\u5b89\u88c5userid\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u6839\u636e\u8bf7\u6c42\u5934\u7684\u5b57\u6bb5\u4fe1\u606f\u8fdb\u884c\u7528\u6237\u8ba4\u8bc1\uff0c\u786e\u5b9a\u8bf7\u6c42\u662f\u5426\u5408\u6cd5 --without-http_access_module \uff1a\u4e0d\u5b89\u88c5access\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u6839\u636eip\u663e\u793a\u5ba2\u6237\u7aef\u8bbf\u95ee --without-http_auth_basic_module \uff1a\u4e0d\u5b89\u88c5auth basic\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u63d0\u9ad8\u7b80\u5355\u7684\u7528\u6237\u540d\u3001\u5bc6\u7801\u8ba4\u8bc1 --without-http_autoindex_module \uff1a\u4e0d\u5b89\u88c5autoindex\u6a21\u5757\uff0c\u6a21\u5757\u63d0\u4f9b\u7b80\u5355\u7684\u76ee\u5f55\u6d4f\u89c8\u529f\u80fd --without-http_geo_module \uff1a\u4e0d\u5b89\u88c5geo\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u6839\u636e\u4e0d\u540c\u5730\u533a\u54cd\u5e94\u4e0d\u540c\u5185\u5bb9 --without-http_map_module \uff1a\u4e0d\u5b89\u88c5map\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u521b\u5efakey-value\u6620\u5c04\u8868 --without-http_split_clients_module \uff1a\u4e0d\u5b89\u88c5split client\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u6839\u636e\u5ba2\u6237\u7aef\u4fe1\u606f\uff08ip\u3001header\u4fe1\u606f\u3001cookie\u7b49\uff09\u533a\u5206\u5904\u7406 --without-http_referer_module \uff1a\u4e0d\u5b89\u88c5referer\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u6839\u636e\u8bf7\u6c42\u7684referer\u5b57\u6bb5\u62d2\u7edd\u8bf7\u6c42 --without-http_rewrite_module \uff1a\u4e0d\u5b89\u88c5rewrite\u6a21\u5757\uff0c\u6a21\u5757\u63d0\u4f9b\u91cd\u5b9a\u5411\u529f\u80fd --without-http_proxy_module \uff1a\u4e0d\u5b89\u88c5proxy\u6a21\u5757\uff0c\u6a21\u5757\u63d0\u4f9b\u53cd\u4ee3\u7406\u529f\u80fd --without-http_fastcgi_module \uff1a\u4e0d\u5b89\u88c5fastcgi\u6a21\u5757\uff0c --without-http_uwsgi_module \uff1a\u4e0d\u5b89\u88c5uwsgi\u6a21\u5757\uff0c --without-http_scgi_module \uff1a\u4e0d\u5b89\u88c5scgi\u6a21\u5757\uff0c --without-http_memecached_module \uff1a\u4e0d\u5b89\u88c5memecached\u6a21\u5757\uff0c\u7f13\u5b58 --without-http_limit_zone_module \uff1a\u4e0d\u5b89\u88c5limit zone\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u9650\u5236ip\u5e76\u53d1\u8fde\u63a5\u6570\u91cf\uff0c\u6bd4\u5982\u8bbe\u7f6e\u4e00\u4e2aip\u53ea\u80fd\u4e00\u4e2a\u8fde\u63a5 --without-http_limit_req_module \uff1a\u4e0d\u5b89\u88c5limit req\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u9650\u5236ip\u5e76\u53d1\u8bf7\u6c42\u6570\u91cf --without-http_empty_gif_module \uff1a\u4e0d\u5b89\u88c5empty gif\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u5728\u63a5\u6536\u5230\u65e0\u6548\u8bf7\u6c42\u65f6\u8fd4\u56de\u4e00\u4e2a1*1\u50cf\u7d20\u7684\u56fe\u7247 --without-http_browser_module \uff1a\u4e0d\u5b89\u88c5browser\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u6839\u636e\u8bf7\u6c42\u4e2d\u7684user-agent\u5b57\u6bb5\u8bc6\u522b\u6d4f\u89c8\u5668 --without-http_upstream_ip_hash_module \uff1a\u4e0d\u5b89\u88c5upstream ip hash\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u5bf9ip\u8fdb\u884c\u54c8\u5e0c\uff0c\u8ba9\u8bf7\u6c42\u8f6c\u53d1\u7ed9\u5bf9\u5e94ip\u54cd\u5e94\uff0c\u8d1f\u8f7d\u5747\u8861\u7528\u3002 \u3002\u3002\u3002 \u4e0d\u9ed8\u8ba4\u5b89\u88c5\u8fdbhttp\u6a21\u5757\uff08nginx\u5b89\u88c5\u65f6\u9ed8\u8ba4\u4e0d\u4f1a\u5b89\u88c5\u7684http\u529f\u80fd\uff0c\u5982\u679c\u9700\u8981\u5c31\u7528 --with-http-xxx \u6dfb\u52a0\uff09 --with-http_ssl_module \uff1a\u5b89\u88c5ssl\u6a21\u5757\uff0c\u6a21\u5757\u63d0\u4f9bhttps\u670d\u52a1\uff08\u9700\u8981\u5728config\u8bbe\u7f6e\u65f6\u914d\u7f6eopenssl\u5e93\uff09 --with-http_realip_module \uff1a\u5b89\u88c5realip\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u4ece\u8bf7\u6c42header\u4e2d\u83b7\u53d6\u5ba2\u6237\u7aef\u771f\u6b63ip --with-http_addition_module \uff1a\u5b89\u88c5addition\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u5728\u54cd\u5e94\u5934\u90e8\u3001\u5c3e\u90e8\u6dfb\u52a0\u5185\u5bb9 --with-http_xslt_module \uff1a\u5b89\u88c5xslt\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u54cd\u5e94xml\u65f6\u52a0\u5165xsl\u6e32\u67d3\uff08\u9700\u8981\u5728config\u8bbe\u7f6e\u65f6\u914d\u7f6elibxml2\u5e93\u3001libxslt\u5e93\uff09 --with-http_image_filter_module \uff1a\u5b89\u88c5image filter\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u5c06\u56fe\u7247\uff08jpeg\u3001png\u3001gif\uff09\u5b9e\u65f6\u538b\u7f29\u4e3a\u6307\u5b9a\u5927\u5c0f\u8fdb\u884c\u54cd\u5e94\uff08libgd\u5e93\uff09 --with-http_geoip_module \uff1a\u5b89\u88c5geoip\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u6839\u636eip\u83b7\u53d6\u5bf9\u5e94\u5b9e\u9645\u5730\u7406\u4f4d\u7f6e --with-http_sub_module \uff1a\u5b89\u88c5sub\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u66ff\u6362\u54cd\u5e94\u7684\u6307\u5b9a\u5b57\u7b26\u4e32 --with-http_dav_module \uff1a\u5b89\u88c5ssl\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u8ba9nginx\u652f\u6301webdav\u6807\u51c6\uff0c\u4f7f\u7528put\u3001delete\u3001copy\u3001move\u7b49\u8bf7\u6c42 --with-http_mp4_module \uff1a\u5b89\u88c5mp4\u6a21\u5757 --with-http_gzip_static_module \uff1a\u5b89\u88c5gzip static\u6a21\u5757\uff0c\u4e0d\u540cgzip\u6a21\u5757\uff0cstatic\u7684\u53ef\u4ee5\u5728\u8fdb\u884cgzip\u538b\u7f29\u524d\u68c0\u67e5\u662f\u5426\u5b58\u5728\u8be5\u54cd\u5e94\u7684\u7f13\u5b58\uff0c\u51cf\u5c11cpu\u538b\u7f29\u538b\u529b --with-http_random_index_module \uff1a\u5b89\u88c5random index\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u5728\u5ba2\u6237\u7aef\u8bbf\u95ee\u67d0\u76ee\u5f55\u65f6\uff0c\u968f\u673a\u8fd4\u56de\u8be5\u76ee\u5f55\u4e2d\u67d0\u4e2a\u6587\u4ef6 --with-http_secure_link_module \uff1a\u5b89\u88c5secure link\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u9a8c\u8bc1\u8bf7\u6c42\u662f\u5426\u6709\u6548 --with-http_degradation_module \uff1a\u5b89\u88c5degradation\u6a21\u5757\uff0c\u6a21\u5757\u9488\u5bf9\u7279\u6b8a\u7cfb\u7edf\u505a\u8c03\u7528\u4f18\u5316\uff08\u975elinux\uff09 --with-http_sub_status_module \uff1a\u5b89\u88c5sub status\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u63d0\u4f9bnginx\u8fd0\u884c\u65f6\u6027\u80fd\u7edf\u8ba1\u4fe1\u606f --with-google_perftools_module \uff1a\u5b89\u88c5google perftool\u6a21\u5757\uff0c\u6a21\u5757\u63d0\u4f9b\u8c37\u6b4c\u6027\u80fd\u6d4b\u8bd5\u5de5\u5177 \u3002\u3002\u3002 mail\u6a21\u5757 --with-mail \uff1a\u5b89\u88c5\u90ae\u4ef6\u670d\u52a1\u5668\u7684\u53cd\u4ee3\u6a21\u5757\uff0c\u4f7f\u7528imap\u3001pop3\u3001smtp\u7b49\u534f\u8bae --with-mail_ssl_module \uff1a\u6a21\u5757\u53ef\u4ee5\u8ba9\u534f\u8bae\u57fa\u4e8ehttps\u4f7f\u7528\uff08openssl\u5e93\uff09 --without-mail_imap_module \uff1a\u4e0d\u4f7f\u7528imap\u534f\u8bae --without-mail_pop3_module \uff1a\u4e0d\u4f7f\u7528pop3\u534f\u8bae --without-mail_smtp_module \uff1a\u4e0d\u4f7f\u7528smtp\u534f\u8bae \u5176\u4ed6 --with-debug \uff1anginx\u7814\u7a76\u3001\u8c03\u8bd5\u7528 --add-module=PATH \uff1a\u5728nginx\u4e2d\u52a0\u5165\u7b2c\u4e09\u65b9\u6a21\u5757 --without-http \uff1a\u7981\u7528http\u670d\u52a1 --without-http-cache \uff1a\u7981\u7528http\u7684\u7f13\u5b58\u670d\u52a1 --without-file-aio \uff1a\u6587\u4ef6\u5f02\u6b65io\u5904\u7406 --with-ipv6 \uff1a\u652f\u6301ipv6 --user=USER \uff1a\u6307\u5b9aworker\u8fdb\u7a0b\u8fd0\u884c\u65f6\u6240\u5c5e\u7684\u7528\u6237\uff08\u975eroot\uff09 --group=GROUP \uff1a\u6307\u5b9aworker\u8fdb\u7a0b\u8fd0\u884c\u65f6\u6240\u5c5e\u7684\u7528\u6237\u7ec4 \u4e09\u3001\u7f16\u8bd1\u5b89\u88c5 \ud83d\udc1f \u8fdb\u5165nginx\u76ee\u5f55 \u914d\u7f6e\uff1a ./configure [options] \u7f16\u8bd1\uff1a make \u5c06\u7f16\u8bd1\u597d\u7684\u4e8c\u8fdb\u5236\u8fd0\u884c\u6587\u4ef6\u590d\u5236\u5230\u914d\u7f6e\u597d\u7684\u76ee\u5f55\uff1a make install \u8fd9\u91cc\u91cd\u70b9\u4ecb\u7ecd\u4e0bconfigure\u914d\u7f6e\uff1a \u6839\u636e\u524d\u9762\u7684 configure\u914d\u7f6e \u9009\u62e9\u81ea\u5df1\u9700\u8981\u7684\u5e93\u3001\u529f\u80fd\uff0c\u5148\u4f7f\u7528\u7cfb\u7edf\u5305\u7ba1\u7406\u5668\u5b89\u88c5\u4f9d\u8d56\u5e93\uff0c\u518d\u914d\u7f6econfigure\u3002 \u4e0b\u9762\u5c55\u793a\u51e0\u4e2a\u793a\u4f8b\uff1a \u793a\u4f8ba \ud83d\udc1f cd /home/shafish/software wget https://nginx.org/download/nginx-1.20.2.tar.gz tar -zxvf nginx-1.20.2.tar.gz cd nginx-1.20.2 # pcre \u91cd\u5b9a\u5411\u65f6\u4f7f\u7528\u6b63\u5219\u5339\u914d # openssl \u4f7f\u7528https sudo pacman -S pcre* openssl* ./configure --prefix = /usr/local/nginx-1.20.2 \\ # \u6307\u5b9a\u5b89\u88c5\u7684\u6839\u76ee\u5f55 --with-http_ssl_module \\ # \u5b89\u88c5ssl --with-http_spdy_module \\ # SPDY\u53ef\u4ee5\u7f29\u77ed\u7f51\u9875\u7684\u52a0\u8f7d\u65f6\u95f4 --with-http_stub_status_module \\ # nginx\u76d1\u63a7\u6a21\u5757 --with-pcre \\ # \u542f\u7528pcre sudo make sudo make install \u793a\u4f8bb \ud83d\udc1f cd /home/shafish/software wget https://nginx.org/download/nginx-1.20.2.tar.gz tar -zxvf nginx-1.20.2.tar.gz cd nginx-1.20.2 # \u5b89\u88c5openssl\u5e93 sudo pacman -S openssl* # \u4e0b\u8f7d\u7b2c\u4e09\u65b9\u5e93\u7684\u6e90\u7801\uff0c\u5bf9\u5e93\u8fdb\u884c\u7f16\u8bd1\u4f7f\u7528 wget http://labs.frickle.com/files/ngx_cache_purge-1.3.tar.gz tar -xzvf ngx_cache_purge-1.3.tar.gz ./configure --prefix = /usr/local/nginx-1.20.2 \\ # \u6307\u5b9a\u5b89\u88c5\u7684\u6839\u76ee\u5f55 \u2013with-http_stub_status_module \\ # \u542f\u7528 nginx \u72b6\u6001\u6a21\u5757 \u2013with-http_ssl_module \\ # \u542f\u7528 SSL \u6a21\u5757 \u2013with-http_realip_module \\ # \u542f\u7528 realip \u6a21\u5757\uff08\u5c06\u7528\u6237 IP \u8f6c\u53d1\u7ed9\u540e\u7aef\u670d\u52a1\u5668\uff09 \u2013add-module = ./ngx_cache_purge-1.3 # \u6dfb\u52a0\u7f13\u5b58\u6e05\u9664\u6269\u5c55\u6a21\u5757 sudo make sudo make install \u793a\u4f8bc \ud83d\udc1f --prefix = /usr/local/nginx --user = www --group = www --with-http_stub_status_module --with-http_v2_module --with-http_ssl_module --with-http_gzip_static_module --with-http_realip_module --with-http_flv_module --with-http_mp4_module --with-openssl = ../openssl-1.0.2p --with-pcre = ../pcre-8.42 --with-pcre-jit --with-ld-opt = -ljemalloc \u56db\u3001\u4e3a\u5df2\u5b89\u88c5\u7684Nginx\u52a8\u6001\u6dfb\u52a0\u6a21\u5757 \ud83d\udc1f \u5b89\u597dnginx\u540e\uff0c\u8fc7\u4e2a\u51e0\u4e2a\u6708\uff0c\u518d\u52a0\u591a\u51e0\u4e2a\u9700\u6c42\uff0c\u5bf9\u5427\uff0c\u4f60\u61c2\u7684\u3002 nginx\u6dfb\u52a0\u6a21\u5757\u8fd8\u662f\u8981\u91cd\u65b0\u7f16\u8bd1\u624d\u884c\u3002 \u52a0ngx_http_google_filter_module \ud83d\udc1f # \u8fdb\u5165nginx\u5b89\u88c5\u76ee\u5f55\uff0c\u770b\u4e0a\u9762\u793a\u4f8ba b cd cd /home/shafish/software/nginx-1.20.2 # \u4e0b\u8f7d\u9700\u8981\u7684\u6a21\u5757\u6e90\u7801 git clone https://github.com/cuber/ngx_http_google_filter_module # \u67e5\u770b\u5b89\u88c5\u65f6\u7684\u914d\u7f6e ./nginx -V # ./configure --prefix=/usr/local/nginx-1.20.2 \u2013with-http_stub_status_module \u2013with-http_ssl_module \u2013with-http_realip_module \u2013add-module=./ngx_cache_purge-1.3 # \u52a0\u5165\u65b0\u6a21\u5757\u914d\u7f6e ./configure --prefix = /usr/local/nginx-1.20.2 \u2013with-http_stub_status_module \u2013with-http_ssl_module \u2013with-http_realip_module \u2013add-module = ./ngx_cache_purge-1.3 \\ --add-module = /usr/local/nginx/ngx_http_google_filter_module # \u6267\u884c\u7f16\u8bd1 sudo make # \u66ff\u6362nginx\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u6728\u6709make install\u54df mv ./sbin/nginx ./sbin/nginx.bak cp ./objs/nginx ./sbin/ ./nginx -V \u4e94\u3001nginx\u547d\u4ee4 \ud83d\udc1f \u9ed8\u8ba4\u5b89\u88c5\u8def\u5f84\uff1a --prefix=/usr/local/nginx \u542f\u52a8nginx\uff1a /usr/local/nginx/sbin/nginx \uff08\u9ed8\u8ba4\u52a0\u8f7d\u7684\u662f/usr/local/nginx/conf/nginx.conf\u914d\u7f6e\uff09 \u542f\u52a8\u65f6\u6307\u5b9a\u914d\u7f6e\uff1a /usr/local/nginx/sbin/nginx -c /tmp/nginx.conf \uff08-c\u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff09 \u6d4b\u8bd5\u914d\u7f6e\u6587\u4ef6\u662f\u5426\u6b63\u786e\uff1a /usr/local/nginx/sbin/nginx -t \u663e\u793a\u7f16\u8bd1\u9636\u6bb5\u7528\u7684\u53c2\u6570\uff1a /usr/local/nginx/sbin/nginx -V \u201c\u4f18\u96c5\u201d\u5730\u505c\u6b62\u670d\u52a1\uff1a /usr/local/nginx/sbin/nginx -s quit \u8fd0\u884c\u65f6\u91cd\u8f7d\u914d\u7f6e\u6587\u4ef6\uff1a /usr/local/nginx/sbin/nginx -s reload \u4e0d\u91cd\u542f\u5347\u7ea7nginx\u7248\u672c\uff1a \u516d\u3001nginx\u57fa\u672c\u7684\u914d\u7f6e \ud83d\udc1f 1.\u7528\u4e8e\u8c03\u8bd5\u3001\u95ee\u9898\u5b9a\u4f4d\u7684\u914d\u7f6e \ud83d\udc1f \u914d\u7f6e\u9879\u76ee \u8bf4\u660e daemon on|off; \u662f\u5426\u4ee5\u5b88\u62a4\u8fdb\u7a0b\u65b9\u5f0f\u8fd0\u884cNginx\uff08\u9ed8\u8ba4on\uff09 master_process on|off; \u662f\u5426\u4ee5master/worker\u65b9\u5f0f\u5de5\u4f5c\uff08\u9ed8\u8ba4on\uff09 error_log /path/file level; \u5927\u4e8e\u6216\u7b49\u4e8e\u8be5\u7ea7\u522b\u7684\u65e5\u5fd7\u90fd\u4f1a\u88ab\u8f93\u51fa\u5230/path/file\u6587\u4ef6\u4e2d\u3002level\u53d6\u503c\uff1adebug\u3001info\u3001notice\u3001warn\u3001error\u3001crit\u3001alert\u3001emerg debug_connection[IP|CIDR] \u5fc5\u987b\u653e\u5728events{...}\u4e2d\u624d\u6709\u6548\uff0c\u4ec5\u4ec5\u6765\u81ea\u89c4\u5b9a\u7684ip\u8bf7\u6c42\u624d\u4f1a\u8f93\u51fadebug\u65e5\u5fd7 worker_rlimit_core size; \u9650\u5236coredump\u6838\u5fc3\u8f6c\u50a8\u6587\u4ef6\u7684\u5927\u5c0f working_directory path; \u6307\u5b9acoredump\u6587\u4ef6\u751f\u6210\u76ee\u5f55 2.\u8fd0\u884c\u5fc5\u5907\u914d\u7f6e \ud83d\udc1f \u914d\u7f6e\u9879\u76ee \u8bf4\u660e env VAR|VAR=VALUE \u5b9a\u4e49\u73af\u5883\u53d8\u91cf(env TESTPATH=/tmp/;) include/path/file; \u5d4c\u5165\u5176\u4ed6\u914d\u7f6e\u6587\u4ef6(\u76f8\u5bf9\u76ee\u5f55\uff1a\u5373nginx.conf\u6240\u5728\u7684\u76ee\u5f55) pid path/file; \u4fdd\u5b58master\u8fdb\u7a0bid\u7684pid\u6587\u4ef6\u8def\u5f84 user username[groupname]; Nginx worker\u8fdb\u7a0b\u8fd0\u884c\u7684\u7528\u6237\u53ca\u7528\u6237\u7ec4 worker_rlimit_nofile limit; \u6307\u5b9aNginx worker\u8fdb\u7a0b\u53ef\u4ee5\u6253\u5f00\u7684\u6700\u5927\u53e5\u67c4\u63cf\u8ff0\u7b26\u4e2a\u6570 worker_rlimit_sigpending limit; \u8bbe\u7f6e\u6bcf\u4e2a\u7528\u6237\u53d1\u5f80Nginx\u7684\u4fe1\u53f7\u961f\u5217\u7684\u5927\u5c0f 3.\u6027\u80fd\u4f18\u5316\u914d\u7f6e \ud83d\udc1f \u914d\u7f6e\u9879\u76ee \u8bf4\u660e worker_processes number; Nginx worker\u8fdb\u7a0b\u4e2a\u6570(\u4e00\u822c\u8ddf\u6838\u6570\u76f8\u540c\u5373\u53ef) worker_cpu_affinity cpumask[cpumask...] [Linux]\u7ed1\u5b9aNginx worker\u8fdb\u7a0b\u5230\u6307\u5b9a\u7684CPU\u5185\u6838 ssl_engine device; SSL\u786c\u4ef6\u52a0\u901f(openssl engine -t\u67e5\u770b\u662f\u5426\u6709\u52a0\u901f\u8bbe\u5907) timer_resolution t; \u7cfb\u7edf\u8c03\u7528gettimeofday\u7684\u6267\u884c\u9891\u7387(\u65f6\u95f4\u80fd\u51c6\u4e00\u70b9) worker_priority nice; Nginx worker\u8fdb\u7a0b\u4f18\u5148\u7ea7\u8bbe\u7f6e\uff0c\u201320~+19\uff0c\u201320\u662f\u6700\u9ad8\u4f18\u5148\u7ea7\uff0c+19\u662f\u6700\u4f4e\u4f18\u5148\u7ea7 worker_rlimit_sigpending limit; \u8bbe\u7f6e\u6bcf\u4e2a\u7528\u6237\u53d1\u5f80Nginx\u7684\u4fe1\u53f7\u961f\u5217\u7684\u5927\u5c0f 4.\u4e8b\u4ef6\u7c7b\u578b\u914d\u7f6e \ud83d\udc1f \u914d\u7f6e\u9879\u76ee \u8bf4\u660e accept_mutex[on|off]; \u9ed8\u8ba4on\uff0c\u662f\u5426\u6253\u5f00accept\u9501\uff0c\u8d1f\u8f7d\u5747\u8861\u9501 lock_file path/file; lock\u6587\u4ef6\u7684\u8def\u5f84\uff0c\u6587\u4ef6\u9501 accept_mutex_delay Nms; \u4f7f\u7528accept\u9501\u540e\u5230\u771f\u6b63\u5efa\u7acb\u8fde\u63a5\u4e4b\u95f4\u7684\u5ef6\u8fdf\u65f6\u95f4\uff0c\u5982\u679c\u6709\u4e00\u4e2aworker\u8fdb\u7a0b\u8bd5\u56fe\u53d6accept\u9501\u800c\u6ca1\u6709\u53d6\u5230\uff0c\u5b83\u81f3\u5c11\u8981\u7b49accept_mutex_delay\u5b9a\u4e49\u7684\u65f6\u95f4\u95f4\u9694\u540e\u624d\u80fd\u518d\u6b21\u8bd5\u56fe\u53d6\u9501 multi_accept[on|off]; \u9ed8\u8ba4off\uff0c\u6279\u91cf\u5efa\u7acb\u65b0\u8fde\u63a5 use[kqueue|rtsig|epoll|/dev/poll|select|poll|eventport]; \u9009\u62e9\u4e8b\u4ef6\u6a21\u578b\uff0c\u9ed8\u8ba4\u4f1a\u81ea\u52a8\u4f7f\u7528\u6700\u9002\u5408\u7684\u4e8b\u4ef6\u6a21\u578b worker_connections number; \u6bcf\u4e2aworker\u7684\u6700\u5927\u8fde\u63a5\u6570 \u4e03\u3001nginx http\u6a21\u5757\u914d\u7f6e \ud83d\udc1f nginx\u4e3b\u8981\u9760ngx_http_core_module\u6a21\u5757\u5b9e\u73b0\u3002 1.\u6a21\u5757\u53d8\u91cf \ud83d\udc1f 2.\u865a\u62df\u4e3b\u673a\u4e0e\u8bf7\u6c42\u7684\u5206\u53d1 \ud83d\udc1f \u6bcf\u4e2aserver\u5757\u90fd\u662f\u4e00\u4e2a\u865a\u62df\u4e3b\u673a\u3002 \u76d1\u542c\u7aef\u53e3\uff1a listen address:port[default(deprecated in 0.8.21)|default_server|[backlog=num|rcvbuf=size|sndbuf=size|accept_filter=filter|deferred|bind|ipv6only=[on|off]|ssl]]; default/default_server \uff1a\u5c06\u6240\u5728\u7684server\u5757\u4f5c\u4e3anginx\u9ed8\u8ba4\u865a\u62df\u4e3b\u673a\uff0c\u5426\u5219\u9ed8\u8ba4\u662f\u9009\u914d\u7f6e\u4e2d\u7b2c\u4e00\u4e2aserver\u5757der\uff08\u5f53\u4e00\u4e2a\u8bf7\u6c42\u65e0\u6cd5\u5339\u914d\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u6240\u6709\u4e3b\u673a\u57df\u540d\u65f6\uff0c\u5c31\u4f1a\u9009\u7528\u9ed8\u8ba4\u7684\u865a\u62df\u4e3b\u673a\uff09\u3002 backlog=num \uff1a\u8868\u793aTCP\u4e2dbacklog\u961f\u5217\u7684\u5927\u5c0f\uff0c\u5982\u679cbacklog\u961f\u5217\u5df2\u6ee1\uff0c\u8fd8\u6709\u65b0\u7684\u5ba2\u6237\u7aef\u8bd5\u56fe\u901a\u8fc7\u4e09\u6b21\u63e1\u624b\u5efa\u7acbTCP\u8fde\u63a5\uff0c\u8fd9\u65f6\u5ba2\u6237\u7aef\u5c06\u4f1a\u5efa\u7acb\u8fde\u63a5\u5931\u8d25\u3002 rcvbuf=size \uff1a\u8bbe\u7f6e\u76d1\u542c\u53e5\u67c4\u7684SO_RCVBUF\u53c2\u6570\u3002 sndbuf=size \uff1a\u8bbe\u7f6e\u76d1\u542c\u53e5\u67c4\u7684SO_SNDBUF\u53c2\u6570\u3002 deferred \uff1a\u9002\u7528\u4e8e\u5927\u5e76\u53d1\uff0c\u5f53\u8bf7\u6c42\u6570\u636e\u6765\u4e34\u65f6\uff0cworker\u8fdb\u7a0b\u624d\u4f1a\u5f00\u59cb\u5904\u7406\u8fd9\u4e2a\u8fde\u63a5\u3002 bind \uff1a\u7ed1\u5b9a\u5f53\u524d\u7aef\u53e3/\u5730\u5740\u5bf9\uff0c\u540c\u65f6\u5bf9\u4e00\u4e2a\u7aef\u53e3\u76d1\u542c\u591a\u4e2a\u5730\u5740\u65f6\u624d\u4f1a\u751f\u6548\u3002 ssl \uff1a\u5728\u5f53\u524d\u76d1\u542c\u7684\u7aef\u53e3\u4e0a\u5efa\u7acb\u7684\u8fde\u63a5\u5fc5\u987b\u57fa\u4e8eSSL\u534f\u8bae\u3002 \u5728\u5f00\u59cb\u5904\u7406\u4e00\u4e2aHTTP\u8bf7\u6c42\u65f6\uff0cNginx\u4f1a\u53d6\u51faheader\u5934\u4e2d\u7684Host\uff0c\u4e0e\u6bcf\u4e2aserver\u4e2d\u7684server_name\u8fdb\u884c\u5339\u914d\uff0c\u4ee5\u6b64\u51b3\u5b9a\u5230\u5e95\u7531\u54ea\u4e00\u4e2aserver\u5757\u6765\u5904\u7406\u8fd9\u4e2a\u8bf7\u6c42\u3002 \u4e3b\u673a\u540d\u79f0\uff1a server_name name[...]; \u591a\u57df\u540d\u5bf9\u5e94\u4e00\u4e2a\u670d\u52a1\u5668ip\uff0c\u53ef\u4ee5\u6839\u636eserver\u5757\u4e2d\u5b9a\u4e49\u7684server_name\u6765\u5904\u7406\u5bf9\u5e94\u57df\u540d\u7684\u8bf7\u6c42\u3002 \u8bbe\u7f6e\u6563\u5217\u6876\u5360\u7528\u7684\u5185\u5b58\u5927\u5c0f\uff1a server_names_hash_bucket_size size; Nginx\u4f7f\u7528\u6563\u5217\u8868\u6765\u5b58\u50a8server name\uff0c\u63d0\u9ad8\u5feb\u901f\u5bfb\u627e\u5230\u76f8\u5e94server name\u7684\u80fd\u529b\u3002 server_names_hash_max_size \u9ed8\u8ba4\uff1a512\uff0c\u8d8a\u5927\uff0c\u6d88\u8017\u7684\u5185\u5b58\u5c31\u8d8a\u591a\uff0c\u4f46\u6563\u5217key\u7684\u51b2\u7a81\u7387\u5219\u4f1a\u964d\u4f4e\uff0cserver name\u68c0\u7d22\u901f\u5ea6\u4e5f\u66f4\u5feb\u3002 \u91cd\u5b9a\u5411\u4e3b\u673a\u540d\u79f0\u7684\u5904\u7406\uff1a server_name_in_redirect on|off; \u9ed8\u8ba4\uff1aon\uff0c\u8868\u793a\u5728\u91cd\u5b9a\u5411\u8bf7\u6c42\u65f6\u4f1a\u4f7f\u7528server_name\u91cc\u914d\u7f6e\u7684\u7b2c\u4e00\u4e2a\u4e3b\u673a\u540d\u4ee3\u66ff\u539f\u5148\u8bf7\u6c42\u4e2d\u7684Host\u5934\u90e8\u3002 uri\u8bf7\u6c42\u5339\u914d\uff1a location[=|~|~*|^~|@]/uri/{...} = \uff1a\u628aURI\u4f5c\u4e3a\u5b57\u7b26\u4e32\u8fdb\u884c\u5339\u914d\u3002 location = / { # \u53ea\u6709\u5f53\u7528\u6237\u8bf7\u6c42\u662f/\u65f6\uff0c\u624d\u4f1a\u4f7f\u7528\u8be5location\u4e0b\u7684\u914d\u7f6e \u2026 } ~ \uff1a\u8868\u793a\u5339\u914dURI\u65f6\u662f\u5b57\u6bcd\u5927\u5c0f\u5199\u654f\u611f\u7684\u3002 ~* \uff1a\u8868\u793a\u5339\u914dURI\u65f6\u5ffd\u7565\u5b57\u6bcd\u5927\u5c0f\u5199\u95ee\u9898\u3002 ^~ \uff1a\u8868\u793a\u5339\u914dURI\u65f6\u53ea\u9700\u8981\u5176\u524d\u534a\u90e8\u5206\u4e0euri\u53c2\u6570\u5339\u914d\u5373\u53ef\u3002 location ^~ /images/ { # \u4ee5/images/\u5f00\u59cb\u7684\u8bf7\u6c42\u90fd\u4f1a\u5339\u914d\u4e0a \u2026 } @ \uff1a\u8868\u793a\u4ec5\u7528\u4e8eNginx\u670d\u52a1\u5185\u90e8\u8bf7\u6c42\u4e4b\u95f4\u7684\u91cd\u5b9a\u5411\uff0c\u4e0d\u76f4\u63a5\u5904\u7406\u7528\u6237\u8bf7\u6c42\u3002 \u6b63\u5219\u8868\u8fbe\u5f0f \uff1a\u7528\u6b63\u5219\u5339\u914d\u5457\u3002 location ~* \\. ( gif | jpg | jpeg ) $ { # \u5339\u914d\u4ee5 .gif\u3001.jpg\u3001.jpeg\u7ed3\u5c3e\u7684\u8bf7\u6c42 \u2026 } 3.\u6587\u4ef6\u8def\u5f84\u7684\u5b9a\u4e49 \ud83d\udc1f \u6307\u5b9a\u6839\u76ee\u5f55\uff1a root path; \u9ed8\u8ba4\uff1aroot html location /download/ { # \u8bf7\u6c42\u7684URI\u662f/download/index/test.html\uff0c\u670d\u52a1\u5668\u8fd4\u56de/opt/web/html/download/index/test.html\u6587\u4ef6\u7684\u5185\u5bb9 root /opt/web/html/ ; } \u5c06uri\u8bf7\u6c42\u76ee\u5f55\u6620\u5c04\u4e3a\u6839\u76ee\u5f55\uff1a alias path; location /conf { # \u8bf7\u6c42\u7684URI\u662f/conf/nginx.conf\uff0c\u670d\u52a1\u5668\u8fd4\u56de/usr/local/nginx/conf/nginx.conf\uff0c\u5c06/conf\u6620\u5c04\u4e3a\u4e86/usr/local/nginx/conf/ alias /usr/local/nginx/conf/ ; } \u8bbf\u95ee\u9996\u9875\uff1a index file...; \u9ed8\u8ba4\uff1aindex index.html; \u6839\u636eHTTP\u8fd4\u56de\u7801\u91cd\u5b9a\u5411\u9875\u9762\uff1a error_page code[code...][=|=answer-code]uri|@named_location error_page 404 /404.html ; error_page 502 503 504 /50x.html ; error_page 403 http://example.com/forbidden.html ; # \u91cd\u5b9a\u5411\u5230\u53e6\u4e00\u4e2alocation\u4e2d\u8fdb\u884c\u5904\u7406 error_page 404 = @fallback ; location @fallback ( proxy_pass http://backend ; ) \u662f\u5426\u5141\u8bb8\u9012\u5f52\u4f7f\u7528error_page\uff1a recursive_error_pages[on|off]; \u9ed8\u8ba4\uff1arecursive_error_pages off; \u5bfb\u627e\u6587\u4ef6\uff1a try_files path1[path2] uri; # \u6309\u7167\u987a\u5e8f\u627e\u8fd9\u4e9b\u6587\u4ef6\uff0c\u6587\u4ef6\u5b58\u5728\u5c31\u8fd4\u56de\uff0c\u7ed3\u675f\u8bf7\u6c42\uff0c\u5982\u679c\u90fd\u627e\u4e0d\u5230\u5c31\u8fdb\u5165\u8bbe\u7f6e\u597d\u7684\u91cd\u5b9a\u5411\u5904\u7406\u3002 try_files /system/maintenance.html $uri $uri /index.html $uri .html @other ; location @other { proxy_pass http://backend ; } 4.\u5185\u5b58\u53ca\u78c1\u76d8\u8d44\u6e90\u7684\u5206\u914d \ud83d\udc1f \u5904\u7406\u8bf7\u6c42\u65f6\u5185\u5b58\u3001\u78c1\u76d8\u8d44\u6e90\u5206\u914d\u7684\u914d\u7f6e\u9879 HTTP\u5305\u4f53\u53ea\u5b58\u50a8\u5230\u78c1\u76d8\u6587\u4ef6\u4e2d\uff1a client_body_in_file_only on|clean|off; \u9ed8\u8ba4\uff1aclient_body_in_file_only off; \u5f53\u8bbe\u7f6e\u4e3aon|clean\u65f6\uff0c\u8bf7\u6c42\u5305\u4f53\u4f1a\u5b58\u50a8\u5728\u78c1\u76d8\u6587\u4ef6\u4e2d\u3002 HTTP\u5305\u4f53\u5c3d\u91cf\u5199\u5165\u5230\u4e00\u4e2a\u5185\u5b58buffer\u4e2d\uff1a client_body_in_single_buffer on|off; \u9ed8\u8ba4\uff1aclient_body_in_single_buffer off; \u5982\u679c\u5305\u4f53\u5185\u5bb9\u5927\u8fc7client_body_buffer_size\uff0c\u5305\u4f53\u5185\u5bb9\u5c31\u5b58\u50a8\u5728\u78c1\u76d8\u6587\u4ef6\u4e2d \u5b58\u50a8HTTP\u5934\u90e8\u7684\u5185\u5b58buffer\u5927\u5c0f\uff1a client_header_buffer_size size; \u9ed8\u8ba4\uff1aclient_header_buffer_size 1k; \u6b63\u5e38\u60c5\u51b5\u4e0bNginx\u63a5\u6536\u7528\u6237\u8bf7\u6c42\u4e2dHTTP header\u90e8\u5206\uff08\u5305\u62ecHTTP\u884c\u548cHTTP\u5934\u90e8\uff09\u65f6\u5206\u914d\u7684\u5185\u5b58buffer\u5927\u5c0f \u5b58\u50a8\u8d85\u5927HTTP\u5934\u90e8\u7684\u5185\u5b58buffer\u5927\u5c0f\uff1a large_client_header_buffers number size; \u9ed8\u8ba4\uff1alarge_client_header_buffers 48k; \u5b9a\u4e49\u4e86Nginx\u63a5\u6536\u4e00\u4e2a\u8d85\u5927HTTP\u5934\u90e8\u8bf7\u6c42\u7684buffer\u4e2a\u6570\u548c\u6bcf\u4e2abuffer\u7684\u5927\u5c0f \u5b58\u50a8HTTP\u5305\u4f53\u7684\u5185\u5b58buffer\u5927\u5c0f\uff1a client_body_buffer_size size; \u9ed8\u8ba4\uff1aclient_body_buffer_size 8k/16k; \u5b9a\u4e49\u4e86Nginx\u63a5\u6536HTTP\u5305\u4f53\u7684\u5185\u5b58\u7f13\u51b2\u533a\u5927\u5c0f HTTP\u5305\u4f53\u7684\u4e34\u65f6\u5b58\u653e\u76ee\u5f55\uff1a client_body_temp_path dir-path[level1[level2[level3]]] client_body_temp_path /opt/nginx/client_temp 1 2; \u6307\u5b9a\u4e3a\u8fde\u63a5\u6210\u529f\u7684\u8bf7\u6c42\u5206\u914d\u5185\u5b58\u6c60\u521d\u59cb\u5927\u5c0f\uff1a connection_pool_size size; \u9ed8\u8ba4\uff1aconnection_pool_size 256; \u5f00\u59cb\u5904\u7406\u8bf7\u6c42\uff0c\u4e3a\u6bcf\u4e2a\u8bf7\u6c42\u5206\u914d\u7684\u5185\u5b58\u6c60\u5927\u5c0f\uff1a request_pool_size size; \u9ed8\u8ba4\uff1arequest_pool_size 4k; 5.\u7f51\u7edc\u8fde\u63a5\u7684\u8bbe\u7f6e \ud83d\udc1f \u8bfb\u53d6HTTP\u5934\u90e8\u7684\u8d85\u65f6\u65f6\u95f4\uff1a client_header_timeout time\uff08\u9ed8\u8ba4\u5355\u4f4d\uff1a\u79d2\uff09; \u9ed8\u8ba4\uff1aclient_header_timeout 60; \u8bfb\u53d6HTTP\u5305\u4f53\u7684\u8d85\u65f6\u65f6\u95f4\uff1a client_body_timeout time\uff08\u9ed8\u8ba4\u5355\u4f4d\uff1a\u79d2\uff09; \u9ed8\u8ba4\uff1aclient_body_timeout 60; \u53d1\u9001\u54cd\u5e94\u7684\u8d85\u65f6\u65f6\u95f4\uff1a send_timeout time; \u9ed8\u8ba4\uff1asend_timeout 60; reset_timeout_connection on|off; \u9ed8\u8ba4\uff1areset_timeout_connection off; \u8fde\u63a5\u8d85\u65f6\uff0c\u76f4\u63a5\u5411\u7528\u6237\u53d1\u9001RST\u91cd\u7f6e\u5305\uff0c\u800c\u4e0d\u662f\u56db\u6b21\u6325\u624b\u5173\u95ed\u8fde\u63a5\u3002 lingering_close off|on|always; \u9ed8\u8ba4\uff1alingering_close on; \u63a7\u5236Nginx\u5173\u95ed\u7528\u6237\u8fde\u63a5\u7684\u65b9\u5f0f\u3002 always\u8868\u793a\u5173\u95ed\u7528\u6237\u8fde\u63a5\u524d\u5fc5\u987b\u65e0\u6761\u4ef6\u5730\u5904\u7406\u8fde\u63a5\u4e0a\u6240\u6709\u7528\u6237\u53d1\u9001\u7684\u6570\u636e off\u8868\u793a\u5173\u95ed\u8fde\u63a5\u65f6\u5b8c\u5168\u4e0d\u7ba1\u8fde\u63a5\u4e0a\u662f\u5426\u5df2\u7ecf\u6709\u51c6\u5907\u5c31\u7eea\u7684\u6765\u81ea\u7528\u6237\u7684\u6570\u636e on\u662f\u4e2d\u95f4\u503c\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\u5728\u5173\u95ed\u8fde\u63a5\u524d\u90fd\u4f1a\u5904\u7406\u8fde\u63a5\u4e0a\u7684\u7528\u6237\u53d1\u9001\u7684\u6570\u636e lingering_time time; \u9ed8\u8ba4\uff1alingering_time 30s; \u8ddf\u7528\u6237\u6587\u4ef6\u4e0a\u4f20\u76f8\u5173\uff0c\u5982\u679c\u7ecf\u8fc7lingering_time\u540e\uff0c\u4e0a\u4f20\u8fd8\u5728\u7ee7\u7eed\uff0c\u5219\u4f1a\u5173\u95ed\u8fde\u63a5 lingering_timeout time; \u9ed8\u8ba4\uff1alingering_timeout 5s; \u5173\u95ed\u8fde\u63a5\u524d\uff0c\u68c0\u6d4b\u662f\u5426\u6709\u7528\u6237\u53d1\u9001\u7684\u6570\u636e\u5230\u8fbe\u670d\u52a1\u5668 \u5bf9\u67d0\u4e9b\u6d4f\u89c8\u5668\u7981\u7528keepalive\u529f\u80fd\uff1a keepalive_disable[msie6|safari|none]... \u9ed8\u8ba4\uff1akeepalive_disablemsie6 safari \u8ba9\u591a\u4e2a\u8bf7\u6c42\u590d\u7528\u4e00\u4e2aHTTP\u957f\u8fde\u63a5\uff0c\u8fd9\u4e2a\u529f\u80fd\u5bf9\u670d\u52a1\u5668\u7684\u6027\u80fd\u63d0\u9ad8\u662f\u5f88\u6709\u5e2e\u52a9\u7684 keepalive\u8d85\u65f6\u65f6\u95f4\uff1a keepalive_timeout time\uff08\u9ed8\u8ba4\u5355\u4f4d\uff1a\u79d2\uff09; \u9ed8\u8ba4\uff1akeepalive_timeout 75; \u4e00\u4e2akeepalive\u8fde\u63a5\u5728\u95f2\u7f6e\u8d85\u8fc7\u4e00\u5b9a\u65f6\u95f4\u540e\uff08\u9ed8\u8ba4\u7684\u662f75\u79d2\uff09\uff0c\u670d\u52a1\u5668\u548c\u6d4f\u89c8\u5668\u90fd\u4f1a\u53bb\u5173\u95ed\u8fd9\u4e2a\u8fde\u63a5\u3002 \u4e00\u4e2akeepalive\u957f\u8fde\u63a5\u4e0a\u5141\u8bb8\u627f\u8f7d\u7684\u8bf7\u6c42\u6700\u5927\u6570\uff1a keepalive_requests n; \u9ed8\u8ba4\uff1akeepalive_requests 100; \u5bf9keepalive\u8fde\u63a5\u662f\u5426\u4f7f\u7528TCP_NODELAY\u9009\u9879\uff1a tcp_nodelay on|off; \u9ed8\u8ba4\uff1atcp_nodelay on; tcp_nopush on|off; \u9ed8\u8ba4\uff1atcp_nopush off; \u6253\u5f00tcp_nopush\u540e\uff0c\u5c06\u4f1a\u5728\u53d1\u9001\u54cd\u5e94\u65f6\u628a\u6574\u4e2a\u54cd\u5e94\u5305\u5934\u653e\u5230\u4e00\u4e2aTCP\u5305\u4e2d\u53d1\u9001 6.MIME\u7c7b\u578b\u7684\u8bbe\u7f6e \ud83d\udc1f MIME type\u4e0e\u6587\u4ef6\u6269\u5c55\u7684\u6620\u5c04\uff1a type{...}; types { text / html html ; text / html conf ; image / gif gif ; image / jpeg jpg ; } \u9ed8\u8ba4MIME type\uff1a default_type MIME-type; \u9ed8\u8ba4\uff1adefault_type text/plain; types_hash_bucket_size size; \u9ed8\u8ba4\uff1atypes_hash_bucket_size 32|64|128; \u8bbe\u7f6e\u6bcf\u4e2a\u6563\u5217\u6876\u5360\u7528\u7684\u5185\u5b58\u5927\u5c0f\uff0c\u5feb\u901f\u5bfb\u627e\u5230\u76f8\u5e94MIME type\uff0c\u4f7f\u7528\u6563\u5217\u8868\u6765\u5b58\u50a8MIMEtype\u4e0e\u6587\u4ef6\u6269\u5c55\u540d types_hash_max_size size; \u9ed8\u8ba4\uff1atypes_hash_max_size 1024; types_hash_max_size\u8d8a\u5927\uff0c\u5c31\u4f1a\u6d88\u8017\u66f4\u591a\u7684\u5185\u5b58\uff0c\u4f46\u6563\u5217key\u7684\u51b2\u7a81\u7387\u4f1a\u964d\u4f4e\uff0c\u68c0\u7d22\u901f\u5ea6\u5c31\u66f4\u5feb 7.\u5bf9\u5ba2\u6237\u7aef\u8bf7\u6c42\u7684\u9650\u5236 \ud83d\udc1f \u6309HTTP\u65b9\u6cd5\u540d\u9650\u5236\u7528\u6237\u8bf7\u6c42\uff1a limit_except method...{...} # \u7981\u6b62GET\u65b9\u6cd5\u548cHEAD\u65b9\u6cd5\uff0c\u5141\u8bb8\u5176\u4ed6HTTP\u65b9\u6cd5 limit_except GET { allow 192 .168.1.0/32 ; deny all ; } HTTP\u8bf7\u6c42\u5305\u4f53\u7684\u6700\u5927\u503c\uff1a client_max_body_size size; \u9ed8\u8ba4\uff1aclient_max_body_size 1m; \u53ef\u4ee5\u544a\u8bc9\u7528\u6237\u8bf7\u6c42\u8fc7\u5927\u4e0d\u88ab\u63a5\u53d7 \u5bf9\u8bf7\u6c42\u7684\u9650\u901f\uff1a limit_rate speed; \u9ed8\u8ba4\uff1alimit_rate 0; \u9650\u5236\u6bcf\u79d2\u4f20\u8f93\u7684\u5b57\u8282\u6570 \u8d85\u8fc7\u591a\u5927\u540e\u9650\u901f\uff1a limit_rate_after time; \u9ed8\u8ba4\uff1alimit_rate_after 1m; 8.\u6587\u4ef6\u64cd\u4f5c\u7684\u4f18\u5316 \ud83d\udc1f sendfile\u7cfb\u7edf\u8c03\u7528\uff1a sendfile on|off; \u9ed8\u8ba4\uff1asendfile off; \u51cf\u5c11\u5185\u6838\u6001\u4e0e\u7528\u6237\u6001\u95f4\u7684\u6587\u4ef6\u590d\u5236\u6b21\u6570\uff08\u96f6\u62f7\u8d1d\uff09 AIO\u7cfb\u7edf\u8c03\u7528\uff1a aio on|off; \u662f\u5426\u5728FreeBSD\u6216Linux\u7cfb\u7edf\u4e0a\u542f\u7528\u5185\u6838\u7ea7\u522b\u7684\u5f02\u6b65\u6587\u4ef6I/O\u529f\u80fd \u4e0esendfile\u529f\u80fd\u662f\u4e92\u65a5\u7684 directio size|off; \u9ed8\u8ba4\uff1adirectio off; \u8bfb\u53d6\u6587\u4ef6\uff0c\u7f13\u51b2\u533a\u5927\u5c0f\u4e3asize\uff0c\u901a\u5e38\u5bf9\u5927\u6587\u4ef6\u7684\u8bfb\u53d6\u901f\u5ea6\u6709\u4f18\u5316\u4f5c\u7528\u3002 \u4e0esendfile\u529f\u80fd\u662f\u4e92\u65a5\u7684 directio_alignment size; \u9ed8\u8ba4\uff1adirectio_alignment 512; \u4e0edirectio\u914d\u5408\u4f7f\u7528\uff0c\u6307\u5b9a\u4ee5directio\u65b9\u5f0f\u8bfb\u53d6\u6587\u4ef6\u65f6\u7684\u5bf9\u9f50\u65b9\u5f0f\uff084k\u5bf9\u9f50\u7b49\uff09 \u6253\u5f00\u6587\u4ef6\u7f13\u5b58\uff1a open_file_cache max=N[inactive=time]|off; \u9ed8\u8ba4\uff1aopen_file_cache off; \u662f\u5426\u7f13\u5b58\u6253\u5f00\u6587\u4ef6\u9519\u8bef\u7684\u4fe1\u606f\uff1a open_file_cache_errors on|off; \u9ed8\u8ba4\uff1aopen_file_cache_errors off; \u662f\u5426\u5728\u6587\u4ef6\u7f13\u5b58\u4e2d\u7f13\u5b58\u6253\u5f00\u6587\u4ef6\u65f6\u51fa\u73b0\u7684\u627e\u4e0d\u5230\u8def\u5f84\u3001\u6ca1\u6709\u6743\u9650\u7b49\u9519\u8bef\u4fe1\u606f \u4e0d\u88ab\u6dd8\u6c70\u7684\u6700\u5c0f\u8bbf\u95ee\u6b21\u6570\uff1a open_file_cache_min_uses number; \u9ed8\u8ba4\uff1aopen_file_cache_min_uses 1; \u4e0eopen_file_cache\u4e2d\u7684inactive\u53c2\u6570\u914d\u5408\u4f7f\u7528\u3002\u5982\u679c\u5728inactive\u6307\u5b9a\u7684\u65f6\u95f4\u6bb5\u5185\uff0c\u8bbf\u95ee\u6b21\u6570\u8d85\u8fc7\u4e86open_file_cache_min_uses\u6307\u5b9a\u7684\u6700\u5c0f\u6b21\u6570\uff0c\u90a3\u4e48\u5c06\u4e0d\u4f1a\u88ab\u6dd8\u6c70\u51fa\u7f13\u5b58 \u68c0\u9a8c\u7f13\u5b58\u4e2d\u5143\u7d20\u6709\u6548\u6027\u7684\u9891\u7387\uff1a open_file_cache_valid time; \u9ed8\u8ba4\uff1aopen_file_cache_valid 60s; \u9ed8\u8ba4\u4e3a\u6bcf60\u79d2\u68c0\u67e5\u4e00\u6b21\u7f13\u5b58\u4e2d\u7684\u5143\u7d20\u662f\u5426\u4ecd\u6709\u6548 9.\u5bf9\u5ba2\u6237\u7aef\u8bf7\u6c42\u7684\u7279\u6b8a\u5904\u7406 \ud83d\udc1f \u5ffd\u7565\u4e0d\u5408\u6cd5\u7684HTTP\u5934\u90e8\uff1a ignore_invalid_headers on|off; \u9ed8\u8ba4\uff1aignore_invalid_headers off; off\u8868\u793a\u5141\u8bb8\u4e0d\u5408\u6cd5\u7684\u8bf7\u6c42\u5934 HTTP\u5934\u90e8\u662f\u5426\u5141\u8bb8\u4e0b\u5212\u7ebf\uff1a underscores_in_headers on|off; \u9ed8\u8ba4\uff1aunderscores_in_headers off; off\u8868\u793a\u4e0d\u5141\u8bb8\u6709\u4e0b\u5212\u7ebf \u5bf9If-Modified-Since\u5934\u90e8\u7684\u5904\u7406\u7b56\u7565\uff1a if_modified_since[off|exact|before]; \u9ed8\u8ba4\uff1aif_modified_since exact; \u4e0a\u6b21\u8bf7\u6c42\u83b7\u53d6\u5185\u5bb9\u7684\u65f6\u95f4 \u6587\u4ef6\u672a\u627e\u5230\u65f6\u662f\u5426\u8bb0\u5f55\u5230error\u65e5\u5fd7\uff1a log_not_found on|off; \u9ed8\u8ba4\uff1alog_not_found on; \u5408\u5e76\u8bf7\u6c42\u4e2d\u76f8\u90bb\u7684/\uff1a merge_slashes on|off; \u9ed8\u8ba4\uff1amerge_slashes on; DNS\u89e3\u6790\u5730\u5740\uff1a resolver address...; DNS\u89e3\u6790\u7684\u8d85\u65f6\u65f6\u95f4\uff1a resolver_timeout time; \u9ed8\u8ba4\uff1aresolver_timeout 30s;","title":"nginx\u4f7f\u7528\u8bb0\u5f55"},{"location":"blog/2021/12/nginx_record/#nginx\u4f7f\u7528\u8bb0\u5f55","text":"Abstract \u4ec5\u505a\u7b14\u8bb0\uff0c\u4e3a\u4e86\u6709\u4e2a\u5c0f\u5c0f\u5370\u8c61\u3002","title":"nginx\u4f7f\u7528\u8bb0\u5f55"},{"location":"blog/2021/12/nginx_record/#\u4e00\u5b89\u88c5\u4f9d\u8d56\u5e93","text":"sudo pacman -S wget gcc-c++ ncurses ncurses-devel cmake make perl bison openssl openssl-devel \\ gcc* libxml2 libxml2-devel curl-devel libjpeg* libpng* freetype* autoconf automake zlib* fiex* \\ libxml* libmcrypt* libtool-ltdl-devel* libaio libaio-devel bzr libtool","title":"\u4e00\u3001\u5b89\u88c5\u4f9d\u8d56\u5e93"},{"location":"blog/2021/12/nginx_record/#\u4e8cconfigure\u914d\u7f6e","text":"\u4f7f\u7528 configure \u6307\u5b9a\u914d\u7f6e\u9879\uff0c\u53ef\u4ee5\u7528 ./configure --help \u67e5\u770b\uff0c\u5bf9\u5e94\u53c2\u6570\u5206\u4e3a\u56db\u5927\u7c7b\uff1a","title":"\u4e8c\u3001configure\u914d\u7f6e"},{"location":"blog/2021/12/nginx_record/#1\u8def\u5f84\u76f8\u5173\u53c2\u6570","text":"--prefix=path \uff1a\u5b89\u88c5\u7684\u6839\u76ee\u5f55\uff0c\u7f3a\u7701\u9ed8\u8ba4\u76ee\u5f55\u4e3a\uff1a /usr/local/nginx \uff0c\u8be5\u76ee\u5f55\u6307\u4e0b\u9762\u51fa\u73b0\u5230\u7684 \uff0cbulingbuling\u3002 --sbin-path=path \uff1anginx\u76f8\u5173\u4e8c\u8fdb\u5236\u6587\u4ef6\u8def\u5f84\uff0c <prefix>/sbin/nginx --conf-path=path \uff1anginx\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff0c <prefix>/conf/nginx.conf --error-log-path=PATH \uff1aerror\u65e5\u5fd7\u6587\u4ef6\u8def\u5f84\uff0c <prefix>/logs/error.log --pid-path=PATH \uff1apid\u6587\u4ef6\u7684\u5b58\u653e\u8def\u5f84\uff0c\u6587\u4ef6\u4ee5ascii\u7801\u5b58\u653enginx master\u8fdb\u7a0bid\uff0cmaster\u4e4b\u540e\u4f1a\u8bb2\u5230\uff08\u975e\u5e38\u91cd\u8981\uff09\uff0c <prefix>/logs/nginx.pid --lock-path=PATH \uff1alock\u6587\u4ef6\u7684\u5b58\u653e\u8def\u5f84\uff0c <prefix>/logs/nginx.lock --builddir=DIR \uff1aconfigura\u547d\u4ee4\u6267\u884c\u548c\u7a0b\u5e8f\u7f16\u8bd1\u65f6\u4ea7\u751f\u4e34\u65f6\u6587\u4ef6\u7684\u5b58\u653e\u76ee\u5f55\uff0c <prefix>/objs --with-perl_modules_path=PATH \uff1aperl module\u5b58\u653e\u8def\u5f84 --with-perl=PATH \uff1aperl binary\u5b58\u653e\u8def\u5f84\uff0c\u6267\u884cperl\u811a\u672c\u9700\u8981\u6b64\u8bbe\u7f6e --http-log-path=PATH \uff1aaccess\u65e5\u5fd7\u5b58\u653e\u8def\u5f84\uff0c\u4f1a\u8bb0\u5f55\u6bcf\u4e2ahttp\u8bf7\u6c42\u7684\u8bbf\u95ee\u8bb0\u5f55\uff0c <prefix>/logs/access.log --http-client-body-temp-path=PATH \uff1a\u4fdd\u5b58http\u8bf7\u6c42\u5305\u4f53\u7b49\u4e34\u65f6\u5185\u5bb9\uff0c <prefix>/client_body_temp --http-proxy-temp-path=PATH \uff1a\u505a\u53cd\u5411\u4ee3\u7406\u65f6\uff0c\u4e0a\u6e38\u670d\u52a1\u5668\u7684http\u8bf7\u6c42\u5305\u4f53\uff0c <prefix>/proxy_temp --http-fastcgi-temp-path=PATH \uff1afastcgi\u4e34\u65f6\u6587\u4ef6\u5b58\u653e\u76ee\u5f55\uff0c <prefix>/fastcgi_temp --http-uwsgi-temp-path=PATH \uff1auwsgi\u4e34\u65f6\u6587\u4ef6\u5b58\u653e\u76ee\u5f55\uff0c <prefix>/uwsgi_temp --http-scgi-temp-path=PATH \uff1ascgi\u4e34\u65f6\u6587\u4ef6\u5b58\u653e\u76ee\u5f55\uff0c <prefix>/scgi_temp","title":"1.\u8def\u5f84\u76f8\u5173\u53c2\u6570\uff1a"},{"location":"blog/2021/12/nginx_record/#2\u7f16\u8bd1\u76f8\u5173\u53c2\u6570","text":"--with-cc=PATH \uff1ac\u7f16\u8bd1\u5668\u7684\u8def\u5f84 --with-cpp=PATH \uff1ac\u9884\u7f16\u8bd1\u5668\u7684\u8def\u5f84 --with-cc-opt=OPTIONS \uff1a\u5728nginx\u7f16\u8bd1\u65f6\u6307\u5b9a\u4e00\u4e9b\u7f16\u8bd1\u9009\u9879 --with-ld-opt=OPTIONS \uff1a\u52a0\u5165\u751f\u6210\u4e8c\u8fdb\u5236\u6267\u884c\u6587\u4ef6\u524d\u7684\u4e00\u4e9b\u6307\u5b9a\u7684\u94fe\u63a5\u6587\u4ef6 --with-cpu-opt=CPU \uff1a\u6307\u5b9acpu\u5904\u7406\u5668\u67b6\u6784\uff0cpentium, pentiumpro, pentium3, pentium4, athlon, opteron, amd64, sparc32, sparc64, ppc64","title":"2.\u7f16\u8bd1\u76f8\u5173\u53c2\u6570\uff1a"},{"location":"blog/2021/12/nginx_record/#3\u76f8\u5173\u5e38\u7528\u8f6f\u4ef6\u5e93\u914d\u7f6e\u53c2\u6570","text":"pcre\u5e93 --without-pcre \uff1a\u8bbe\u7f6e\u914d\u7f6e\u6587\u4ef6\u4e2d\u4e0d\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f --with-pcre \uff1a\u5f3a\u5236\u4f7f\u7528pcre\u5e93 --with-pcre=DIR \uff1a\u6307\u5b9apcre\u5e93\u7684\u6e90\u7801\u76ee\u5f55\uff0c\u7f16\u8bd1nginx\u65f6\u8fdb\u5165\u8be5\u76ee\u5f55\u7f16\u8bd1pcre --with-pcre-opt=OPTIONS \uff1a\u7f16\u8bd1pcre\u65f6\u6307\u5b9a\u7f16\u8bd1\u9009\u9879 openssl\u5e93 --with-openssl=DIR \uff1a\u6307\u5b9aopenssl\u5e93\u7684\u6e90\u7801\u76ee\u5f55\uff0c\u7f16\u8bd1nginx\u65f6\u8fdb\u5165\u8be5\u76ee\u5f55\u7f16\u8bd1openssl\u3002\u5982\u9700\u8981https\u652f\u6301\uff0c\u9700\u8981\u5b89\u88c5\u8be5\u5e93 --with-openssl-opt=OPTIONS \uff1a\u7f16\u8bd1openssl\u65f6\u6307\u5b9a\u7f16\u8bd1\u9009\u9879 atomic\u539f\u5b50\u5e93 --with-libatomic \uff1a\u5f3a\u5236\u4f7f\u7528atomic\u5e93 --with-libatomic=DIR \uff1aatomic\u5e93\u6240\u5728\u4f4d\u7f6e \u6563\u5217\u51fd\u6570\u5e93 --with-MD5=DIR \uff1a\u6307\u5b9amd5\u5e93\u6e90\u7801\u76ee\u5f55\uff0c\u7f16\u8bd1nginx\u65f6\u8fdb\u5165\u8be5\u76ee\u5f55\u7f16\u8bd1md5\u3002\uff08\u6ca1\u7279\u6b8a\u9700\u6c42\uff0c\u53ef\u7528nginx\u81ea\u5e26\u7684md5\u7b97\u6cd5\uff09 --with-MD5-opt=OPTIONS \uff1a\u7f16\u8bd1md5\u65f6\u6307\u5b9a\u7f16\u8bd1\u9009\u9879 --with-MD5-asm \uff1a\u4f7f\u7528md5\u7684\u6c47\u7f16\u6e90\u7801 --with-SHA1=DIR \uff1a\u6307\u5b9aSHA1\u5e93\u6e90\u7801\u76ee\u5f55\uff0c\u7f16\u8bd1nginx\u65f6\u8fdb\u5165\u8be5\u76ee\u5f55\u7f16\u8bd1SHA1\u3002\uff08openssl\u6709sha1\u7684\u5b9e\u73b0\uff0c\u5df2\u7ecf\u5b89\u88c5openssl\u76f4\u63a5\u7528\uff09 --with-SHA1-opt=OPTIONS \uff1a\u7f16\u8bd1SHA1\u65f6\u6307\u5b9a\u7f16\u8bd1\u9009\u9879 --with-SHA1-asm \uff1a\u4f7f\u7528SHA1\u7684\u6c47\u7f16\u6e90\u7801 zlib\u5e93 --with-zlib=DIR \uff1a\u6307\u5b9azlib\u5e93\u6e90\u7801\u76ee\u5f55\uff0c\u7f16\u8bd1nginx\u65f6\u8fdb\u5165\u8be5\u76ee\u5f55\u7f16\u8bd1zlib\u3002\uff08\u9700\u8981gzip\u538b\u7f29\uff0c\u5c31\u9700\u8be5\u5e93\u652f\u6301\uff09 --with-zlib-opt=OPTIONS \uff1a\u7f16\u8bd1zlib\u65f6\u6307\u5b9a\u7f16\u8bd1\u9009\u9879 --with-zlib-asm=CPU \uff1a\u6307\u5b9a\u5bf9\u7279\u5b9acpu\u804c\u4e1azlib\u6c47\u7f16\u4f18\u5316\u529f\u80fd\uff0cpentium, pentiumpro\u3002 \u3002\u3002\u3002","title":"3.\u76f8\u5173\uff08\u5e38\u7528\uff09\u8f6f\u4ef6\u5e93\u914d\u7f6e\u53c2\u6570\uff1a"},{"location":"blog/2021/12/nginx_record/#4\u6a21\u5757\u76f8\u5173\u53c2\u6570\u53c8\u5206\u4e3a\u4e94\u5927\u6a21\u5757","text":"\u4e8b\u4ef6\u6a21\u5757\uff08\u5177\u4f53\u4e8b\u4ef6\u9a71\u52a8\u7279\u70b9\uff0c\u53e6\u8bf4\uff09 --with-rtsig_module \uff1a\u4f7f\u7528rtsig module\u5904\u7406\u4e8b\u4ef6\u9a71\u52a8 --with-select_module \uff1a\u4f7f\u7528select \u591a\u8def\u590d\u7528module\u5904\u7406\u4e8b\u4ef6\u6e20\u9053 --without-select_module \uff1a\u4e0d\u5b89\u88c5select module --with-poll_module \uff1a\u4f7f\u7528poll module\u5904\u7406\u4e8b\u4ef6\u9a71\u52a8 --without-poll_module \uff1a\u4e0d\u5b89\u88c5poll module --with-aio_module \uff1a\u4f7f\u7528aio\u5904\u7406\u4e8b\u4ef6\u9a71\u52a8\uff0c\u53ea\u80fd\u518dfreebsd\u7cfb\u7edf\u4e2d\u4f7f\u7528 \u9ed8\u8ba4\u5b89\u88c5\u8fdbhttp\u6a21\u5757\uff08nginx\u5b89\u88c5\u65f6\u9ed8\u8ba4\u5b89\u88c5\u7684http\u76f8\u5173\u529f\u80fd\uff0c\u5982\u679c\u4e0d\u9700\u8981\u5c31\u7528 --without-http-xxx \u53bb\u9664\uff09 --without-http_chatset_module \uff1a\u4e0d\u5b89\u88c5http chatset\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u5c06\u670d\u52a1\u5668\u53d1\u51fa\u7684http\u54cd\u5e94\u91cd\u7f16\u7801 --without-http_gzip_module \uff1a\u4e0d\u5b89\u88c5gzip\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u5bf9\u54cd\u5e94\u5185\u5bb9\u8fdb\u884c\u538b\u7f29 --without-http_ssi_module \uff1a\u4e0d\u5b89\u88c5ssi\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u5728\u54cd\u5e94\u4e2d\u52a0\u5165\u7279\u5b9a\u5185\u5bb9 --without-http_userid_module \uff1a\u4e0d\u5b89\u88c5userid\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u6839\u636e\u8bf7\u6c42\u5934\u7684\u5b57\u6bb5\u4fe1\u606f\u8fdb\u884c\u7528\u6237\u8ba4\u8bc1\uff0c\u786e\u5b9a\u8bf7\u6c42\u662f\u5426\u5408\u6cd5 --without-http_access_module \uff1a\u4e0d\u5b89\u88c5access\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u6839\u636eip\u663e\u793a\u5ba2\u6237\u7aef\u8bbf\u95ee --without-http_auth_basic_module \uff1a\u4e0d\u5b89\u88c5auth basic\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u63d0\u9ad8\u7b80\u5355\u7684\u7528\u6237\u540d\u3001\u5bc6\u7801\u8ba4\u8bc1 --without-http_autoindex_module \uff1a\u4e0d\u5b89\u88c5autoindex\u6a21\u5757\uff0c\u6a21\u5757\u63d0\u4f9b\u7b80\u5355\u7684\u76ee\u5f55\u6d4f\u89c8\u529f\u80fd --without-http_geo_module \uff1a\u4e0d\u5b89\u88c5geo\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u6839\u636e\u4e0d\u540c\u5730\u533a\u54cd\u5e94\u4e0d\u540c\u5185\u5bb9 --without-http_map_module \uff1a\u4e0d\u5b89\u88c5map\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u521b\u5efakey-value\u6620\u5c04\u8868 --without-http_split_clients_module \uff1a\u4e0d\u5b89\u88c5split client\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u6839\u636e\u5ba2\u6237\u7aef\u4fe1\u606f\uff08ip\u3001header\u4fe1\u606f\u3001cookie\u7b49\uff09\u533a\u5206\u5904\u7406 --without-http_referer_module \uff1a\u4e0d\u5b89\u88c5referer\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u6839\u636e\u8bf7\u6c42\u7684referer\u5b57\u6bb5\u62d2\u7edd\u8bf7\u6c42 --without-http_rewrite_module \uff1a\u4e0d\u5b89\u88c5rewrite\u6a21\u5757\uff0c\u6a21\u5757\u63d0\u4f9b\u91cd\u5b9a\u5411\u529f\u80fd --without-http_proxy_module \uff1a\u4e0d\u5b89\u88c5proxy\u6a21\u5757\uff0c\u6a21\u5757\u63d0\u4f9b\u53cd\u4ee3\u7406\u529f\u80fd --without-http_fastcgi_module \uff1a\u4e0d\u5b89\u88c5fastcgi\u6a21\u5757\uff0c --without-http_uwsgi_module \uff1a\u4e0d\u5b89\u88c5uwsgi\u6a21\u5757\uff0c --without-http_scgi_module \uff1a\u4e0d\u5b89\u88c5scgi\u6a21\u5757\uff0c --without-http_memecached_module \uff1a\u4e0d\u5b89\u88c5memecached\u6a21\u5757\uff0c\u7f13\u5b58 --without-http_limit_zone_module \uff1a\u4e0d\u5b89\u88c5limit zone\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u9650\u5236ip\u5e76\u53d1\u8fde\u63a5\u6570\u91cf\uff0c\u6bd4\u5982\u8bbe\u7f6e\u4e00\u4e2aip\u53ea\u80fd\u4e00\u4e2a\u8fde\u63a5 --without-http_limit_req_module \uff1a\u4e0d\u5b89\u88c5limit req\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u9650\u5236ip\u5e76\u53d1\u8bf7\u6c42\u6570\u91cf --without-http_empty_gif_module \uff1a\u4e0d\u5b89\u88c5empty gif\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u5728\u63a5\u6536\u5230\u65e0\u6548\u8bf7\u6c42\u65f6\u8fd4\u56de\u4e00\u4e2a1*1\u50cf\u7d20\u7684\u56fe\u7247 --without-http_browser_module \uff1a\u4e0d\u5b89\u88c5browser\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u6839\u636e\u8bf7\u6c42\u4e2d\u7684user-agent\u5b57\u6bb5\u8bc6\u522b\u6d4f\u89c8\u5668 --without-http_upstream_ip_hash_module \uff1a\u4e0d\u5b89\u88c5upstream ip hash\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u5bf9ip\u8fdb\u884c\u54c8\u5e0c\uff0c\u8ba9\u8bf7\u6c42\u8f6c\u53d1\u7ed9\u5bf9\u5e94ip\u54cd\u5e94\uff0c\u8d1f\u8f7d\u5747\u8861\u7528\u3002 \u3002\u3002\u3002 \u4e0d\u9ed8\u8ba4\u5b89\u88c5\u8fdbhttp\u6a21\u5757\uff08nginx\u5b89\u88c5\u65f6\u9ed8\u8ba4\u4e0d\u4f1a\u5b89\u88c5\u7684http\u529f\u80fd\uff0c\u5982\u679c\u9700\u8981\u5c31\u7528 --with-http-xxx \u6dfb\u52a0\uff09 --with-http_ssl_module \uff1a\u5b89\u88c5ssl\u6a21\u5757\uff0c\u6a21\u5757\u63d0\u4f9bhttps\u670d\u52a1\uff08\u9700\u8981\u5728config\u8bbe\u7f6e\u65f6\u914d\u7f6eopenssl\u5e93\uff09 --with-http_realip_module \uff1a\u5b89\u88c5realip\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u4ece\u8bf7\u6c42header\u4e2d\u83b7\u53d6\u5ba2\u6237\u7aef\u771f\u6b63ip --with-http_addition_module \uff1a\u5b89\u88c5addition\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u5728\u54cd\u5e94\u5934\u90e8\u3001\u5c3e\u90e8\u6dfb\u52a0\u5185\u5bb9 --with-http_xslt_module \uff1a\u5b89\u88c5xslt\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u54cd\u5e94xml\u65f6\u52a0\u5165xsl\u6e32\u67d3\uff08\u9700\u8981\u5728config\u8bbe\u7f6e\u65f6\u914d\u7f6elibxml2\u5e93\u3001libxslt\u5e93\uff09 --with-http_image_filter_module \uff1a\u5b89\u88c5image filter\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u5c06\u56fe\u7247\uff08jpeg\u3001png\u3001gif\uff09\u5b9e\u65f6\u538b\u7f29\u4e3a\u6307\u5b9a\u5927\u5c0f\u8fdb\u884c\u54cd\u5e94\uff08libgd\u5e93\uff09 --with-http_geoip_module \uff1a\u5b89\u88c5geoip\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u6839\u636eip\u83b7\u53d6\u5bf9\u5e94\u5b9e\u9645\u5730\u7406\u4f4d\u7f6e --with-http_sub_module \uff1a\u5b89\u88c5sub\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u66ff\u6362\u54cd\u5e94\u7684\u6307\u5b9a\u5b57\u7b26\u4e32 --with-http_dav_module \uff1a\u5b89\u88c5ssl\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u8ba9nginx\u652f\u6301webdav\u6807\u51c6\uff0c\u4f7f\u7528put\u3001delete\u3001copy\u3001move\u7b49\u8bf7\u6c42 --with-http_mp4_module \uff1a\u5b89\u88c5mp4\u6a21\u5757 --with-http_gzip_static_module \uff1a\u5b89\u88c5gzip static\u6a21\u5757\uff0c\u4e0d\u540cgzip\u6a21\u5757\uff0cstatic\u7684\u53ef\u4ee5\u5728\u8fdb\u884cgzip\u538b\u7f29\u524d\u68c0\u67e5\u662f\u5426\u5b58\u5728\u8be5\u54cd\u5e94\u7684\u7f13\u5b58\uff0c\u51cf\u5c11cpu\u538b\u7f29\u538b\u529b --with-http_random_index_module \uff1a\u5b89\u88c5random index\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u5728\u5ba2\u6237\u7aef\u8bbf\u95ee\u67d0\u76ee\u5f55\u65f6\uff0c\u968f\u673a\u8fd4\u56de\u8be5\u76ee\u5f55\u4e2d\u67d0\u4e2a\u6587\u4ef6 --with-http_secure_link_module \uff1a\u5b89\u88c5secure link\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u9a8c\u8bc1\u8bf7\u6c42\u662f\u5426\u6709\u6548 --with-http_degradation_module \uff1a\u5b89\u88c5degradation\u6a21\u5757\uff0c\u6a21\u5757\u9488\u5bf9\u7279\u6b8a\u7cfb\u7edf\u505a\u8c03\u7528\u4f18\u5316\uff08\u975elinux\uff09 --with-http_sub_status_module \uff1a\u5b89\u88c5sub status\u6a21\u5757\uff0c\u6a21\u5757\u53ef\u4ee5\u63d0\u4f9bnginx\u8fd0\u884c\u65f6\u6027\u80fd\u7edf\u8ba1\u4fe1\u606f --with-google_perftools_module \uff1a\u5b89\u88c5google perftool\u6a21\u5757\uff0c\u6a21\u5757\u63d0\u4f9b\u8c37\u6b4c\u6027\u80fd\u6d4b\u8bd5\u5de5\u5177 \u3002\u3002\u3002 mail\u6a21\u5757 --with-mail \uff1a\u5b89\u88c5\u90ae\u4ef6\u670d\u52a1\u5668\u7684\u53cd\u4ee3\u6a21\u5757\uff0c\u4f7f\u7528imap\u3001pop3\u3001smtp\u7b49\u534f\u8bae --with-mail_ssl_module \uff1a\u6a21\u5757\u53ef\u4ee5\u8ba9\u534f\u8bae\u57fa\u4e8ehttps\u4f7f\u7528\uff08openssl\u5e93\uff09 --without-mail_imap_module \uff1a\u4e0d\u4f7f\u7528imap\u534f\u8bae --without-mail_pop3_module \uff1a\u4e0d\u4f7f\u7528pop3\u534f\u8bae --without-mail_smtp_module \uff1a\u4e0d\u4f7f\u7528smtp\u534f\u8bae \u5176\u4ed6 --with-debug \uff1anginx\u7814\u7a76\u3001\u8c03\u8bd5\u7528 --add-module=PATH \uff1a\u5728nginx\u4e2d\u52a0\u5165\u7b2c\u4e09\u65b9\u6a21\u5757 --without-http \uff1a\u7981\u7528http\u670d\u52a1 --without-http-cache \uff1a\u7981\u7528http\u7684\u7f13\u5b58\u670d\u52a1 --without-file-aio \uff1a\u6587\u4ef6\u5f02\u6b65io\u5904\u7406 --with-ipv6 \uff1a\u652f\u6301ipv6 --user=USER \uff1a\u6307\u5b9aworker\u8fdb\u7a0b\u8fd0\u884c\u65f6\u6240\u5c5e\u7684\u7528\u6237\uff08\u975eroot\uff09 --group=GROUP \uff1a\u6307\u5b9aworker\u8fdb\u7a0b\u8fd0\u884c\u65f6\u6240\u5c5e\u7684\u7528\u6237\u7ec4","title":"4.\u6a21\u5757\u76f8\u5173\u53c2\u6570\uff1a\u53c8\u5206\u4e3a\u4e94\u5927\u6a21\u5757"},{"location":"blog/2021/12/nginx_record/#\u4e09\u7f16\u8bd1\u5b89\u88c5","text":"\u8fdb\u5165nginx\u76ee\u5f55 \u914d\u7f6e\uff1a ./configure [options] \u7f16\u8bd1\uff1a make \u5c06\u7f16\u8bd1\u597d\u7684\u4e8c\u8fdb\u5236\u8fd0\u884c\u6587\u4ef6\u590d\u5236\u5230\u914d\u7f6e\u597d\u7684\u76ee\u5f55\uff1a make install \u8fd9\u91cc\u91cd\u70b9\u4ecb\u7ecd\u4e0bconfigure\u914d\u7f6e\uff1a \u6839\u636e\u524d\u9762\u7684 configure\u914d\u7f6e \u9009\u62e9\u81ea\u5df1\u9700\u8981\u7684\u5e93\u3001\u529f\u80fd\uff0c\u5148\u4f7f\u7528\u7cfb\u7edf\u5305\u7ba1\u7406\u5668\u5b89\u88c5\u4f9d\u8d56\u5e93\uff0c\u518d\u914d\u7f6econfigure\u3002 \u4e0b\u9762\u5c55\u793a\u51e0\u4e2a\u793a\u4f8b\uff1a","title":"\u4e09\u3001\u7f16\u8bd1\u5b89\u88c5"},{"location":"blog/2021/12/nginx_record/#\u793a\u4f8ba","text":"cd /home/shafish/software wget https://nginx.org/download/nginx-1.20.2.tar.gz tar -zxvf nginx-1.20.2.tar.gz cd nginx-1.20.2 # pcre \u91cd\u5b9a\u5411\u65f6\u4f7f\u7528\u6b63\u5219\u5339\u914d # openssl \u4f7f\u7528https sudo pacman -S pcre* openssl* ./configure --prefix = /usr/local/nginx-1.20.2 \\ # \u6307\u5b9a\u5b89\u88c5\u7684\u6839\u76ee\u5f55 --with-http_ssl_module \\ # \u5b89\u88c5ssl --with-http_spdy_module \\ # SPDY\u53ef\u4ee5\u7f29\u77ed\u7f51\u9875\u7684\u52a0\u8f7d\u65f6\u95f4 --with-http_stub_status_module \\ # nginx\u76d1\u63a7\u6a21\u5757 --with-pcre \\ # \u542f\u7528pcre sudo make sudo make install","title":"\u793a\u4f8ba"},{"location":"blog/2021/12/nginx_record/#\u793a\u4f8bb","text":"cd /home/shafish/software wget https://nginx.org/download/nginx-1.20.2.tar.gz tar -zxvf nginx-1.20.2.tar.gz cd nginx-1.20.2 # \u5b89\u88c5openssl\u5e93 sudo pacman -S openssl* # \u4e0b\u8f7d\u7b2c\u4e09\u65b9\u5e93\u7684\u6e90\u7801\uff0c\u5bf9\u5e93\u8fdb\u884c\u7f16\u8bd1\u4f7f\u7528 wget http://labs.frickle.com/files/ngx_cache_purge-1.3.tar.gz tar -xzvf ngx_cache_purge-1.3.tar.gz ./configure --prefix = /usr/local/nginx-1.20.2 \\ # \u6307\u5b9a\u5b89\u88c5\u7684\u6839\u76ee\u5f55 \u2013with-http_stub_status_module \\ # \u542f\u7528 nginx \u72b6\u6001\u6a21\u5757 \u2013with-http_ssl_module \\ # \u542f\u7528 SSL \u6a21\u5757 \u2013with-http_realip_module \\ # \u542f\u7528 realip \u6a21\u5757\uff08\u5c06\u7528\u6237 IP \u8f6c\u53d1\u7ed9\u540e\u7aef\u670d\u52a1\u5668\uff09 \u2013add-module = ./ngx_cache_purge-1.3 # \u6dfb\u52a0\u7f13\u5b58\u6e05\u9664\u6269\u5c55\u6a21\u5757 sudo make sudo make install","title":"\u793a\u4f8bb"},{"location":"blog/2021/12/nginx_record/#\u793a\u4f8bc","text":"--prefix = /usr/local/nginx --user = www --group = www --with-http_stub_status_module --with-http_v2_module --with-http_ssl_module --with-http_gzip_static_module --with-http_realip_module --with-http_flv_module --with-http_mp4_module --with-openssl = ../openssl-1.0.2p --with-pcre = ../pcre-8.42 --with-pcre-jit --with-ld-opt = -ljemalloc","title":"\u793a\u4f8bc"},{"location":"blog/2021/12/nginx_record/#\u56db\u4e3a\u5df2\u5b89\u88c5\u7684nginx\u52a8\u6001\u6dfb\u52a0\u6a21\u5757","text":"\u5b89\u597dnginx\u540e\uff0c\u8fc7\u4e2a\u51e0\u4e2a\u6708\uff0c\u518d\u52a0\u591a\u51e0\u4e2a\u9700\u6c42\uff0c\u5bf9\u5427\uff0c\u4f60\u61c2\u7684\u3002 nginx\u6dfb\u52a0\u6a21\u5757\u8fd8\u662f\u8981\u91cd\u65b0\u7f16\u8bd1\u624d\u884c\u3002","title":"\u56db\u3001\u4e3a\u5df2\u5b89\u88c5\u7684Nginx\u52a8\u6001\u6dfb\u52a0\u6a21\u5757"},{"location":"blog/2021/12/nginx_record/#\u52a0ngx_http_google_filter_module","text":"# \u8fdb\u5165nginx\u5b89\u88c5\u76ee\u5f55\uff0c\u770b\u4e0a\u9762\u793a\u4f8ba b cd cd /home/shafish/software/nginx-1.20.2 # \u4e0b\u8f7d\u9700\u8981\u7684\u6a21\u5757\u6e90\u7801 git clone https://github.com/cuber/ngx_http_google_filter_module # \u67e5\u770b\u5b89\u88c5\u65f6\u7684\u914d\u7f6e ./nginx -V # ./configure --prefix=/usr/local/nginx-1.20.2 \u2013with-http_stub_status_module \u2013with-http_ssl_module \u2013with-http_realip_module \u2013add-module=./ngx_cache_purge-1.3 # \u52a0\u5165\u65b0\u6a21\u5757\u914d\u7f6e ./configure --prefix = /usr/local/nginx-1.20.2 \u2013with-http_stub_status_module \u2013with-http_ssl_module \u2013with-http_realip_module \u2013add-module = ./ngx_cache_purge-1.3 \\ --add-module = /usr/local/nginx/ngx_http_google_filter_module # \u6267\u884c\u7f16\u8bd1 sudo make # \u66ff\u6362nginx\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u6728\u6709make install\u54df mv ./sbin/nginx ./sbin/nginx.bak cp ./objs/nginx ./sbin/ ./nginx -V","title":"\u52a0ngx_http_google_filter_module"},{"location":"blog/2021/12/nginx_record/#\u4e94nginx\u547d\u4ee4","text":"\u9ed8\u8ba4\u5b89\u88c5\u8def\u5f84\uff1a --prefix=/usr/local/nginx \u542f\u52a8nginx\uff1a /usr/local/nginx/sbin/nginx \uff08\u9ed8\u8ba4\u52a0\u8f7d\u7684\u662f/usr/local/nginx/conf/nginx.conf\u914d\u7f6e\uff09 \u542f\u52a8\u65f6\u6307\u5b9a\u914d\u7f6e\uff1a /usr/local/nginx/sbin/nginx -c /tmp/nginx.conf \uff08-c\u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff09 \u6d4b\u8bd5\u914d\u7f6e\u6587\u4ef6\u662f\u5426\u6b63\u786e\uff1a /usr/local/nginx/sbin/nginx -t \u663e\u793a\u7f16\u8bd1\u9636\u6bb5\u7528\u7684\u53c2\u6570\uff1a /usr/local/nginx/sbin/nginx -V \u201c\u4f18\u96c5\u201d\u5730\u505c\u6b62\u670d\u52a1\uff1a /usr/local/nginx/sbin/nginx -s quit \u8fd0\u884c\u65f6\u91cd\u8f7d\u914d\u7f6e\u6587\u4ef6\uff1a /usr/local/nginx/sbin/nginx -s reload \u4e0d\u91cd\u542f\u5347\u7ea7nginx\u7248\u672c\uff1a","title":"\u4e94\u3001nginx\u547d\u4ee4"},{"location":"blog/2021/12/nginx_record/#\u516dnginx\u57fa\u672c\u7684\u914d\u7f6e","text":"","title":"\u516d\u3001nginx\u57fa\u672c\u7684\u914d\u7f6e"},{"location":"blog/2021/12/nginx_record/#1\u7528\u4e8e\u8c03\u8bd5\u95ee\u9898\u5b9a\u4f4d\u7684\u914d\u7f6e","text":"\u914d\u7f6e\u9879\u76ee \u8bf4\u660e daemon on|off; \u662f\u5426\u4ee5\u5b88\u62a4\u8fdb\u7a0b\u65b9\u5f0f\u8fd0\u884cNginx\uff08\u9ed8\u8ba4on\uff09 master_process on|off; \u662f\u5426\u4ee5master/worker\u65b9\u5f0f\u5de5\u4f5c\uff08\u9ed8\u8ba4on\uff09 error_log /path/file level; \u5927\u4e8e\u6216\u7b49\u4e8e\u8be5\u7ea7\u522b\u7684\u65e5\u5fd7\u90fd\u4f1a\u88ab\u8f93\u51fa\u5230/path/file\u6587\u4ef6\u4e2d\u3002level\u53d6\u503c\uff1adebug\u3001info\u3001notice\u3001warn\u3001error\u3001crit\u3001alert\u3001emerg debug_connection[IP|CIDR] \u5fc5\u987b\u653e\u5728events{...}\u4e2d\u624d\u6709\u6548\uff0c\u4ec5\u4ec5\u6765\u81ea\u89c4\u5b9a\u7684ip\u8bf7\u6c42\u624d\u4f1a\u8f93\u51fadebug\u65e5\u5fd7 worker_rlimit_core size; \u9650\u5236coredump\u6838\u5fc3\u8f6c\u50a8\u6587\u4ef6\u7684\u5927\u5c0f working_directory path; \u6307\u5b9acoredump\u6587\u4ef6\u751f\u6210\u76ee\u5f55","title":"1.\u7528\u4e8e\u8c03\u8bd5\u3001\u95ee\u9898\u5b9a\u4f4d\u7684\u914d\u7f6e"},{"location":"blog/2021/12/nginx_record/#2\u8fd0\u884c\u5fc5\u5907\u914d\u7f6e","text":"\u914d\u7f6e\u9879\u76ee \u8bf4\u660e env VAR|VAR=VALUE \u5b9a\u4e49\u73af\u5883\u53d8\u91cf(env TESTPATH=/tmp/;) include/path/file; \u5d4c\u5165\u5176\u4ed6\u914d\u7f6e\u6587\u4ef6(\u76f8\u5bf9\u76ee\u5f55\uff1a\u5373nginx.conf\u6240\u5728\u7684\u76ee\u5f55) pid path/file; \u4fdd\u5b58master\u8fdb\u7a0bid\u7684pid\u6587\u4ef6\u8def\u5f84 user username[groupname]; Nginx worker\u8fdb\u7a0b\u8fd0\u884c\u7684\u7528\u6237\u53ca\u7528\u6237\u7ec4 worker_rlimit_nofile limit; \u6307\u5b9aNginx worker\u8fdb\u7a0b\u53ef\u4ee5\u6253\u5f00\u7684\u6700\u5927\u53e5\u67c4\u63cf\u8ff0\u7b26\u4e2a\u6570 worker_rlimit_sigpending limit; \u8bbe\u7f6e\u6bcf\u4e2a\u7528\u6237\u53d1\u5f80Nginx\u7684\u4fe1\u53f7\u961f\u5217\u7684\u5927\u5c0f","title":"2.\u8fd0\u884c\u5fc5\u5907\u914d\u7f6e"},{"location":"blog/2021/12/nginx_record/#3\u6027\u80fd\u4f18\u5316\u914d\u7f6e","text":"\u914d\u7f6e\u9879\u76ee \u8bf4\u660e worker_processes number; Nginx worker\u8fdb\u7a0b\u4e2a\u6570(\u4e00\u822c\u8ddf\u6838\u6570\u76f8\u540c\u5373\u53ef) worker_cpu_affinity cpumask[cpumask...] [Linux]\u7ed1\u5b9aNginx worker\u8fdb\u7a0b\u5230\u6307\u5b9a\u7684CPU\u5185\u6838 ssl_engine device; SSL\u786c\u4ef6\u52a0\u901f(openssl engine -t\u67e5\u770b\u662f\u5426\u6709\u52a0\u901f\u8bbe\u5907) timer_resolution t; \u7cfb\u7edf\u8c03\u7528gettimeofday\u7684\u6267\u884c\u9891\u7387(\u65f6\u95f4\u80fd\u51c6\u4e00\u70b9) worker_priority nice; Nginx worker\u8fdb\u7a0b\u4f18\u5148\u7ea7\u8bbe\u7f6e\uff0c\u201320~+19\uff0c\u201320\u662f\u6700\u9ad8\u4f18\u5148\u7ea7\uff0c+19\u662f\u6700\u4f4e\u4f18\u5148\u7ea7 worker_rlimit_sigpending limit; \u8bbe\u7f6e\u6bcf\u4e2a\u7528\u6237\u53d1\u5f80Nginx\u7684\u4fe1\u53f7\u961f\u5217\u7684\u5927\u5c0f","title":"3.\u6027\u80fd\u4f18\u5316\u914d\u7f6e"},{"location":"blog/2021/12/nginx_record/#4\u4e8b\u4ef6\u7c7b\u578b\u914d\u7f6e","text":"\u914d\u7f6e\u9879\u76ee \u8bf4\u660e accept_mutex[on|off]; \u9ed8\u8ba4on\uff0c\u662f\u5426\u6253\u5f00accept\u9501\uff0c\u8d1f\u8f7d\u5747\u8861\u9501 lock_file path/file; lock\u6587\u4ef6\u7684\u8def\u5f84\uff0c\u6587\u4ef6\u9501 accept_mutex_delay Nms; \u4f7f\u7528accept\u9501\u540e\u5230\u771f\u6b63\u5efa\u7acb\u8fde\u63a5\u4e4b\u95f4\u7684\u5ef6\u8fdf\u65f6\u95f4\uff0c\u5982\u679c\u6709\u4e00\u4e2aworker\u8fdb\u7a0b\u8bd5\u56fe\u53d6accept\u9501\u800c\u6ca1\u6709\u53d6\u5230\uff0c\u5b83\u81f3\u5c11\u8981\u7b49accept_mutex_delay\u5b9a\u4e49\u7684\u65f6\u95f4\u95f4\u9694\u540e\u624d\u80fd\u518d\u6b21\u8bd5\u56fe\u53d6\u9501 multi_accept[on|off]; \u9ed8\u8ba4off\uff0c\u6279\u91cf\u5efa\u7acb\u65b0\u8fde\u63a5 use[kqueue|rtsig|epoll|/dev/poll|select|poll|eventport]; \u9009\u62e9\u4e8b\u4ef6\u6a21\u578b\uff0c\u9ed8\u8ba4\u4f1a\u81ea\u52a8\u4f7f\u7528\u6700\u9002\u5408\u7684\u4e8b\u4ef6\u6a21\u578b worker_connections number; \u6bcf\u4e2aworker\u7684\u6700\u5927\u8fde\u63a5\u6570","title":"4.\u4e8b\u4ef6\u7c7b\u578b\u914d\u7f6e"},{"location":"blog/2021/12/nginx_record/#\u4e03nginx-http\u6a21\u5757\u914d\u7f6e","text":"nginx\u4e3b\u8981\u9760ngx_http_core_module\u6a21\u5757\u5b9e\u73b0\u3002","title":"\u4e03\u3001nginx http\u6a21\u5757\u914d\u7f6e"},{"location":"blog/2021/12/nginx_record/#1\u6a21\u5757\u53d8\u91cf","text":"","title":"1.\u6a21\u5757\u53d8\u91cf"},{"location":"blog/2021/12/nginx_record/#2\u865a\u62df\u4e3b\u673a\u4e0e\u8bf7\u6c42\u7684\u5206\u53d1","text":"\u6bcf\u4e2aserver\u5757\u90fd\u662f\u4e00\u4e2a\u865a\u62df\u4e3b\u673a\u3002 \u76d1\u542c\u7aef\u53e3\uff1a listen address:port[default(deprecated in 0.8.21)|default_server|[backlog=num|rcvbuf=size|sndbuf=size|accept_filter=filter|deferred|bind|ipv6only=[on|off]|ssl]]; default/default_server \uff1a\u5c06\u6240\u5728\u7684server\u5757\u4f5c\u4e3anginx\u9ed8\u8ba4\u865a\u62df\u4e3b\u673a\uff0c\u5426\u5219\u9ed8\u8ba4\u662f\u9009\u914d\u7f6e\u4e2d\u7b2c\u4e00\u4e2aserver\u5757der\uff08\u5f53\u4e00\u4e2a\u8bf7\u6c42\u65e0\u6cd5\u5339\u914d\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u6240\u6709\u4e3b\u673a\u57df\u540d\u65f6\uff0c\u5c31\u4f1a\u9009\u7528\u9ed8\u8ba4\u7684\u865a\u62df\u4e3b\u673a\uff09\u3002 backlog=num \uff1a\u8868\u793aTCP\u4e2dbacklog\u961f\u5217\u7684\u5927\u5c0f\uff0c\u5982\u679cbacklog\u961f\u5217\u5df2\u6ee1\uff0c\u8fd8\u6709\u65b0\u7684\u5ba2\u6237\u7aef\u8bd5\u56fe\u901a\u8fc7\u4e09\u6b21\u63e1\u624b\u5efa\u7acbTCP\u8fde\u63a5\uff0c\u8fd9\u65f6\u5ba2\u6237\u7aef\u5c06\u4f1a\u5efa\u7acb\u8fde\u63a5\u5931\u8d25\u3002 rcvbuf=size \uff1a\u8bbe\u7f6e\u76d1\u542c\u53e5\u67c4\u7684SO_RCVBUF\u53c2\u6570\u3002 sndbuf=size \uff1a\u8bbe\u7f6e\u76d1\u542c\u53e5\u67c4\u7684SO_SNDBUF\u53c2\u6570\u3002 deferred \uff1a\u9002\u7528\u4e8e\u5927\u5e76\u53d1\uff0c\u5f53\u8bf7\u6c42\u6570\u636e\u6765\u4e34\u65f6\uff0cworker\u8fdb\u7a0b\u624d\u4f1a\u5f00\u59cb\u5904\u7406\u8fd9\u4e2a\u8fde\u63a5\u3002 bind \uff1a\u7ed1\u5b9a\u5f53\u524d\u7aef\u53e3/\u5730\u5740\u5bf9\uff0c\u540c\u65f6\u5bf9\u4e00\u4e2a\u7aef\u53e3\u76d1\u542c\u591a\u4e2a\u5730\u5740\u65f6\u624d\u4f1a\u751f\u6548\u3002 ssl \uff1a\u5728\u5f53\u524d\u76d1\u542c\u7684\u7aef\u53e3\u4e0a\u5efa\u7acb\u7684\u8fde\u63a5\u5fc5\u987b\u57fa\u4e8eSSL\u534f\u8bae\u3002 \u5728\u5f00\u59cb\u5904\u7406\u4e00\u4e2aHTTP\u8bf7\u6c42\u65f6\uff0cNginx\u4f1a\u53d6\u51faheader\u5934\u4e2d\u7684Host\uff0c\u4e0e\u6bcf\u4e2aserver\u4e2d\u7684server_name\u8fdb\u884c\u5339\u914d\uff0c\u4ee5\u6b64\u51b3\u5b9a\u5230\u5e95\u7531\u54ea\u4e00\u4e2aserver\u5757\u6765\u5904\u7406\u8fd9\u4e2a\u8bf7\u6c42\u3002 \u4e3b\u673a\u540d\u79f0\uff1a server_name name[...]; \u591a\u57df\u540d\u5bf9\u5e94\u4e00\u4e2a\u670d\u52a1\u5668ip\uff0c\u53ef\u4ee5\u6839\u636eserver\u5757\u4e2d\u5b9a\u4e49\u7684server_name\u6765\u5904\u7406\u5bf9\u5e94\u57df\u540d\u7684\u8bf7\u6c42\u3002 \u8bbe\u7f6e\u6563\u5217\u6876\u5360\u7528\u7684\u5185\u5b58\u5927\u5c0f\uff1a server_names_hash_bucket_size size; Nginx\u4f7f\u7528\u6563\u5217\u8868\u6765\u5b58\u50a8server name\uff0c\u63d0\u9ad8\u5feb\u901f\u5bfb\u627e\u5230\u76f8\u5e94server name\u7684\u80fd\u529b\u3002 server_names_hash_max_size \u9ed8\u8ba4\uff1a512\uff0c\u8d8a\u5927\uff0c\u6d88\u8017\u7684\u5185\u5b58\u5c31\u8d8a\u591a\uff0c\u4f46\u6563\u5217key\u7684\u51b2\u7a81\u7387\u5219\u4f1a\u964d\u4f4e\uff0cserver name\u68c0\u7d22\u901f\u5ea6\u4e5f\u66f4\u5feb\u3002 \u91cd\u5b9a\u5411\u4e3b\u673a\u540d\u79f0\u7684\u5904\u7406\uff1a server_name_in_redirect on|off; \u9ed8\u8ba4\uff1aon\uff0c\u8868\u793a\u5728\u91cd\u5b9a\u5411\u8bf7\u6c42\u65f6\u4f1a\u4f7f\u7528server_name\u91cc\u914d\u7f6e\u7684\u7b2c\u4e00\u4e2a\u4e3b\u673a\u540d\u4ee3\u66ff\u539f\u5148\u8bf7\u6c42\u4e2d\u7684Host\u5934\u90e8\u3002 uri\u8bf7\u6c42\u5339\u914d\uff1a location[=|~|~*|^~|@]/uri/{...} = \uff1a\u628aURI\u4f5c\u4e3a\u5b57\u7b26\u4e32\u8fdb\u884c\u5339\u914d\u3002 location = / { # \u53ea\u6709\u5f53\u7528\u6237\u8bf7\u6c42\u662f/\u65f6\uff0c\u624d\u4f1a\u4f7f\u7528\u8be5location\u4e0b\u7684\u914d\u7f6e \u2026 } ~ \uff1a\u8868\u793a\u5339\u914dURI\u65f6\u662f\u5b57\u6bcd\u5927\u5c0f\u5199\u654f\u611f\u7684\u3002 ~* \uff1a\u8868\u793a\u5339\u914dURI\u65f6\u5ffd\u7565\u5b57\u6bcd\u5927\u5c0f\u5199\u95ee\u9898\u3002 ^~ \uff1a\u8868\u793a\u5339\u914dURI\u65f6\u53ea\u9700\u8981\u5176\u524d\u534a\u90e8\u5206\u4e0euri\u53c2\u6570\u5339\u914d\u5373\u53ef\u3002 location ^~ /images/ { # \u4ee5/images/\u5f00\u59cb\u7684\u8bf7\u6c42\u90fd\u4f1a\u5339\u914d\u4e0a \u2026 } @ \uff1a\u8868\u793a\u4ec5\u7528\u4e8eNginx\u670d\u52a1\u5185\u90e8\u8bf7\u6c42\u4e4b\u95f4\u7684\u91cd\u5b9a\u5411\uff0c\u4e0d\u76f4\u63a5\u5904\u7406\u7528\u6237\u8bf7\u6c42\u3002 \u6b63\u5219\u8868\u8fbe\u5f0f \uff1a\u7528\u6b63\u5219\u5339\u914d\u5457\u3002 location ~* \\. ( gif | jpg | jpeg ) $ { # \u5339\u914d\u4ee5 .gif\u3001.jpg\u3001.jpeg\u7ed3\u5c3e\u7684\u8bf7\u6c42 \u2026 }","title":"2.\u865a\u62df\u4e3b\u673a\u4e0e\u8bf7\u6c42\u7684\u5206\u53d1"},{"location":"blog/2021/12/nginx_record/#3\u6587\u4ef6\u8def\u5f84\u7684\u5b9a\u4e49","text":"\u6307\u5b9a\u6839\u76ee\u5f55\uff1a root path; \u9ed8\u8ba4\uff1aroot html location /download/ { # \u8bf7\u6c42\u7684URI\u662f/download/index/test.html\uff0c\u670d\u52a1\u5668\u8fd4\u56de/opt/web/html/download/index/test.html\u6587\u4ef6\u7684\u5185\u5bb9 root /opt/web/html/ ; } \u5c06uri\u8bf7\u6c42\u76ee\u5f55\u6620\u5c04\u4e3a\u6839\u76ee\u5f55\uff1a alias path; location /conf { # \u8bf7\u6c42\u7684URI\u662f/conf/nginx.conf\uff0c\u670d\u52a1\u5668\u8fd4\u56de/usr/local/nginx/conf/nginx.conf\uff0c\u5c06/conf\u6620\u5c04\u4e3a\u4e86/usr/local/nginx/conf/ alias /usr/local/nginx/conf/ ; } \u8bbf\u95ee\u9996\u9875\uff1a index file...; \u9ed8\u8ba4\uff1aindex index.html; \u6839\u636eHTTP\u8fd4\u56de\u7801\u91cd\u5b9a\u5411\u9875\u9762\uff1a error_page code[code...][=|=answer-code]uri|@named_location error_page 404 /404.html ; error_page 502 503 504 /50x.html ; error_page 403 http://example.com/forbidden.html ; # \u91cd\u5b9a\u5411\u5230\u53e6\u4e00\u4e2alocation\u4e2d\u8fdb\u884c\u5904\u7406 error_page 404 = @fallback ; location @fallback ( proxy_pass http://backend ; ) \u662f\u5426\u5141\u8bb8\u9012\u5f52\u4f7f\u7528error_page\uff1a recursive_error_pages[on|off]; \u9ed8\u8ba4\uff1arecursive_error_pages off; \u5bfb\u627e\u6587\u4ef6\uff1a try_files path1[path2] uri; # \u6309\u7167\u987a\u5e8f\u627e\u8fd9\u4e9b\u6587\u4ef6\uff0c\u6587\u4ef6\u5b58\u5728\u5c31\u8fd4\u56de\uff0c\u7ed3\u675f\u8bf7\u6c42\uff0c\u5982\u679c\u90fd\u627e\u4e0d\u5230\u5c31\u8fdb\u5165\u8bbe\u7f6e\u597d\u7684\u91cd\u5b9a\u5411\u5904\u7406\u3002 try_files /system/maintenance.html $uri $uri /index.html $uri .html @other ; location @other { proxy_pass http://backend ; }","title":"3.\u6587\u4ef6\u8def\u5f84\u7684\u5b9a\u4e49"},{"location":"blog/2021/12/nginx_record/#4\u5185\u5b58\u53ca\u78c1\u76d8\u8d44\u6e90\u7684\u5206\u914d","text":"\u5904\u7406\u8bf7\u6c42\u65f6\u5185\u5b58\u3001\u78c1\u76d8\u8d44\u6e90\u5206\u914d\u7684\u914d\u7f6e\u9879 HTTP\u5305\u4f53\u53ea\u5b58\u50a8\u5230\u78c1\u76d8\u6587\u4ef6\u4e2d\uff1a client_body_in_file_only on|clean|off; \u9ed8\u8ba4\uff1aclient_body_in_file_only off; \u5f53\u8bbe\u7f6e\u4e3aon|clean\u65f6\uff0c\u8bf7\u6c42\u5305\u4f53\u4f1a\u5b58\u50a8\u5728\u78c1\u76d8\u6587\u4ef6\u4e2d\u3002 HTTP\u5305\u4f53\u5c3d\u91cf\u5199\u5165\u5230\u4e00\u4e2a\u5185\u5b58buffer\u4e2d\uff1a client_body_in_single_buffer on|off; \u9ed8\u8ba4\uff1aclient_body_in_single_buffer off; \u5982\u679c\u5305\u4f53\u5185\u5bb9\u5927\u8fc7client_body_buffer_size\uff0c\u5305\u4f53\u5185\u5bb9\u5c31\u5b58\u50a8\u5728\u78c1\u76d8\u6587\u4ef6\u4e2d \u5b58\u50a8HTTP\u5934\u90e8\u7684\u5185\u5b58buffer\u5927\u5c0f\uff1a client_header_buffer_size size; \u9ed8\u8ba4\uff1aclient_header_buffer_size 1k; \u6b63\u5e38\u60c5\u51b5\u4e0bNginx\u63a5\u6536\u7528\u6237\u8bf7\u6c42\u4e2dHTTP header\u90e8\u5206\uff08\u5305\u62ecHTTP\u884c\u548cHTTP\u5934\u90e8\uff09\u65f6\u5206\u914d\u7684\u5185\u5b58buffer\u5927\u5c0f \u5b58\u50a8\u8d85\u5927HTTP\u5934\u90e8\u7684\u5185\u5b58buffer\u5927\u5c0f\uff1a large_client_header_buffers number size; \u9ed8\u8ba4\uff1alarge_client_header_buffers 48k; \u5b9a\u4e49\u4e86Nginx\u63a5\u6536\u4e00\u4e2a\u8d85\u5927HTTP\u5934\u90e8\u8bf7\u6c42\u7684buffer\u4e2a\u6570\u548c\u6bcf\u4e2abuffer\u7684\u5927\u5c0f \u5b58\u50a8HTTP\u5305\u4f53\u7684\u5185\u5b58buffer\u5927\u5c0f\uff1a client_body_buffer_size size; \u9ed8\u8ba4\uff1aclient_body_buffer_size 8k/16k; \u5b9a\u4e49\u4e86Nginx\u63a5\u6536HTTP\u5305\u4f53\u7684\u5185\u5b58\u7f13\u51b2\u533a\u5927\u5c0f HTTP\u5305\u4f53\u7684\u4e34\u65f6\u5b58\u653e\u76ee\u5f55\uff1a client_body_temp_path dir-path[level1[level2[level3]]] client_body_temp_path /opt/nginx/client_temp 1 2; \u6307\u5b9a\u4e3a\u8fde\u63a5\u6210\u529f\u7684\u8bf7\u6c42\u5206\u914d\u5185\u5b58\u6c60\u521d\u59cb\u5927\u5c0f\uff1a connection_pool_size size; \u9ed8\u8ba4\uff1aconnection_pool_size 256; \u5f00\u59cb\u5904\u7406\u8bf7\u6c42\uff0c\u4e3a\u6bcf\u4e2a\u8bf7\u6c42\u5206\u914d\u7684\u5185\u5b58\u6c60\u5927\u5c0f\uff1a request_pool_size size; \u9ed8\u8ba4\uff1arequest_pool_size 4k;","title":"4.\u5185\u5b58\u53ca\u78c1\u76d8\u8d44\u6e90\u7684\u5206\u914d"},{"location":"blog/2021/12/nginx_record/#5\u7f51\u7edc\u8fde\u63a5\u7684\u8bbe\u7f6e","text":"\u8bfb\u53d6HTTP\u5934\u90e8\u7684\u8d85\u65f6\u65f6\u95f4\uff1a client_header_timeout time\uff08\u9ed8\u8ba4\u5355\u4f4d\uff1a\u79d2\uff09; \u9ed8\u8ba4\uff1aclient_header_timeout 60; \u8bfb\u53d6HTTP\u5305\u4f53\u7684\u8d85\u65f6\u65f6\u95f4\uff1a client_body_timeout time\uff08\u9ed8\u8ba4\u5355\u4f4d\uff1a\u79d2\uff09; \u9ed8\u8ba4\uff1aclient_body_timeout 60; \u53d1\u9001\u54cd\u5e94\u7684\u8d85\u65f6\u65f6\u95f4\uff1a send_timeout time; \u9ed8\u8ba4\uff1asend_timeout 60; reset_timeout_connection on|off; \u9ed8\u8ba4\uff1areset_timeout_connection off; \u8fde\u63a5\u8d85\u65f6\uff0c\u76f4\u63a5\u5411\u7528\u6237\u53d1\u9001RST\u91cd\u7f6e\u5305\uff0c\u800c\u4e0d\u662f\u56db\u6b21\u6325\u624b\u5173\u95ed\u8fde\u63a5\u3002 lingering_close off|on|always; \u9ed8\u8ba4\uff1alingering_close on; \u63a7\u5236Nginx\u5173\u95ed\u7528\u6237\u8fde\u63a5\u7684\u65b9\u5f0f\u3002 always\u8868\u793a\u5173\u95ed\u7528\u6237\u8fde\u63a5\u524d\u5fc5\u987b\u65e0\u6761\u4ef6\u5730\u5904\u7406\u8fde\u63a5\u4e0a\u6240\u6709\u7528\u6237\u53d1\u9001\u7684\u6570\u636e off\u8868\u793a\u5173\u95ed\u8fde\u63a5\u65f6\u5b8c\u5168\u4e0d\u7ba1\u8fde\u63a5\u4e0a\u662f\u5426\u5df2\u7ecf\u6709\u51c6\u5907\u5c31\u7eea\u7684\u6765\u81ea\u7528\u6237\u7684\u6570\u636e on\u662f\u4e2d\u95f4\u503c\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\u5728\u5173\u95ed\u8fde\u63a5\u524d\u90fd\u4f1a\u5904\u7406\u8fde\u63a5\u4e0a\u7684\u7528\u6237\u53d1\u9001\u7684\u6570\u636e lingering_time time; \u9ed8\u8ba4\uff1alingering_time 30s; \u8ddf\u7528\u6237\u6587\u4ef6\u4e0a\u4f20\u76f8\u5173\uff0c\u5982\u679c\u7ecf\u8fc7lingering_time\u540e\uff0c\u4e0a\u4f20\u8fd8\u5728\u7ee7\u7eed\uff0c\u5219\u4f1a\u5173\u95ed\u8fde\u63a5 lingering_timeout time; \u9ed8\u8ba4\uff1alingering_timeout 5s; \u5173\u95ed\u8fde\u63a5\u524d\uff0c\u68c0\u6d4b\u662f\u5426\u6709\u7528\u6237\u53d1\u9001\u7684\u6570\u636e\u5230\u8fbe\u670d\u52a1\u5668 \u5bf9\u67d0\u4e9b\u6d4f\u89c8\u5668\u7981\u7528keepalive\u529f\u80fd\uff1a keepalive_disable[msie6|safari|none]... \u9ed8\u8ba4\uff1akeepalive_disablemsie6 safari \u8ba9\u591a\u4e2a\u8bf7\u6c42\u590d\u7528\u4e00\u4e2aHTTP\u957f\u8fde\u63a5\uff0c\u8fd9\u4e2a\u529f\u80fd\u5bf9\u670d\u52a1\u5668\u7684\u6027\u80fd\u63d0\u9ad8\u662f\u5f88\u6709\u5e2e\u52a9\u7684 keepalive\u8d85\u65f6\u65f6\u95f4\uff1a keepalive_timeout time\uff08\u9ed8\u8ba4\u5355\u4f4d\uff1a\u79d2\uff09; \u9ed8\u8ba4\uff1akeepalive_timeout 75; \u4e00\u4e2akeepalive\u8fde\u63a5\u5728\u95f2\u7f6e\u8d85\u8fc7\u4e00\u5b9a\u65f6\u95f4\u540e\uff08\u9ed8\u8ba4\u7684\u662f75\u79d2\uff09\uff0c\u670d\u52a1\u5668\u548c\u6d4f\u89c8\u5668\u90fd\u4f1a\u53bb\u5173\u95ed\u8fd9\u4e2a\u8fde\u63a5\u3002 \u4e00\u4e2akeepalive\u957f\u8fde\u63a5\u4e0a\u5141\u8bb8\u627f\u8f7d\u7684\u8bf7\u6c42\u6700\u5927\u6570\uff1a keepalive_requests n; \u9ed8\u8ba4\uff1akeepalive_requests 100; \u5bf9keepalive\u8fde\u63a5\u662f\u5426\u4f7f\u7528TCP_NODELAY\u9009\u9879\uff1a tcp_nodelay on|off; \u9ed8\u8ba4\uff1atcp_nodelay on; tcp_nopush on|off; \u9ed8\u8ba4\uff1atcp_nopush off; \u6253\u5f00tcp_nopush\u540e\uff0c\u5c06\u4f1a\u5728\u53d1\u9001\u54cd\u5e94\u65f6\u628a\u6574\u4e2a\u54cd\u5e94\u5305\u5934\u653e\u5230\u4e00\u4e2aTCP\u5305\u4e2d\u53d1\u9001","title":"5.\u7f51\u7edc\u8fde\u63a5\u7684\u8bbe\u7f6e"},{"location":"blog/2021/12/nginx_record/#6mime\u7c7b\u578b\u7684\u8bbe\u7f6e","text":"MIME type\u4e0e\u6587\u4ef6\u6269\u5c55\u7684\u6620\u5c04\uff1a type{...}; types { text / html html ; text / html conf ; image / gif gif ; image / jpeg jpg ; } \u9ed8\u8ba4MIME type\uff1a default_type MIME-type; \u9ed8\u8ba4\uff1adefault_type text/plain; types_hash_bucket_size size; \u9ed8\u8ba4\uff1atypes_hash_bucket_size 32|64|128; \u8bbe\u7f6e\u6bcf\u4e2a\u6563\u5217\u6876\u5360\u7528\u7684\u5185\u5b58\u5927\u5c0f\uff0c\u5feb\u901f\u5bfb\u627e\u5230\u76f8\u5e94MIME type\uff0c\u4f7f\u7528\u6563\u5217\u8868\u6765\u5b58\u50a8MIMEtype\u4e0e\u6587\u4ef6\u6269\u5c55\u540d types_hash_max_size size; \u9ed8\u8ba4\uff1atypes_hash_max_size 1024; types_hash_max_size\u8d8a\u5927\uff0c\u5c31\u4f1a\u6d88\u8017\u66f4\u591a\u7684\u5185\u5b58\uff0c\u4f46\u6563\u5217key\u7684\u51b2\u7a81\u7387\u4f1a\u964d\u4f4e\uff0c\u68c0\u7d22\u901f\u5ea6\u5c31\u66f4\u5feb","title":"6.MIME\u7c7b\u578b\u7684\u8bbe\u7f6e"},{"location":"blog/2021/12/nginx_record/#7\u5bf9\u5ba2\u6237\u7aef\u8bf7\u6c42\u7684\u9650\u5236","text":"\u6309HTTP\u65b9\u6cd5\u540d\u9650\u5236\u7528\u6237\u8bf7\u6c42\uff1a limit_except method...{...} # \u7981\u6b62GET\u65b9\u6cd5\u548cHEAD\u65b9\u6cd5\uff0c\u5141\u8bb8\u5176\u4ed6HTTP\u65b9\u6cd5 limit_except GET { allow 192 .168.1.0/32 ; deny all ; } HTTP\u8bf7\u6c42\u5305\u4f53\u7684\u6700\u5927\u503c\uff1a client_max_body_size size; \u9ed8\u8ba4\uff1aclient_max_body_size 1m; \u53ef\u4ee5\u544a\u8bc9\u7528\u6237\u8bf7\u6c42\u8fc7\u5927\u4e0d\u88ab\u63a5\u53d7 \u5bf9\u8bf7\u6c42\u7684\u9650\u901f\uff1a limit_rate speed; \u9ed8\u8ba4\uff1alimit_rate 0; \u9650\u5236\u6bcf\u79d2\u4f20\u8f93\u7684\u5b57\u8282\u6570 \u8d85\u8fc7\u591a\u5927\u540e\u9650\u901f\uff1a limit_rate_after time; \u9ed8\u8ba4\uff1alimit_rate_after 1m;","title":"7.\u5bf9\u5ba2\u6237\u7aef\u8bf7\u6c42\u7684\u9650\u5236"},{"location":"blog/2021/12/nginx_record/#8\u6587\u4ef6\u64cd\u4f5c\u7684\u4f18\u5316","text":"sendfile\u7cfb\u7edf\u8c03\u7528\uff1a sendfile on|off; \u9ed8\u8ba4\uff1asendfile off; \u51cf\u5c11\u5185\u6838\u6001\u4e0e\u7528\u6237\u6001\u95f4\u7684\u6587\u4ef6\u590d\u5236\u6b21\u6570\uff08\u96f6\u62f7\u8d1d\uff09 AIO\u7cfb\u7edf\u8c03\u7528\uff1a aio on|off; \u662f\u5426\u5728FreeBSD\u6216Linux\u7cfb\u7edf\u4e0a\u542f\u7528\u5185\u6838\u7ea7\u522b\u7684\u5f02\u6b65\u6587\u4ef6I/O\u529f\u80fd \u4e0esendfile\u529f\u80fd\u662f\u4e92\u65a5\u7684 directio size|off; \u9ed8\u8ba4\uff1adirectio off; \u8bfb\u53d6\u6587\u4ef6\uff0c\u7f13\u51b2\u533a\u5927\u5c0f\u4e3asize\uff0c\u901a\u5e38\u5bf9\u5927\u6587\u4ef6\u7684\u8bfb\u53d6\u901f\u5ea6\u6709\u4f18\u5316\u4f5c\u7528\u3002 \u4e0esendfile\u529f\u80fd\u662f\u4e92\u65a5\u7684 directio_alignment size; \u9ed8\u8ba4\uff1adirectio_alignment 512; \u4e0edirectio\u914d\u5408\u4f7f\u7528\uff0c\u6307\u5b9a\u4ee5directio\u65b9\u5f0f\u8bfb\u53d6\u6587\u4ef6\u65f6\u7684\u5bf9\u9f50\u65b9\u5f0f\uff084k\u5bf9\u9f50\u7b49\uff09 \u6253\u5f00\u6587\u4ef6\u7f13\u5b58\uff1a open_file_cache max=N[inactive=time]|off; \u9ed8\u8ba4\uff1aopen_file_cache off; \u662f\u5426\u7f13\u5b58\u6253\u5f00\u6587\u4ef6\u9519\u8bef\u7684\u4fe1\u606f\uff1a open_file_cache_errors on|off; \u9ed8\u8ba4\uff1aopen_file_cache_errors off; \u662f\u5426\u5728\u6587\u4ef6\u7f13\u5b58\u4e2d\u7f13\u5b58\u6253\u5f00\u6587\u4ef6\u65f6\u51fa\u73b0\u7684\u627e\u4e0d\u5230\u8def\u5f84\u3001\u6ca1\u6709\u6743\u9650\u7b49\u9519\u8bef\u4fe1\u606f \u4e0d\u88ab\u6dd8\u6c70\u7684\u6700\u5c0f\u8bbf\u95ee\u6b21\u6570\uff1a open_file_cache_min_uses number; \u9ed8\u8ba4\uff1aopen_file_cache_min_uses 1; \u4e0eopen_file_cache\u4e2d\u7684inactive\u53c2\u6570\u914d\u5408\u4f7f\u7528\u3002\u5982\u679c\u5728inactive\u6307\u5b9a\u7684\u65f6\u95f4\u6bb5\u5185\uff0c\u8bbf\u95ee\u6b21\u6570\u8d85\u8fc7\u4e86open_file_cache_min_uses\u6307\u5b9a\u7684\u6700\u5c0f\u6b21\u6570\uff0c\u90a3\u4e48\u5c06\u4e0d\u4f1a\u88ab\u6dd8\u6c70\u51fa\u7f13\u5b58 \u68c0\u9a8c\u7f13\u5b58\u4e2d\u5143\u7d20\u6709\u6548\u6027\u7684\u9891\u7387\uff1a open_file_cache_valid time; \u9ed8\u8ba4\uff1aopen_file_cache_valid 60s; \u9ed8\u8ba4\u4e3a\u6bcf60\u79d2\u68c0\u67e5\u4e00\u6b21\u7f13\u5b58\u4e2d\u7684\u5143\u7d20\u662f\u5426\u4ecd\u6709\u6548","title":"8.\u6587\u4ef6\u64cd\u4f5c\u7684\u4f18\u5316"},{"location":"blog/2021/12/nginx_record/#9\u5bf9\u5ba2\u6237\u7aef\u8bf7\u6c42\u7684\u7279\u6b8a\u5904\u7406","text":"\u5ffd\u7565\u4e0d\u5408\u6cd5\u7684HTTP\u5934\u90e8\uff1a ignore_invalid_headers on|off; \u9ed8\u8ba4\uff1aignore_invalid_headers off; off\u8868\u793a\u5141\u8bb8\u4e0d\u5408\u6cd5\u7684\u8bf7\u6c42\u5934 HTTP\u5934\u90e8\u662f\u5426\u5141\u8bb8\u4e0b\u5212\u7ebf\uff1a underscores_in_headers on|off; \u9ed8\u8ba4\uff1aunderscores_in_headers off; off\u8868\u793a\u4e0d\u5141\u8bb8\u6709\u4e0b\u5212\u7ebf \u5bf9If-Modified-Since\u5934\u90e8\u7684\u5904\u7406\u7b56\u7565\uff1a if_modified_since[off|exact|before]; \u9ed8\u8ba4\uff1aif_modified_since exact; \u4e0a\u6b21\u8bf7\u6c42\u83b7\u53d6\u5185\u5bb9\u7684\u65f6\u95f4 \u6587\u4ef6\u672a\u627e\u5230\u65f6\u662f\u5426\u8bb0\u5f55\u5230error\u65e5\u5fd7\uff1a log_not_found on|off; \u9ed8\u8ba4\uff1alog_not_found on; \u5408\u5e76\u8bf7\u6c42\u4e2d\u76f8\u90bb\u7684/\uff1a merge_slashes on|off; \u9ed8\u8ba4\uff1amerge_slashes on; DNS\u89e3\u6790\u5730\u5740\uff1a resolver address...; DNS\u89e3\u6790\u7684\u8d85\u65f6\u65f6\u95f4\uff1a resolver_timeout time; \u9ed8\u8ba4\uff1aresolver_timeout 30s;","title":"9.\u5bf9\u5ba2\u6237\u7aef\u8bf7\u6c42\u7684\u7279\u6b8a\u5904\u7406"},{"location":"blog/2022/","text":"\u6280\u672f\u533a2022\u5e74\u7b80\u8ff0 hello \ud83d\udc1f","title":"Index"},{"location":"blog/2022/#hello","text":"","title":"hello"},{"location":"blog/2022/1/","text":"","title":"1"},{"location":"life/","text":"","title":"\u751f\u6d3b"}]}